





AJNETSDK documentation
(AJNetSDK.dll)











V1.6





Tables of contents

Definition of API (AJNETSDK)	7
AJ_NETSDK_IPC_Init (initialize)	7
AJ_NETSDK_IPC_LoadVendorId()	7
AJ_NETSDK_IPC_Cleanup (release resources)	7
AJ_NETSDK_IPC_SetStatusEventCallBack (callback function)	7
AJ_NETSDK_IPC_GetSDKVersion (get AJNETSDK version)	10
AJ_NETSDK_IPC_GetSDKBuildVersion (get AJNETSDK compile version)	10
AJ_NETSDK_IPC_SetAutoReconnect (connect automatically)	10
AJ_NETSDK_IPC_Login (connect device)	11
AJ_NETSDK_IPC_Reconnect (connect again)	11
AJ_NETSDK_IPC_Logout (disconnect device)	12
AJ_NETSDK_IPC_LogoutAll (disconnect all devices)	12
AJ_NETSDK_IPC_SetAUXResponseCallBack (callback function for auxiliary channel)	12
AJ_NETSDK_IPC_SetLogToFile (log output)	13
AJ_NETSDK_IPC_RealPlay (receive stream)	13
AJ_NETSDK_IPC_RealPlayBySimple(Receive unicast media stream interface)	16
AJ_NETSDK_IPC_SetRealDataCallBack (callback function for receiveing stream)	18
AJ_NETSDK_IPC_StopAllRealPlay (stop all media stream)	19
AJ_NETSDK_IPC_StopRealPlay (stop receiving stream)	19
AJ_NETSDK_IPC_GetVideoParam (get video parameter)	19
AJ_NETSDK_IPC_GetAudioParam (get audio parameter)	20
AJ_NETSDK_IPC_GetFileByName (download file)	20
AJ_NETSDK_IPC_StopGetFile (stop downloading)	21
AJ_NETSDK_IPC_GetDownloadPos (get download progress)	21
AJ_NETSDK_IPC_PTZControl (basic PTZ)	21
AJ_NETSDK_IPC_PTZPreset (preset)	22
AJ_NETSDK_IPC_PTZControlEx (PTZ expansion interface, 485 transparent transmission)	23
AJ_NETSDK_IPC_StartVoiceCom (voice talk)	23
AJ_NETSDK_IPC_StopVoiceCom (stop voice talkback)	24
AJ_NETSDK_IPC_FormatDisk (format storage)	24
AJ_NETSDK_IPC_Upgrade (upgrade)	25
AJ_NETSDK_IPC_GetUpgradeProgress (obtain progress of upgrading)	25
AJ_NETSDK_IPC_GetUpgradeState (obtain upgrading status)	26
AJ_NETSDK_IPC_CloseUpgradeHandle (stop upgrading)	26
AJ_NETSDK_IPC_FindDVRLogFile (query log)	26
AJ_NETSDK_IPC_RestoreConfig (restore configuration)	27
AJ_NETSDK_IPC_GetConfigFile (dowload configuration file)	27
AJ_NETSDK_IPC_SetConfigFile (upload and replace configuration file)	27
AJ_NETSDK_IPC_RebootDVR (reboot)	28
AJ_NETSDK_IPC_GetDVRConfig (configuration)	28
AJ_NETSDK_IPC_SetDVRConfig (set configuration)	28
AJ_NETSDK_IPC_SystemControl (system control)	29
AJ_NETSDK_IPC_GetDeviceAbility (obtain device ability)	29
AJ_NETSDK_IPC_GetReplayAblity (front-end playback online)	30
AJ_NETSDK_IPC_ControlPlay (control front-end playback)	30
AJ_NETSDK_IPC_SetReplayDataCallBack (front-end playback callback function)	31
AJ_NETSDK_IPC_PlayDeviceFile (play front-end file)	32
AJ_NETSDK_IPC_SetPlayActionEventCallBack (front-end playback callback)	33
AJ_NETSDK_IPC_SetSearchStatusCallBack (search IPC callback function)	33
AJ_NETSDK_IPC_StartSearchIPC (start to search device)	34
AJ_NETSDK_IPC_StopSearchIPC (stop searching device)	34
AJ_NETSDK_IPC_GetSearchIPCCount (obtain IPC number)	34
AJ_NETSDK_IPC_GetIPCInfo (structure format of IPC information)	34
AJ_NETSDK_IPC_ModifyIPC (modify structure format of IPC information)	36
AJ_NETSDK_IPC_GetIPCInfoXML (obtain device information of XML format)	37
AJ_NETSDK_IPC_ModifyIPCXML (modify IP address XML format)	38
AJ_NETSDK_IPC_GetOneIPAddress (obatain a avaiable IP address)	39
AJ_NETSDK_IPC_GetNetworkParam (obtain network configuration)	39
AJ_NETSDK_IPC_StartTalk (initialize broadcast parameter)	40
AJ_NETSDK_IPC_StopTalk (release broadcast resource)	40
AJ_NETSDK_IPC_InputAudioData Enter the custom PCM intercom audio data.	41
AJ_NETSDK_IPC_AddTalk (add device for broadcast)	41
AJ_NETSDK_IPC_RemoveTalk (stop specific voice talkback)	42
AJ_NETSDK_IPC_CreateIFrame (create key frame)	42
AJ_NETSDK_IPC_SetUserData (save user data)	42
AJ_NETSDK_IPC_GetUserData (read saved data)	43
AJ_NETSDK_IPC_StartRecord(Start Record)	43
AJ_NETSDK_IPC_StopRecord(stop Record)	44
AJ_NETSDK_IPC_GetLastErrorCode(get and eliminate error code)	44
AJ_NETSDK_IPC_StartRecordStream(enable stream mode record)	45
AJ_NETSDK_IPC_InputRecordStream(record file by input media data)	46
AJ_NETSDK_IPC_StopRecordStream (stop outer media recording)	46
AJ_NETSDK_IPC_AddInviteAudioStream(request capture compressed audio)	47
AJ_NETSDK_IPC_SetEncodeAudioCallBack(set capture compressed audio callback)	47
AJ_NETSDK_IPC_RemoveInviteAudioStream(cancle capture compressed audio)	47
AJ_NETSDK_IPC_SerialStart (open serial port)	48
AJ_NETSDK_IPC_SerialSend (send serial data)	48
AJ_NETSDK_IPC_SerialStop (close serial port)	49
Note about AJNETSDK	50
Steps of realizing video stream play	50
Realize auxiliary channel connection for PTZ control, system control, device configuration, etc	51
Steps of realizing audio broadcast	51
Steps of controlling PTZ	52
Steps of receiving stream record	52
Steps of outer input stream record	52
Steps of playing front-end record file	52
Steps of searching online device	53
Receive audio capture compressed stream	53
Schedule 1 PTZ XML command	54
1.	PTZ instruction	54
2.	XML command	54
2.1	Ordinary command	54
2.1.1	UP	54
2.1.2	down	54
2.1.3	left	55
2.1.4	right	55
2.1.5	Left-up	55
2.1.6	Left-down	55
2.1.7	Right-up	56
2.1.8	Right-down	56
2.1.9	stop	56
2.1.10	zoom out	56
2.1.11	zoom in	56
2.1.12	FocusAutoOn	57
2.1.13	FocusAutoOff	57
2.1.14	focus- (focusnear)	57
2.1.15	focus+ (focusfar)	57
2.1.16	IrisAutoOn	57
2.1.17	IrisAutoOff	57
2.1.18	Iris- (irisclose)	58
2.1.19	Iris+ (irisopen)	58
2.2	Orbit and scan	58
2.2.1	Orbit	58
2.2.2	Scan begin	58
2.2.3	Scan end	58
2.2.4	Scan on	58
2.2.5	Scan off	59
2.3	Preset command	59
2.3.1	Get current preset list	59
2.3.2	Add Preset	59
2.3.3	Delete preset	59
2.3.4	Call preset	60
2.3.5	Set for orbit	60
2.3.6	Set for scan	60
2.3.7	Delete orbit setting	61
2.3.8	Delete scan setting	61
2.4	Advanced command	61
2.4.1	Black/White	61
2.4.2	Color	61
2.4.3	Mirror off	61
2.4.4	Mirror on	62
2.4.5	Freeze off	62
2.4.6	Freeze on	62
2.4.7	Digital zoom off	62
2.4.8	Digital zoom on	62
2.4.9	OSD off	62
2.4.10	OSD on	63
2.4.11	Illumination off	63
2.4.12	Illumination on	63
2.4.13	Ill off	63
2.4.14	Ill on	63
2.4.15	Reset	63
2.4.16	WB auto	64
2.4.17	WB manual	64
2.4.18	WB_R	64
2.4.19	WB_B	64
2.4.20	WB_M	64
2.4.21	WB_G	64
2.4.22	Initialize	65
2.4.23 Menu	65
2.5 Transparent Transmission Control Command	65
Schedule2 Advanced function of auxiliary channel	66
1. Advanced function	66
2. Call auxiliary channel function	66
3. Read and set command	66
Obtain PTZ command (201 command)	66
Modify PTZ parameter (225 command)	70
Modify PTZ advanced parameter (226 command)	71
Read configuration about synchronize time (202 command)	74
Modify method about synchronize time (222 command)	75
Obtain user list (203 command)	75
Modify user list (223 command)	76
Output log (204 command)	76
Set Output log (224 command)	76
Read default language (205 command)	77
Set default language (225 command)	77
Read system configuration XML (command 200)	77
Modify system configuration (command 220)	81
4. Read and set network configuration information	85
Read network configuration (command 200)	85
Modify network configuration (command 220)	87
Read Ethernet configuration (command 305)	89
Modify Ethernet configuration (command 325)	89
Read the WIFI configuration (command 306)	90
Modify the WIFI configuration (command 326)	91
Read the ADSL configuration (command 310)	92
Modify the ADSL configuration (command 330)	92
Read the DDNS configuration (command 311)	92
Modify the DDNS configuration (command 331)	93
Read the UPNP configuration (command 312)	93
Modify UPNP configuration (command 332)	93
Read the 3G configuration (command 313)	94
Modify the 3G configuration (command 333)	94
5. FTP & SMTP related configuration	95
Read FTP & SMTP related configuration (command 400)	95
Modify FTP & SMTP related configuration (command 420)	96
Read the FTP configuration (command 401)	98
Modify the FTP configuration (command 421)	99
Read the SMTP configuration (command 402)	100
Modify the SMTP configuration (command 422)	100
6. Media parameter setup	101
Read media configuration parameter (command 500)	101
Read video parameter configuration (command 501)	104
Read audio parameter configuration (command 502)	106
Modify media parameter configuration (command 520)	106
Modify video parameter configuration (command 523)	109
Modify video parameter configuration (command 524)	110
Modify time title parameter configuration (command 525)	110
Modify picture capture configuration (command 526)	111
Modify audio capture configuration (command 527)	111
Modify audio encode configuration (command 528)	112
Modify privacy mask (command 529)	112
Read streaming media parameter (command 600)	113
Modify streaming media parameter (command 620)	113
Read storage setup parameter (command 700)	114
Modify storage setup parameter (command 720)	115
7. Alarm setup command	117
Read alarm setting parameter (command 800)	117
Modify alarm setting parameter (command 820)	120
Read IO input alarm parameter (command 801)	123
Modify IO input alarm parameter (command 821)	124
Read motion detect alarm parameter (command 802)	125
Modify motion detect alarm parameter (command 822)	126
Read video lost alarm parameter (command 803)	128
Modify video lost alarm parameter (command 823)	128
Read video lost alarm parameter (command 804)	129
Modify video lost alarm parameter (command 824)	129
Read storage alarm patameter (command 805)	130
Modify storage alarm patameter (command 825)	130
8. System control command	131
Read system information (command 1012)	131
Restore to default configuration (command 1002)	131
Modify system time (command 1005)	132
Restart system (command 1007)	132
Receive storage information (command 1014)	132
Format front-end storage device (command 1017)	133
Unmount front-end storage device (command 1018)	133
Receive device serial number information (command 1019)	133
Read system capacity set (command 1020)	134
Device video file search (picture or video file) (command 1021)	134
File upload (configuration file and update file) (command 1022)	135
File download (command 1023)	136
Delete file (command 1024)	136
Search log file (command 1025)	137
Read device type (command 1030)	137
Enforce device generate key frame (only V2.0 firmware has) (command 1032)	137
Read user storage data (only V2.0 firmware has) (command 1034)	138
Set user storage data (only V2.0 firmware has) (command 1033)	138
9. Related micro definition table	138
 
 Definition of API (AJNETSDK)
AJ_NETSDK_IPC_Init (initialize)
Function:
LONG	__stdcall 	AJ_NETSDK_IPC_Init();
:
Parameterize DLL; call the function before call all functions
Parameter:
	0: success
ERR_INIT_SOCKET_ERROR: failed to initialize socket
Note:
	The “API” can not be called again after call AJ_NETSDK_IPC_Cleanup


AJ_NETSDK_IPC_LoadVendorId()
Function:
LONG	__stdcall		AJ_NETSDK_IPC_LoadVendorId();
Feature:
	Read vendor id, call the function before call all functions
Parameter:
	0: success

AJ_NETSDK_IPC_Cleanup (release resources)
Function:
LONG	__stdcall 	AJ_NETSDK_IPC_Cleanup();
Feature:
Clean up the used recourses in DLL 
Return:
	0: success
Note:
	Please call the function for exiting all threads when exit application


AJ_NETSDK_IPC_SetStatusEventCallBack (callback function)
Function:
LONG	__stdcall	 AJ_NETSDK_IPC_SetStatusEventCallBack(StatusEventCallBack fStatusEventCallBack,void * pUser);
Feature:
	Call the function when device status has been changed or receive event or alarm message
Feature:
	fStatusEventCallBack: callback function
Prototype: typedef LONG(CALLBACK *StatusEventCallBack)(LONG lUser,LONG nStateCode,char *pResponse,void *pUser);
Meaning of parameters:
		lUser: device mark
		nStateCode: event type
enum enumNetSatateEvent
{
	EVENT_CONNECTING,//connecting
	EVENT_CONNECTOK,//connect successfully
	EVENT_CONNECTFAILED,//connect failed
	EVENT_SOCKETERROR,//sock failed
	EVENT_LOGINOK,// login sucessfully
	EVENT_LOGINFAILED,// login failed
	EVENT_STARTAUDIOOK,// voice talk sucess
	EVENT_STARTAUDIOFAILED,// voice talk failed
	EVENT_STOPAUDIOOK,// stop voice talking sucessfully
	EVENT_STOPAUDIOFAILED,// stop voice talking failed
	EVENT_SENDPTZOK,// send PTZ command successfully
	EVENT_SENDPTZFAILED,// send PTZ command failed
	EVENT_SENDAUXOK,// send auxiliary channel sucessfully
	EVENT_SENDAUXFAILED,// send auxiliary channel failed
	EVENT_UPLOADOK,// upload file successfully
	EVENT_UPLOADFAILED,// upload file failed
	EVENT_DOWNLOADOK,// download successfully
	EVENT_DOWNLOADFAILED,// download failed
	EVENT_REMOVEOK,// delete file successfully
	EVENT_REMOVEFAILED,// delete file failed
	EVENT_SENDPTZERROR,// failed to control PTZ
	EVENT_PTZPRESETINFO,// presets
	EVNET_PTZNOPRESETINFO,// no preset
	EVENT_PTZALARM,// alarm message
	EVENT_RECVVIDEOPARAM,// return video parameter
	EVENT_RECVAUDIOPARAM,// return audio parameter
	EVENT_CONNECTRTSPERROR,// request video failed
				EVENT_CONNECTRTSPOK,// obtain media stream successfully
				EVENT_RTSPTHREADEXIT,// exit media stream thread
				EVENT_URLERROR,// failed to connect media stream URL
				EVENT_RECVVIDEOAUDIOPARAM,// obtain audio and video parameter
				EVENT_LOGIN_USERERROR,// username or password error
				EVENT_LOGOUT_FINISH,	// the login thread has already exit main loop
				EVENT_LOGIN_RECONNECT,	// login again
				EVENT_LOGIN_HEARTBEAT_LOST,// hearheat is lost
				EVENT_STARTAUDIO_ISBUSY,// voice talk is occupied
				EVENT_STARTAUDIO_PARAMERROR,// voice talk parameter error
	EVENT_STARTAUDIO_AUDIODDISABLED,// voice talk of the device is unavailable
EVENT_CONNECT_RTSPSERVER_ERROR=38,	// connect IP or port error
				EVENT_CREATE_RTSPCLIENT_ERROR,		// create rtsp client error
				EVENT_GET_RTSP_CMDOPTION_ERROR,		// return error when connecting rtsp server 
				EVENT_RTSP_AUTHERROR,				// username or password failed
};
		While nStateCode= EVENT_PTZALARM, then the meaning of code in pResponse as following:
pResponse is structure: ALARM_ITEM
typedef struct
{
	ALARM_TIME time;//alarm happen time(device time)
	int code;//alarm type
	int flag;
	int level;
	char data[128];//description
}ALARM_ITEM;

ALARM_TIME structure :
typedef struct
{
	int year;//year
	int month;//month
	int day;//day
	int wday;//week
	int hour;//hour 
	int minute;//minute
	int second;//second
}ALARM_TIME;

	 	1 : device is offline
2 : device is online
3 : USB ready
4 : USB not ready
5 : SD1 ready
6 : SD1 not ready
7 : SD2 ready
8 : SD2 not ready
9 : the free space of USB is lacking
10: the free space of SD1 is lacking
11: the free space of SD2 is lacking
12: video lost
13: video block
14: motion detect
15: IO high to low
16: IO low to high
17: free space lacking
18: start record success
19: record finish
20: start record failed

		While nStateCode= EVENT_RECVVIDEOPARAM, pResponse is structure:
typedef struct 
{
	CHAR codec[256]; //H264 or MPEG4, means current video decoding type
	INT width; //video width
	INT height; //video height
	INT colorbits; // colorbits, invalid here, only use in internal
	INT framerate; //reference framerate
	INT bitrate; //reference bitrate
	BYTE vol_data[256]; //extension paratemer,necessary data when decoding
	INT vol_length; //extension parameter length
}VIDEO_PARAM;


		While nStateCode= EVENT_RECVAUDIOPARAM, pResponse is structure:
typedef struct 
{
	CHAR codec[256]; //audio type, AAC or G711
	INT samplerate; // reference samplerate
	INT bitspersample; // reference bitrate
	INT channels; //channel number
	INT framerate;
	INT bitrate;
}AUDIO_PARAM;


		While nStateCode= EVENT_RECVVIDEOAUDIOPARAM, pResponse is structure:
typedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	// ==AV_FALG
	short  bHaveVideo;//0 means no video parameter
	short  bHaveAudio;//0 means no audio parameter
	VIDEO_PARAM videoParam;//video parameter
	AUDIO_PARAM audioParam;//audio parameter
}STREAM_AV_PARAM;



Some message about pResponse:
	pUser: the parameter is void *pUser when call the callback function
Return:
	0: success
Note:
	The callback function is not tread-safe, be careful the thread-safe (the callback function can be called by many threads)
	As a general rule, PostMessage to main thread and let main thread or special thread to process this message after receive callback status, otherwise, it maybe deadlock when process callback status on callback login


AJ_NETSDK_IPC_GetSDKVersion (get AJNETSDK version)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetSDKVersion();
Feature:
	Get AJNETSDK version
Return:
	It will return a 32-bits integer such as 1110050101, 111005 means release date, 0101 means version 1.01, for example, 1110050101 means it is 1.01 version release in October 5, 2011

AJ_NETSDK_IPC_GetSDKBuildVersion (get AJNETSDK compile version)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetSDKBuildVersion();
Feature:
	Return AJNETSDK complie date 
Return:
	Return compile date such as 2012011411 means January 14, 2012




AJ_NETSDK_IPC_SetAutoReconnect (connect automatically)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_SetAutoReconnect(LONG lUserID,int bAutoReconnect);
Feature:
	Whether connect automatically while login error or video stream error. Note: Library defaults connect automatically.
Parameter:
	lUserID: when it is 0 means it is new connection and will use the pre-set bAutoReconnect
bAutoReconnect: 0 means it can not connect automatically, otherwise connect automatically.
Return:
	0: success
	ERR_NOT_FIND_DEVICE: can not find the corresponding device of lUserID


AJ_NETSDK_IPC_Login (connect device)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_Login(char * szDVRIP,WORD wDVRPort,char *sUserName , char  *sPassword , LPAJ_NETSDK_IPC_DEVICEINFO lpDeviceInfo);
Feature:
The unique mark for communication channel, used for PTZ and configuration
Parameter:
szDVRIP: the IP address for connecting (such as 192.168.0.10)
	wDVRPort: communication port (such as 8091)
	sUserName: user name
	sPassword: password 
	lpDeviceInfo: pass in null, for expansion and compatibility
Return:
	Return 0 means failed (all the parameter named lUserID use the value)
Reasons for failure:
1.	szDVRIP is empty
2.	wDVRPort is not between 1 and 65535(invalid port)
3.	the IP and port has already logged
Note:
	1. The same devie can login many times
2. It will start a thread for connection and login after call login and it will be re-connection, if want to set up whether automatically connect, you can call AJ_NETSDK_IPC_SetAutoReconnectv (0, 0) first.
3. The login status will be notified by (AJ_NETSDK_IPC_SetStatusEventCallBack).

Some possible status

nStateCode: //event type
 
	EVENT_CONNECTING,// connecting
	EVENT_CONNECTOK,// connect successfully, but not be certified
	EVENT_CONNECTFAILED,// connect failed
	EVENT_SOCKETERROR,//sock failed
	EVENT_LOGINOK,// login successfully, certified successfully
EVENT_LOGINFAILED=5,// login failed
EVENT_LOGIN_USERERROR=31,// username or password error
				EVENT_LOGOUT_FINISH,	// exit main loop
				EVENT_LOGIN_RECONNECT,	// login again
				EVENT_LOGIN_HEARTBEAT_LOST,// heartbeat is lost


AJ_NETSDK_IPC_Reconnect (connect again)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_Reconnect(LONG lUserID);
Feature:
	Reconnect specified device or media stream
Parameter:
	lUserID: handle for login device
Return:
	0: re-connect successfully
	ERR_NOT_FIND_DEVICE: handle error
ERR_START_THREADERROR: start thread failed
ERR_DEV_NOT_LOGIN: not call login or video streaming handle
Note:
1.	It does not take effect until the logged device exit connection. And it maybe deadlock when process callback status on callback login.
2.	It will re-connect automatically in default.

AJ_NETSDK_IPC_Logout (disconnect device)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_Logout(LONG 	lUserID);
Feature:
	Cancellation of login devices
Parameter:
	lUserID: a return value of AJ_NETSDK_IPC_Login
Return
	0: logout successfully
	ERR_NOT_FIND_DEVICE: handle error
Note:
	1. call AJ_NETSDK_IPC_Logout after call AJ_NETSDK_IPC_Login
2. It will release relevant resources after call the function and wait for all thread logout.


AJ_NETSDK_IPC_LogoutAll (disconnect all devices)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_LogoutAll();
Feature:
	Logout all login devices
Parameter:
	none
Return:
	0: sucess
	
Note:
1. Call the function for logout all logged devices(keep media connection). 


AJ_NETSDK_IPC_SetAUXResponseCallBack (callback function for auxiliary channel)
Function:
	LONG		__stdcall		AJ_NETSDK_IPC_SetAUXResponseCallBack(AUXResponseCallBack fAUXCallBack,void * pUser);
Feature:
	Set callback function for an impact auxiliary channel
Parameter:
	fAUXCallBack: it will call the function when receive message from auxiliary channel. 
Prototype: typedef LONG(CALLBACK *AUXResponseCallBack)(LONG lUser,LONG nType,char *pResponse,void *pUser);
		Meaning:
lUser: identify the logged devices
nType: message type, the most significant byte of nType is not 0 (nType & 0xff000000!=0) means the corresponding message was carried out failed, the low 24 bit(Type=nType & 0xffffff) is the real message type, please refer to schedule 2 for detail meaning.
pUser: user pointer, is the same with the parameter of callback.
	pUser: for call calback function.
Return:
	0: success
Note:
1.	The callback function is not tread-safe, be careful the thread-safe (the callback function can be called by many threads)
2.	It maybe deadlock when process callback status directly


AJ_NETSDK_IPC_SetLogToFile (log output)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_SetLogToFile(DWORD bLogEnable,char *strLogDir,BOOL bAutoDel);
Feature:
	Log output
Parameter:
	bLogEnable: 0 means it will not ouput log; 1 means it will output local log
	strLogDir: it is a log directory when log output enable
	bAutoDel: non-zero, it will delete log automatically when the logs are more than 10 (it does not work now)
Return:
	0: success


AJ_NETSDK_IPC_RealPlay (receive stream)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_RealPlay(LONG lUserID,LPAJ_NETSDK_IPC_CLIENTINFO lpClientInfo,fRealDataCallBack cbRealDataCallBack,LPUSRE_VIDEOINFO pUser,BOOL bBlocked);
Feature:
	Start for receive stream
Parameter:
	lUserID: a logged device IP address. Used for get IP address
	lpClientInfo: compatible with orther SDK of different company (pass NULL)
	cbRealDataCallBack:(a callback function for receive stream)
				prototype: typedef LONG(CALLBACK *fRealDataCallBack)(LONG lRealHandle,DWORD dwDataType,BYTE *pBuffer,DWORD dwBufSize,LPFRAME_EXTDATA  pExtData);
				meaning:
lRealHandle used for mark up video stream, a return value of this function
dwDataType=0 means video, 1 means audio,2 means decoding parameter
pBuffer: media data pointer
when dwDataType is 2, pBuffer structure and its significance for the body :
typedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	//==AV_FALG
	short  bHaveVideo;//0 means no video parameter
	short  bHaveAudio;//0 means no audio parameter 
	VIDEO_PARAM videoParam;//video parameter
	AUDIO_PARAM audioParam;//audio parameter
}STREAM_AV_PARAM;
inside: 
typedef struct 
{
	CHAR codec[256];//H264 or MPEG4,etc, indicate current video encoding type
	INT width;      //video width
	INT height;	  //video height
	INT colorbits;  //color bit, invalid here,only use for internal
	INT framerate;  //referance framerate
	INT bitrate;    //referance code rate
	BYTE vol_data[256];//extension parameter,necessary data for decoding
	INT vol_length;    //extension parameter length
}VIDEO_PARAM;

typedef struct 
{
	CHAR codec[256];	//audio type, AAC or G711
	INT samplerate;	//referance bitrate
	INT bitspersample; //referance bitrate
	INT channels;		//sound channel quantity
	INT framerate;	
	INT bitrate;
}AUDIO_PARAM;

dwBufSize: media data length
pExtData //expansion parameter, when dwDataType=2, this pointer is null, when dwDataType=0,1,struct body as follow:
typedef struct
{
	int		bIsKey;//wheter it is a key frame
	double	timestamp;// timestamp
	void    *pUserData;// user data pointer
}FRAME_EXTDATA,* LPFRAME_EXTDATA;

	pUser: // connection parameter,struct body as follow:
typedef struct
{
		int  nVideoPort;// video port
		int  bIsTcp;// whether enable TCP
		int  nVideoChannle; // video channel, 32-bits integer, the previous 16-bit is type, it can be 0 or1, 0 is IPC, 1 is DVS; the subsequent 16-bit is video channel number, when the type is 0, it can be 0 or 1,0 means main stream, 1 means sub stream, when the type is 1, it can be 0,1,2,3,4,5 represent channel 1,2,3,4 and CIF for output
		void *pUserData;//user pointer
}USRE_VIDEOINFO,* LPUSRE_VIDEOINFO;
bBlocked: a save parameter for compatibility
Return:
	0 means fail, otherwise return unqiue indentifier
Note:
	1. It can not take a long of time for calling callback function
	2. cbRealDataCallBack is not thread-safe
3. In order to prevent mosaics, then you need to change the subsequent 16-bit, such as flag=0x1a2b3c4d which will be removed
typedef struct
{
	unsigned long flag;			//flag, fixed as 0x1a2b3c4d
	unsigned long data;			//last byte, data & 0xff, if the value is not 0 then it means it is the atual frame
	unsigned long frame_index;		//the current frame ID
	unsigned long keyframe_index;	    //the key frame ID which the current frame depend on
}VIDEO_FRAME_HEADER;

In order to prevent mosaics, you can drop frame as following:
		Char * inbuf_ptr;// the memory pointer of the current frame
		int size;// the current frame length

		VIDEO_FRAME_HEADER *pHeader = (VIDEO_FRAME_HEADER *)(inbuf_ptr + size - sizeof(VIDEO_FRAME_HEADER));
		if(pHeader->flag == 0x1a2b3c4d)
		{
			size = size - sizeof(VIDEO_FRAME_HEADER);
			if(pHeader->frame_index == pHeader->keyframe_index)  //key frame
			{
				
				m_dwLastFrameIndex = m_dwLastKeyFrameIndex = pHeader->keyframe_index;
			}
			else
			{
				if(pHeader->frame_index !=m_dwLastFrameIndex + 1)
				{//skip, does not decode the frame
					return -1;
				}
				else if(pHeader->keyframe_index != m_dwLastKeyFrameIndex)
				{//skip, does not decode the frame 
					return -1;
				}
				else
				{// record the last decode frame number
					m_dwLastFrameIndex++;
				}
			}
		}


4. It will receive the following status from status callback function
	EVENT_RECVVIDEOPARAM=24,// receive video encode parameter
	EVENT_RECVAUDIOPARAM,// receive audio encode parameter
	EVENT_CONNECTRTSPERROR,// connect failed
	EVENT_CONNECTRTSPOK,// connect successfully
	EVENT_RTSPTHREADEXIT,// exit connection thread
	EVENT_URLERROR,// URL error
	EVENT_RECVVIDEOAUDIOPARAM,// receive audio and video parameter at the same time
EVENT_CONNECT_RTSPSERVER_ERROR=38,	// connect failed, because of wrong IP or port
	EVENT_CREATE_RTSPCLIENT_ERROR,		// create a wrong rtsp client
	EVENT_GET_RTSP_CMDOPTION_ERROR,		// connect rtsp, return error
	EVENT_RTSP_AUTHERROR,			// authentication failure, because of wrong username or password


When nStateCode= EVENT_RECVVIDEOPARAM then pResponse is structure:
typedef struct 
{
	CHAR codec[256]; //H264 or MPEG4, etc, means current vido encoding type
	INT width; //video width
	INT height; //video height
	    INT colorbits; //color bit, invalid here, only use for internal
	INT framerate; //referance frame rate
	INT bitrate; //referance bit rate
	BYTE vol_data[256]; //extension parameter,necessary data for decoding
	INT vol_length; //extension parameter length
}VIDEO_PARAM;


		When nStateCode= EVENT_RECVAUDIOPARAM, pResponse is structure
typedef struct 
{
	CHAR codec[256]; //audio type,AAC or G711
	INT samplerate; //referance bit rate
	INT bitspersample; //referance bit rate
	INT channels; //audio channel quantity
	INT framerate;
	INT bitrate;
}AUDIO_PARAM;


		When nStateCode= EVENT_RECVVIDEOAUDIOPARAM, pResponse is structure
typedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	//==AV_FALG
	short  bHaveVideo;//0 means no video parameter
	short  bHaveAudio;//0 means no audio parameter
	VIDEO_PARAM videoParam;// video parameter
	AUDIO_PARAM audioParam;// audio parameter
}STREAM_AV_PARAM;



AJ_NETSDK_IPC_RealPlayBySimple(Receive unicast media stream interface)
Function LONG    __stdcall  AJ_NETSDK_IPC_RealPlayBySimple(LONG lUserID, char * pserverip, char *user, char *pass, fRealDataCallBack cbRealDataCallBack, int iStreamType, int  nVideoPort, int  bIsTcp, void *pUserData, BOOL bBlocked);
Feature:
Initiate a received audio and video stream for receiving only a video stream or an audio stream.
Parameter:
lUserID:The value returned when logging in to the device, used to determine whether the current device is successfully connected.
serverip:Device IP address, when directly connected to the device, compared with IP address,
user:The device is logged on to the user
	pass:Device login password
	cbRealDataCallBack:Callback function when a stream is received
				prototype:typedef LONG(CALLBACK *fRealDataCallBack)(LONG lRealHandle,DWORD dwDataType,BYTE *pBuffer,DWORD dwBufSize,LPFRAME_EXTDATA  pExtData);
				The meaning of the parameters is:
lRealHandle:Which is used to mark the video stream, which is the return value of this function,
dwDataType:0 for video, 1 for audio, 2 for decoding parameters
pBuffer:Media data pointer
When dwDataType = 2, pBuffer structure and its meaningtypedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	//==AV_FALG
	short  bHaveVideo;//0 Indicates that there are no video parameters
	short  bHaveAudio;//0 Indicates that there are no audio parameters
	VIDEO_PARAM videoParam;// Video parameters
	AUDIO_PARAM audioParam;// Audio parameters
}STREAM_AV_PARAM;
them: 
typedef struct 
{
	CHAR codec[256];// H264 or H265, and so on, that the current video encoding type
	INT width;      // Video width
	INT height;	  // Video is high
	INT colorbits;  // The number of color bits is invalid here, only for internal use
	INT framerate;  // Reference frame rate
	INT bitrate;    // Reference bitrate
	BYTE vol_data[256];// Extended parameters, the necessary data decoding
	INT vol_length;    // Extended parameter length
}VIDEO_PARAM;

typedef struct 
{
	CHAR codec[256];	// Audio type, AAC or G711
	INT samplerate;	// Reference sample rate
	INT bitspersample; // Reference bit rate
	INT channels;		// Number of channels
	INT framerate;	
	INT bitrate;
}AUDIO_PARAM;
dwBufSize:Media Data Length
pExtData:Extended parameters,When dwDataType = 0,1, the structure and its meaning is,
typedef struct
{
	int		bIsKey;// Whether the key frame
	double	timestamp;// timestamp
	void    *pUserData;// User data pointer, this is the function pUser set pointer
}FRAME_EXTDATA,* LPFRAME_EXTDATA;
When dwDataType = 2, this pointer is empty
	pUser:Connection-related parameters, the structure is defined as:
typedef struct
{
		int  nVideoPort;// Connect the video port
		int  bIsTcp;// Whether to use a TCP connection
		int  nVideoChannle;// The video channel is a 32-bit integer, and a high 16 indicates the device type: 0 for IPC, 1 for DVS, and 2 for NVR.							
// IPC:The lower 16 bits represent. 0 indicates the main stream, and 1 indicates the sub-stream
//DVS:The lower 16 bits represent DVS device channels, which can be 0, 1, 2, 3, 4, representing channel 1, 2, 3, 4, and CIF outputs, respectively.                     
//NVR :The upper 8 bits of the lower 16 bits indicate the stream type: 0 indicates the main stream, 1 indicates the sub-stream, and the lower 8 bits of the lower 16 bits indicate the channel number of the device, which can be 0-32.
		void *pUserData;// The user pointer, used as the last parameter for the callback
}USRE_VIDEOINFO,* LPUSRE_VIDEOINFO;
iStreamType:Request stream type, 0: Primary stream, 1: Sub-stream.
int  nVideoPort;// Connect the video port
int  bIsTcp;// Whether to use a TCP connection
void *pUserData;// The user pointer, used as the last parameter for the callback
bBlocked:Leave the parameters for compatibility

Return:
	0 means fail, otherwise return unqiue indentifier

AJ_NETSDK_IPC_SetRealDataCallBack (callback function for receiveing stream)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_SetRealDataCallBack(fRealDataCallBack cbRealDataCallBack, void *pUser);

Feature:
	Set callback function for receiving media stream,take effect when callback function pass in Null.
Parameter:
	cbRealDataCallBack: //callback function for receiving stream
				Prototype: typedef LONG(CALLBACK *fRealDataCallBack)(LONG lRealHandle,DWORD dwDataType,BYTE *pBuffer,DWORD dwBufSize,LPFRAME_EXTDATA  pExtData);
				Meaning:
lRealHandle // mark up video, the return value of this function
dwDataType=0 means video, 1 means audio, 2 means decoding parameter
pBuffer //media data pointer
when dwDataType= 2, pBuffer structure and its significance for the body 
typedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	//==AV_FALG
	short  bHaveVideo;//0 means no video parameter
	short  bHaveAudio;//0 means no audio parameter
	VIDEO_PARAM videoParam;//video parameter
	AUDIO_PARAM audioParam;//audio parameter
}STREAM_AV_PARAM;
inside: 
typedef struct 
{
	CHAR codec[256];//H264 or MPEG4, etc, means current vido encoding type
	INT width;      //video width
	INT height;	  //video height
	INT colorbits;  //color bit, invalid here, only use for internal
	INT framerate;  //referance frame rate
	INT bitrate;    //referance bit rate
	BYTE vol_data[256];//extension parameter,necessary data for decoding
	INT vol_length;    //extension parameter length
}VIDEO_PARAM;

typedef struct 
{
	CHAR codec[256];	//audio type,AAC or G711
	INT samplerate;	//referance bit rate
	INT bitspersample; //referance bit rate
	INT channels;		//audio channel quantity
	INT framerate;	
	INT bitrate;
}AUDIO_PARAM;
dwBufSize //media data length
pExtData //extended parameter, when dwDataType=2, this pointer is null, when dwDataType=0,1,struct body as follow:
typedef struct
{
	int		bIsKey;// whether it is key frame
	double	timestamp;// timestamp
	void    *pUserData;//user data pointer
}FRAME_EXTDATA,* LPFRAME_EXTDATA;
	pUser: only for user, used as parameter when received media data

Return:
	0 means success

Note:
	The function set up callback will take effect when incoming callback function of request flow return NULL,regard as all the channels' default callback function. If each incoming callback function of request flow return non-empty,this function can be not called.



AJ_NETSDK_IPC_StopAllRealPlay (stop all media stream)
Function
LONG		__stdcall		AJ_NETSDK_IPC_StopAllRealPlay();
Feature
Stop all stream
Parameter:
	none
Return:
	0 means success
Note:
	Call the function for stopping all media stream


AJ_NETSDK_IPC_StopRealPlay (stop receiving stream)
Function
LONG		__stdcall		AJ_NETSDK_IPC_StopRealPlay(LONG lRealHandle);
Feature:
	Stop receiving stream
Parameter:
	lRealHandle: return non-zero after call AJ_NETSDK_IPC_RealPlayEx or AJ_NETSDK_IPC_RealPlay
Return:
	0 means success
	ERR_NOT_FIND_STREAM: handle error
Note:
	It does not return until the thread of receiving stream end, it will take a lot of time less than 100 millisecond.

AJ_NETSDK_IPC_GetVideoParam (get video parameter)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetVideoParam(LONG  lRealHandle,VIDEO_PARAM *pParam);
Feature:
	Get video parameter structure of video stream
Parameter:
	lRealHandle: is non-zero return from AJ_NETSDK_IPC_RealPlayEx or AJ_NETSDK_IPC_RealPlay
	pParam: video parameter output
Return:
	0 means success
	ERR_NOT_FIND_STREAM: can not find the stream handle	
Note:
	It only take effect when login successfully and EVENT_RECVAUDIOPARAM is called.
	VIDEO_PARAM 
typedef struct 
{
	CHAR codec[256]; //H264 or MPEG4, etc, means current vido encoding type
	INT width; //video width
	INT height; //video height
	INT colorbits; //color bit, invalid here, only use for internal
	INT framerate; //referance frame rate
	INT bitrate; //referance bit rate
	BYTE vol_data[256]; //extension parameter,necessary data for decoding
	INT vol_length; //extension parameter length
}VIDEO_PARAM;


AJ_NETSDK_IPC_GetAudioParam (get audio parameter)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetAudioParam(LONG lRealHandle,AUDIO_PARAM *pParam);
Feature:
	Get audio parameter of video stream
Parameter:
	lRealHandle: is non-zero return from AJ_NETSDK_IPC_RealPlayEx or AJ_NETSDK_IPC_RealPlay
	pParam: audio parameter output
Return:
	0 means sucess
	ERR_NOT_FIND_STREAM: can not find stream handle
Note:
	It only take effect when login successfully and EVENT_RECVVIDEOPARAM is called

	AUDIO_PARAM
typedef struct 
{
	CHAR codec[256]; //audio type,AAC or G711
	INT samplerate; //referance bit rate
	INT bitspersample; //referance bit rate
	INT channels; //audio channel quantity
	INT framerate;
	INT bitrate;
}AUDIO_PARAM;



AJ_NETSDK_IPC_GetFileByName (download file)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetFileByName(LONG lUserID,LONG nFileType,char *sDVRFileName,char *sSavedFileName);
Feature:
	Download specified file
Parameter:
	lUserID: the return value for login device
	nFileType: downloaded file type, 0 means log file, 1 means record file
	sDVRFileName: downloaded file name
	sSavedFileName: file name saved in local
Return:
	0: means it has already submit download task, and call AJ_NETSDK_IPC_GetDownloadPos for query, status callbcak function will return message for downloading success or not
	ERR_NOT_FIND_DEVICE: handle error
	ERR_PARAM_ERROR: means sDVRFileName or sSavedFileName is null
	ERR_DEV_NOT_CONNECTED: device is disconnect
	ERR_DEV_NOT_LOGIN: device login failed
	ERR_ISUPLOADING_ERROR: uploading
	ERR_ISDOWNLOADING_ERROR: downloading
	ERR_IS_STARTAUDIO_ERROR: can not download while voice talk
Note:
	1. only can upload or download a file of the same device
	2. return 0, then it will receive status from callback function as following:
		EVENT_DOWNLOADOK=16,	//download compeletely 
		EVENT_DOWNLOADFAILED,	//download failed


AJ_NETSDK_IPC_StopGetFile (stop downloading)
Function
LONG		__stdcall		AJ_NETSDK_IPC_StopGetFile(LONG lUserID);
Feature:
	Stop downloading file
Parameter:
	lUserID: a return value 
Return:
	0: means success
	ERR_NOT_FIND_DEVICE: handl error	
	ERR_ISFINISH_ERROR: means download competely or does not download

AJ_NETSDK_IPC_GetDownloadPos (get download progress)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetDownloadPos(LONG lUserID);
Feature:
	Get download progress
Parameter
	lUserID: a return value
Return:
	101: download compeletely
	ERR_NOT_DOWNLOAD_MODE_ERROR: does not download
Greater than or equal 0: the current download progress

AJ_NETSDK_IPC_PTZControl (basic PTZ)
Function
LONG		__stdcall		AJ_NETSDK_IPC_PTZControl(LONG lUser,DWORD dwPTZCommand,DWORD nTspeed,DWORD nPpeed);
Feature:
	Basic PTZ control
parameter
	lUserID: a return value
	dwPTZCommand: //PTZ type
enum PTZ_CMD_TYPE
{
	LIGHT_PWRON=2,// 2 power on for light
	WIPER_PWRON,// 3 siwtch on for wipers
	FAN_PWRON,// 4 siwtch on for fan
	HEATER_PWRON,// 5 siwtch on for heater
	AUX_PWRON1,// 6 siwtch on for auxiliary device 
	AUX_PWRON2,// 7 siwtch on for auxiliary device
	ZOOM_IN= 11,// zoom in 
	ZOOM_OUT, //12 zoom out 
	FOCUS_NEAR, //13 focus -
	FOCUS_FAR, //14 focus +
	IRIS_OPEN, //15 iris +
	IRIS_CLOSE,// 16 iris -
	TILT_UP,// 21 up
	TILT_DOWN, //22  down
	PAN_LEFT,// 23 left
	PAN_RIGHT,// 24 right
	UP_LEFT,// 25 up and left
	UP_RIGHT,// 26 up and right
	DOWN_LEFT, //27 down and left
	DOWN_RIGHT,// 28 down and right
	PAN_AUTO,// 29 scan
	STOPACTION// 30 stop
};
nTspeed: horizontal speed,value is from 1 to 10
nPpeed: vertical speed,value is from 1 to 10
Return:
	0 means success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_PTZCMD_ACTION_ERROR: PTZ command error
	ERR_OUTOFF_MEMORY: out of memory
	
Note:
	0 means the command has already added in sending queue, then EVENT_SENDPTZOK and EVENT_SENDPTZFAILED will return message for send successfully or not.
AJ_NETSDK_IPC_PTZPreset (preset)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_PTZPreset(LONG lUser,DWORD dwPTZPresetCmd,DWORD dwPresetIndex);
Feature:
	Basic operation of presets
Parameter
	lUserID: a return value
	dwPTZPresetCmd: operation type
enum PTZ_PRESET_TYPE
{
	SET_PRESET= 8 ,//set
	CLE_PRESET= 9,//delete
	GOTO_PRESET= 39//query
};
	dwPresetIndex:preset number from 0 to 255
Return:
	0 means success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory
	ERR_PTZCMD_ACTION_ERROR: dwPTZPresetCmd error
	ERR_PARAM_ERROR: dwPresetIndex error
	
Note:
	0 means the command has already added in sending queue, then EVENT_SENDPTZOK and EVENT_SENDPTZFAILED will return message for send successfully or not.

AJ_NETSDK_IPC_PTZControlEx (PTZ expansion interface, 485 transparent transmission)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_PTZControlEx(LONG lUser,char *pXml);
Feature:
	
Parameter:
	lUserID: a return value
	pXml: a XML format for PTZ, please refer to schedule 1 for more information, if it is 485 transparent transmission,turn the byte to hexadecimal string to call
Return:
	0: success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory
	ERR_PARAM_ERROR: pXml is null

Note:
	0 means the command has already added in sending queue, then EVENT_SENDPTZOK and EVENT_SENDPTZFAILED will return message for you to judge whether send successfully.
AJ_NETSDK_IPC_StartVoiceCom (voice talk)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_StartVoiceCom(LONG lUserID,DWORD dwVoiceChan,BOOL bNeedCBNoEncData,fVoiceDataCallBack cbVoiceDataCallBack,void *pUser);
Feature:
	Start voice talking
Parameter:
	lUserID: a return value
	dwVoiceChan: save for compatibility, pass in 0
	bNeedCBNoEncData: save for compatibility, pass in 1
	cbVoiceDataCallBack: save for compatibility, pass in null
	pUser: save for compatibility, pass in null

Return:
	0: success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_IS_STARTAUDIO_ERROR: the device is voice talking
	ERR_DEV_NOT_CONNECTED: disconnect devcie
	ERR_DEV_NOT_LOGIN: logged failed

Note:
	Call the function and return success only tell you it has already requested to device and also you need to wait for response form callback function
	EVENT_STARTAUDIOOK=6,// start voice talkback successfully
	EVENT_STARTAUDIOFAILED=7,// start voice talkback failed
EVENT_STARTAUDIO_ISBUSY // voice talkback is occuiped 
EVENT_STARTAUDIO_PARAMERROR // voice talkback is unavaiable
EVENT_STARTAUDIO_AUDIODDISABLED // not support voice talkback

Note:
	It only start voice talkback after call the function, you also need to use AJ_NETSDK_IPC_StartTalk for initializing audio capture and AJ_NETSDK_IPC_AddTalk to add the devie to broadcast list, then voice talk is available 


AJ_NETSDK_IPC_StopVoiceCom (stop voice talkback)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_StopVoiceCom(LONG lVoiceComHandle);
Feature:
	Stop voice talkback
Parameter:
	lUserID: a return value
Return:
	0: success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_AUDIO_NOT_START: does not in voice talkback state

Note:
	Return 0 and also need to wait two status from callback function as following to judge whether stop successfully.
	EVENT_STOPAUDIOOK,
	EVENT_STOPAUDIOFAILED,

AJ_NETSDK_IPC_FormatDisk (format storage)
Function
LONG		__stdcall		AJ_NETSDK_IPC_FormatDisk(LONG lUserID,LONG lDiskNumber);
Feature:
	Format storage device
Parameter:
	lUserID: return value
	lDiskNumber: 0 is sd1,1 is sd2,2 is USB
Return:
	0 means success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

Note:
	There is a callback message whose type is 1017 from auxiliary channel callback function, return 0 means the command has already added to the queue. If flag=0 return to XML means success.


AJ_NETSDK_IPC_Upgrade (upgrade)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_Upgrade(LONG lUserID,char *sFileName);
Feature:
	
Parameter:
	lUserID: return value
	sFileName: an absolute path for saving firmware
Return:
	0 means request successfully
	ERR_NOT_FIND_DEVICE: handle error
	ERR_LOC_FILE_ERROR: sFileName error
	ERR_ISDOWNLOADING_ERROR: can not upgrade when downloading
ERR_ISUPLOADING_ERROR: can not upgrade when uploading
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

Note:
	1. Return 0 means the command has already added to the queue
	2. If receive ID=EVENT_UPLOADFAILED from StateEventCallBack function means upload file failed
	3. If receive ID=EVENT_UPLOADOK from StateEventCallBack function means upload file successfully.
	  4. Upload compeletely then it will reboot. If upgrade successfully then the version is not same with the previous version


AJ_NETSDK_IPC_GetUpgradeProgress (obtain progress of upgrading)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetUpgradeProgress(LONG lUserID);
Feature:
	Obtain progress of upgrading
Parameter:
	lUserID: return value
Return:
	ERR_NOT_FIND_DEVICE: handle error
	ERR_LOC_FILE_ERROR: sFileName error
	Return 101 means does not upgrade or upgrade finish
	Return number less than 0 means upgrade failed
Note:
	Positive number is effect; negative number is not effect.

AJ_NETSDK_IPC_GetUpgradeState (obtain upgrading status)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetUpgradeState(LONG lUserID);
Feature:
	Obtain upgrading status
Parameter:
	lUserID: return value
Return:
	0: upgrading
	ERR_NOT_FIND_DEVICE: can not find device
	101: upgrade compeletely 
	Negative number: no in upgrade mode

AJ_NETSDK_IPC_CloseUpgradeHandle (stop upgrading)
Function
LONG		__stdcall		AJ_NETSDK_IPC_CloseUpgradeHandle(LONG lUserID);
Feature:
	Stop upgrading
Parameter:
	lUserID: return value
Return:
	0: means success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_ISFINISH_ERROR: upload compeletely but does not start to upgrade	

AJ_NETSDK_IPC_FindDVRLogFile (query log)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_FindDVRLogFile(LONG lUserID);
Feature:
	Query log
Parameter:
	lUserID: return value
Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

Note:
	It will return a number of CMD_GET_LOGFILE_LIST(1025) from AJ_NETSDK_IPC_SetAUXResponseCallBack


AJ_NETSDK_IPC_RestoreConfig (restore configuration)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_RestoreConfig(LONG lUserID);
Feature:
	Restore configuration
Parameter:
	lUserID: return value
Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

AJ_NETSDK_IPC_GetConfigFile (dowload configuration file)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetConfigFile(LONG lUserID,char *sFileName);
Feature
	Download configuration file
Parameter:
	lUserID: return value
Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory


AJ_NETSDK_IPC_SetConfigFile (upload and replace configuration file)
Function
LONG		__stdcall		AJ_NETSDK_IPC_SetConfigFile(LONG lUserID,char *sFileName);
Feature
	Upload and replace configuration file
Parameter:
	lUserID: return value
Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

AJ_NETSDK_IPC_RebootDVR (reboot)
Function
LONG		__stdcall		AJ_NETSDK_IPC_RebootDVR(LONG lUserID);
Feature:
	Reboot
Parameter:
	lUserID: return value
Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory


AJ_NETSDK_IPC_GetDVRConfig (configuration)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetDVRConfig(LONG lUserID,DWORD dwCommand,LONG lChannel,LPVOID lpOutBuffer,DWORD dwOutBufferSize,LPDWORD lpBytesReturned);
Feature
	Obtain device configuration
Parameter:
	lUserID: return value
	dwCommand: configuration information, please refer to schedule2 
	lChannel: save for compatibility, pass in 0
	lpOutBuffer: save for compatibility, pass in null
	dwOutBufferSize: save for compatibility, pass in 0
	lpBytesReturned: save for compatibility, pass in 0

Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

Note:
	If error flag bit is 0 means success, the message type is the same with dwCommand.

AJ_NETSDK_IPC_SetDVRConfig (set configuration)
Function
LONG		__stdcall		AJ_NETSDK_IPC_SetDVRConfig(LONG lUserID,DWORD dwCommand,LONG lChannel,LPVOID pXml,DWORD dwInBufferSize);
Feature:
	Set configuration
Parameter:
	lUserID: return value
	dwCommand: configuration information, please refer to schedule2 
	lChannel: save for compatibility, pass 0
	pXml: configure XML content
	dwInBufferSize: length of content, strlen(pXml)

Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

Note:
	If error flag bit is 0 means success, the message type is the same with dwCommand.

AJ_NETSDK_IPC_SystemControl (system control)
Function
LONG		__stdcall		AJ_NETSDK_IPC_SystemControl(LONG lUserIDDWORD dwCommand ,LONG flag,char * pXml);
Feature
	Advanced control
Parameter:
	lUserID: return value
	dwCommand: configuration relevant information, please refer to schedule2
	flag: pass in 0
	pXml: configure relevant XML content
Return:
	0: means success
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory

Note:
	If error flag bit is 0 means success, the message type is the same with dwCommand.


AJ_NETSDK_IPC_GetDeviceAbility (obtain device ability)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetDeviceAbility(LONG lUserID);
Feature:
	Obtain configuration parameter, it will return from auxiliary channel function after reading successfully
Parameter:
	lUserID: return value
Return:
	0: means success
	RR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory


Note:
	If error flag bit is 0 means success, and type of message is 1020, content of XML:

<RESPONSE_PARAM SystemConfigString=" + audio_support + schedule_record + ftpemail_storage + picture_capture + ptz_control + gpio_input + gpio_output + zh_cn + en_us + zh_tw + front_replay + media_capabiltiy" />

audio_support 		// support audio
schedule_record 		// schedule record
ftpemail_storage 		// support ftp and email
picture_capture 		// support capture
ptz_control 			// support PTZ
gpio_input 			// support IO input
gpio_output 			// support IO output
zh_cn 				// support simplified Chinese
en_us 				// support English
zh_tw 				// support traditional Chinese
front_replay 			// support front-end playback online
media_capabiltiy		// resolution
wireless_accesspoint	// support WIFI as client
wireless_station		// support WIFI as server
network_storage		// support network storage
ptz_action			// support PTZ linkage
ircut_setting			// support IRCUT
evdo_support			// support EVDO 3G
	wcdma_support			// support WCDMA 3G
	tdscdma_support		// support TDSCDMA 3G


AJ_NETSDK_IPC_GetReplayAblity (front-end playback online) 
Function:

LONG		__stdcall		AJ_NETSDK_IPC_GetReplayAblity(LONG lUserID);

Parameter:
	lUserID: return value

Return:
	ERR_NOT_FIND_DEVICE: handle error
	Return -1: unknown status, call AJ_NETSDK_IPC_GetDeviceAbility for viewing
	0: front-end playback online is unavailable
	1: front-end playback online is available



AJ_NETSDK_IPC_ControlPlay (control front-end playback)
Function
LONG		__stdcall		AJ_NETSDK_IPC_ControlPlay(LONG lUserID,LONG Action,LONG param);

Feature:
	Control front-end playback

Parameter
	lUserID: the return handle
	Action: 
enum REPLAY_IPC_ACTION
{
ACTION_PLAY=0,// play
ACTION_PAUSE,// pause
ACTION_RESUME,// re-play
ACTION_FAST,// fast forward
ACTION_SLOW,// slow
ACTION_SEEK,// seek
ACTION_FRAMESKIP,// single frame
ACTION_STOP,// stop
};

	Param: (control parameter)
		ACTION_FAST, ACTION_SLOW means playback speed
		ACTION_SEEK means playback time

Return:
	0 means success
	ERR_NOT_REPLAY_MODE_ERROR: not in playback mode
	ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect devie
	ERR_DEV_NOT_LOGIN: logged failed
	ERR_OUTOFF_MEMORY: out of memory
ERR_PLAY_ACTION_ERROR: Action error


AJ_NETSDK_IPC_SetReplayDataCallBack (front-end playback callback function)
Function
LONG		__stdcall		AJ_NETSDK_IPC_SetReplayDataCallBack(LONG lUserID,fRealDataCallBack cbRealDataCallBack,DWORD dwUser);
Feature:
	Set front-end playback callback function 

Parameter
	lUserID: return handle
cbRealDataCallBack: //callback function for received stream
				function: typedef LONG(CALLBACK *fRealDataCallBack)(LONG lRealHandle,DWORD dwDataType,BYTE *pBuffer,DWORD dwBufSize,LPFRAME_EXTDATA  pExtData);
				Meaning:
lRealHandle //a return value of the function
dwDataType=0 is video, 1 is audio, 2 is decoding parameter
pBuffer  //media data pointer
when dwDataType= 2, pBuffer structure and its significance for the body 
typedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	//==AV_FALG
	short  bHaveVideo;//0 means no video parameter
	short  bHaveAudio;//0 means no audio parameter
	VIDEO_PARAM videoParam;//video parameter
	AUDIO_PARAM audioParam;//audio parameter
}STREAM_AV_PARAM;
inside: 
typedef struct 
{
	CHAR codec[256];//H264 or MPEG4, etc, means current vido encoding type
	INT width;      //video width
	INT height;	  //video height
	INT colorbits;  //color bit, invalid here, only use for internal
	INT framerate;  //referance frame rate
	INT bitrate;    //referance bit rate
	BYTE vol_data[256];//extension parameter,necessary data for decoding
	INT vol_length;    //extension parameter length
}VIDEO_PARAM;

typedef struct 
{
	CHAR codec[256];	//audio type,AAC or G711
	INT samplerate;	//referance bit rate
	INT bitspersample; //referance bit rate
	INT channels;		//audio channel quantity
	INT framerate;	
	INT bitrate;
}AUDIO_PARAM;
dwBufSize  //media data length
pExtData  //expansion parameter, when dwDataType=2,this pointer is null, when dwDataType=0,1, structure body and its significance as follow:
typedef struct
{
	int		bIsKey; // whether it is key frame
	double	timestamp;// time stamp
	void    *pUserData;// data pointer
}FRAME_EXTDATA,* LPFRAME_EXTDATA;	

Return:
	0 means success

AJ_NETSDK_IPC_PlayDeviceFile (play front-end file)
Function
LONG		__stdcall		AJ_NETSDK_IPC_PlayDeviceFile(LONG lUserID,char * filenme);
Feature
	Play specific fron-end file
Parameter
	lUserID: return handle
	filenme: the file name need to be played

Return
	ERR_NOT_FIND_DEVICE: handle error
	ERR_NOT_ALLOW_REPLAY_ERROR: not support playback
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed
Note:
Before call the function, you need to know about whether front-end play is available and set playback stream callback function by AJ_NETSDK_IPC_SetReplayDataCallBack 



AJ_NETSDK_IPC_SetPlayActionEventCallBack (front-end playback callback)
Funtion:
	LONG		__stdcall		AJ_NETSDK_IPC_SetPlayActionEventCallBack(fPlayActionEventCallBack cbAcCallback,void * pUser);
Feature:
	Set up front-end playback file relevant event callback
Parameter:
	cbAcCallback: received stream callback function,archetype definiton:
typedef LONG(CALLBACK *fPlayActionEventCallBack)(LONG lUser,LONG nType,LONG nFlag,char * pData,void * pUser);
Parameter description:
lUser:control handle return for login
nType:callback event type,definiton as follow
	enum REPLAY_IPC_ACTION
{
ACTION_PLAY=0,//play
ACTION_PAUSE,//pause
ACTION_RESUME,//resume 
ACTION_FAST,//fast-forward
ACTION_SLOW,//slow
ACTION_SEEK,//skip
ACTION_FRAMESKIP,//single frame
ACTION_STOP,//stop
ACTION_CAPIMG=10,//capture
ACTION_CHANGE_SOUND,//change sound
ACTION_RECV_DECODEPARAM,//receive decoding parameter
};
		nFlag:0 means operate normal,others means error code.
		pData:relevant data.
		pUser:user pointer, called by AJ_NETSDK_IPC_SetPlayActionEventCallBack funtion for specify pUser.
pUser:user pointer,return pUser to user when callback.
Return value:
	0 means success
 not likely to return others.	
AJ_NETSDK_IPC_SetSearchStatusCallBack (search IPC callback function)

Funtion Archetype:
LONG		__stdcall		AJ_NETSDK_IPC_SetSearchStatusCallBack(SearchIPCCallBack fcallBack,void * pUser);

Feature:
	Set searching device state change callback function 
Parameter:
	fcallBack:callback function,definition archetype:		
typedef LONG(CALLBACK *SearchIPCCallBack)(LONG nEventCode,LONG index,IPC_ENTRY *pResponse,void *pUser);
callback funciton description:
nEventCode:update type,definition:
enum SEARCH_EVENT
{
	EVENT_SEARCH_RECV_NEWIPCINFO=1,// search IPC,find the new IPC
	EVENT_SEARCH_UPDATEINFO,//modify IPC address,address has been changed
};
Index:means device order
pResponse:updated status content
pUser: incoming user pointer wher call AJ_NETSDK_IPC_SetSearchStatusCallBack 
      pUser:user pointer,the last one parameter to user use for status callback	  

AJ_NETSDK_IPC_StartSearchIPC (start to search device)
Function
LONG		__stdcall		AJ_NETSDK_IPC_StartSearchIPC();
Feature
	Search devices in a same LAN

Parameter: null
Return:
	0 means success
	ERR_START_THREADERROR: start thread failed

Note:
1.	Call AJ_NETSDK_IPC_GetSerchIPCCount for add up the device number and call AJ_NETSDK_IPC_GetIPCInfoXML or AJ_NETSDK_IPC_GetIPCInfo for obtaining IPC information
	2.  The search time is more than 5 minutes because of using broadcast package.

AJ_NETSDK_IPC_StopSearchIPC (stop searching device)
Function
LONG		__stdcall		AJ_NETSDK_IPC_StopSearchIPC();

Parameter
	null

Return:
	0 means success
AJ_NETSDK_IPC_GetSearchIPCCount (obtain IPC number)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetSearchIPCCount ();

Parameter:
	null

Return:
	Return the count of IPC


AJ_NETSDK_IPC_GetIPCInfo (structure format of IPC information)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetIPCInfo(LONG index, IPC_ENTRY * pIPCInfo);

Feature:
	Obtain the index+1 IPC information

Parameter
	Index: the IPC number must be less than the number from AJ_NETSDK_IPC_GetSearchIPCCount(),device number begin from 0
	pIPCInfo:  // information saved pointer
 
#define MAX_IP_NAME_LEN 256
#define MAC_ADDRESS_LEN 256

typedef struct
{
	char  MACAddress[MAC_ADDRESS_LEN];	
	int	  dhcpEnable;
	char  IPAddress[MAX_IP_NAME_LEN];
	char  netMask[MAX_IP_NAME_LEN];
	char  gateWay[MAX_IP_NAME_LEN];
	char  DNS1[MAX_IP_NAME_LEN];
	char  DNS2[MAX_IP_NAME_LEN];
}LANConfig;

typedef struct
{
	int auth;
	int videoPort;
	int rtpoverrtsp;//added by johnnyling 20090323
	int ptzPort;
	int webPort;	
}StreamAccessConfig;

#define GROUP_NAME_MAX_LEN 32
#define ACCOUNT_STATUS_MAX_LEN 8
#define ACCOUNT_NAME_MAX_LEN 40
#define ACCOUNT_PASSWORD_MAX_LEN  40
#define MAX_ACCOUNT_COUNT 20

typedef struct
{
	char 	userName[ACCOUNT_NAME_MAX_LEN];
	char 	password[ACCOUNT_PASSWORD_MAX_LEN];
	char 	group[GROUP_NAME_MAX_LEN];
	char    status[ACCOUNT_STATUS_MAX_LEN];
}UserAccount;

typedef struct
{
	int count;
	UserAccount accounts[MAX_ACCOUNT_COUNT];
}UserConfig;

#define MAX_IPC_SERIALNUMBER	32
#define MAX_DEVICETYPE_LEN		32

typedef struct
{
	char				ipc_sn[MAX_IPC_SERIALNUMBER];
	char				deviceType[MAX_DEVICETYPE_LEN];
	UserConfig			userCfg;
	StreamAccessConfig	streamCfg;
	LANConfig			lanCfg;
}IPC_ENTRY;

Return
	0 means success
ERR_PARAM_ERROR: parameter error, may be pIPCInfo is empty or index is not a valid value


AJ_NETSDK_IPC_ModifyIPC (modify structure format of IPC information)
Function
LONG		__stdcall		AJ_NETSDK_IPC_ModifyIPC(LONG index, IPC_ENTRY * pIPCInfo);
Feature:
	Index: the IPC number must be less than the number from AJ_NETSDK_IPC_GetSearchIPCCount(), device number begin from 0

	pIPCInfo: //save pointer information
#define MAX_IP_NAME_LEN 256
#define MAC_ADDRESS_LEN 256

typedef struct
{
	char  MACAddress[MAC_ADDRESS_LEN];	
	int	  dhcpEnable;
	char  IPAddress[MAX_IP_NAME_LEN];
	char  netMask[MAX_IP_NAME_LEN];
	char  gateWay[MAX_IP_NAME_LEN];
	char  DNS1[MAX_IP_NAME_LEN];
	char  DNS2[MAX_IP_NAME_LEN];
}LANConfig;

typedef struct
{
	int auth;
	int videoPort;
	int rtpoverrtsp;//added by johnnyling 20090323
	int ptzPort;
	int webPort;	
}StreamAccessConfig;

#define GROUP_NAME_MAX_LEN 32
#define ACCOUNT_STATUS_MAX_LEN 8
#define ACCOUNT_NAME_MAX_LEN 40
#define ACCOUNT_PASSWORD_MAX_LEN  40
#define MAX_ACCOUNT_COUNT 20

typedef struct
{
	char 	userName[ACCOUNT_NAME_MAX_LEN];
	char 	password[ACCOUNT_PASSWORD_MAX_LEN];
	char 	group[GROUP_NAME_MAX_LEN];
	char    status[ACCOUNT_STATUS_MAX_LEN];
}UserAccount;

typedef struct
{
	int count;
	UserAccount accounts[MAX_ACCOUNT_COUNT];
}UserConfig;

#define MAX_IPC_SERIALNUMBER	32
#define MAX_DEVICETYPE_LEN		32

typedef struct
{
	char				ipc_sn[MAX_IPC_SERIALNUMBER];
	char				deviceType[MAX_DEVICETYPE_LEN];
	UserConfig			userCfg;
	StreamAccessConfig	streamCfg;
	LANConfig			lanCfg;
}IPC_ENTRY;

Return
	0 means success
ERR_PARAM_ERROR: parameter error, may be pIPCInfo is empty or index is not a valid value


Note:
1.Because of using broadcast packets to modify IPC information, we can only through keep searching to find devices.When find a new device, through the same serial number to judge relevant value, if relevant value consistent with the value we modified, it means modify IPC information successfully.
2.Permit to modify network parameter and server port,only LANConfig and StreamAccessConfig structure content can be modified,other modification is invalid.
	Function return success only means modified broadcast packet has been sent, modified operation successfully or not can be judged through IP is modified successfully or not after the EVENT_SEARCH_UPDATEINFO event which search callback function receive. User should set a certain time for timeout to estimate modify successfully or not,if callback exceed fixed time regard as IPC modification failure.


AJ_NETSDK_IPC_GetIPCInfoXML (obtain device information of XML format)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetIPCInfoXML(LONG index, char * pXMLInfo,int maxLen);

Parameter:
	Index: the IPC number must be less than the number from AJ_NETSDK_IPC_GetSearchIPCCount() and number count begin from 0
	pXMLInfo: information saved pointer
	maxLen: If pXMLInfo is not NULL, then it means the maximun available memory in byte of pXMLInfo 

Return:
	If pXMLInfo is NULL, then it will return the required length of XML
ERR_PARAM_ERROR: parameter error, maybe pIPCInfo is empty or index is not a valid value
	ERR_MEMORY_SIZE_ERROR: the required memory is more than maxLen
	ERR_OUTOFF_MEMORY: out of memory

Returned XML content example as follow:
	<IPC_INFO>
<IPC_SERIALNUMBER
SerialNumber="0000000000005971"    //device serial number
/>
<LANConfig
MacAddress="00:3e:71:22:ee:19"		//MAC address,ordinary don’t modify
DHCP="0"						//whether enable DHCP 
IPAddress="192.168.88.151"		//IP address
Netmask="255.255.255.0"			//subnet mask
Gateway="192.168.88.1"			//gateway address
DNS1="202.96.128.86"				//host DNS
DNS2="202.96.134.133"			//reserved DNS
/>

<MediaStreamConfig>
<StreamAccess
Auth="1"					//whether enable authentication 
VideoPort="554"				//video stream port
RTPOverRTSP="1"			//whether TCP is used when IPC access video
PTZPort="8091"				//auxiliary channel port
WEBPort="8080"				//access port of WEB configuration interface 
/>
</MediaStreamConfig>

<UserConfig>
<Account	
Username="admin"			//login username
Password="123456"		//login password
Group="Administrator"	//user classification: Administrator means administrator, Operator means operator, Viewer means viewer
Status="Enable"		//account status, when status is Enable account can be used, Disable means user account is locked
/>
<Account	
Username="test"			//login username
Password="123456"		//login password
Group="Operator"			// user classification: Administrator means administrator, Operator means operator, Viewer means viewer
Status="Enable"		// account status, when status is Enable means user account can be used, Disable means user account is locked
/>
</UserConfig>
</IPC_INFO>


AJ_NETSDK_IPC_ModifyIPCXML (modify IP address XML format)
Function
LONG		__stdcall		AJ_NETSDK_IPC_ModifyIPCXML(LONG index, const char * strXML);

Parameter
	Index: the IPC number must be less than the number from AJ_NETSDK_IPC_GetSearchIPCCount() and number count begin from 0
	strXML: configuration inforamtion,corresponding format:
<IPC_INFO>
<LANConfig
MacAddress="00:3e:71:22:ee:19"		//MAC address,ordinary don’t modify
DHCP="0"						//whether enable DHCP 
IPAddress="192.168.88.151"		//IP address
Netmask="255.255.255.0"			//subnet mask
Gateway="192.168.88.1"			//gateway address
DNS1="202.96.128.86"				//host DNS
DNS2="202.96.134.133"			//reserved DNS
/>
<MediaStreamConfig>
<StreamAccess
Auth="1"					//whether enable authentication
VideoPort="554"				//video stream port
RTPOverRTSP="1"			//choose TCP or not when IPC access video
PTZPort="8091"				//auxiliary channel port
WEBPort="8080"				//access port of WEB configuration interface
/>
</MediaStreamConfig>
</IPC_INFO>
	Include at least one of LANConfig or StreamAccess inside. 

	
Return”
	0 means success
ERR_PARAM_ERROR: parameter error, maybe pIPCInfo is empty or index is not a valid value
	ERR_MEMORY_SIZE_ERROR: the required memory is more than maxLen
	ERR_OUTOFF_MEMORY: out of memory
ERR_XML_FORMAT_ERROR: strXML format error
ERR_CREATE_SOCKET_ERROR: create Socket failed
ERR_SEND_MODIFYCMD_ERROR: send failed

Note:
	Function return success only means modified broadcast packet has been sent, modified operation successfully or not can be judged through IP is modified successfully or not after the EVENT_SEARCH_UPDATEINFO event which search callback function receive. User should set a certain time for timeout to estimate modify success or not,if callback exceed fixed time regard as IPC modification failure.

AJ_NETSDK_IPC_GetOneIPAddress (obatain a avaiable IP address)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetOneIPAddress(char * strResult,int nSize);

Parameter
	strResult: location to save the IP address
	nSize: memory address, 33-bit 

Return:

	ERR_MEMORY_SIZE_ERROR: the required memory is more than nSize
	If strResult=NULL, then return 33, otherwise return the actual bit number

AJ_NETSDK_IPC_GetNetworkParam (obtain network configuration)
Function
LONG		__stdcall		AJ_NETSDK_IPC_GetNetworkParam(ULONG nParamIndex, char * strResult,int nSize);

Parameter
	nParamIndex: the type of parameter to be read
	meaning:
enum
{
	NETWORK_PARAM_IPADDRESS=0,// obtain IP address
	NETWORK_PARAM_NETMASK,// obtain netmask
	NETWORK_PARAM_GATEWAY,// obtain gateway
	NETWORK_PARAM_DNS1,// obtain main DNS
	NETWORK_PARAM_DNS2,// obtain auxiliary DNS
	NETWORK_PARAM_MAX// end flag(no use)
};
	strResult: save poiter
	nSize: avaiable memory size, generally more than 32(make sure success, don’t be less than 16)
Return
	0 means success
	ERR_PARAM_ERROR: nParamIndex parameter error
	ERR_MEMORY_SIZE_ERROR: the actual memory more than nSize



AJ_NETSDK_IPC_StartTalk (initialize broadcast parameter)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_StartTalk(int talkMode, int audiotype, int samplerate, int bitspersample, int channels); 


Parameter:
talkMode: Indicates intercom mode, 0 means local acquisition of audio, 1 means that the input of custom audio data.
	audiotype:means audio type,1 means AAC,0 means G711
	samplerate:sampling rate,AAC generally as 16000,G711 generally as 8000(parameter can look in samplerate of AUDIO_PARM parameter)
	bitspersample:generally as 16(parameter can look in bitspersample of AUDIO_PARM parameter)
	channels:voice channel,AAC generally as 2,G711 generally 1(parameter can look in channels of AUDIO_PARM parameter)
	
typedef struct 
{
	char codec[256];
	int samplerate;
	int bitspersample;
	int channels;
	int framerate;
	int bitrate;
}AUDIO_PARAM;

Return:
	0 means success 
	ERR_OPEN_AUDIOCAPTURE_FAIL: device opens audio capture failure,may be sound card capture is occupied.
ERR_START_AUDIOCAPTURE_FAIL:starts audio capture failure ,may be parameter is wrong.

Note:
	If current talkback has been started, first to close current talkback and reuse the specific parameter to start talkback.
	Example:
G711 talkbalk call AJ_NETSDK_IPC_StartTalk(0,8000,16,1)
		AAC talkback call AJ_NETSDK_IPC_StartTalk(1,16000,16,2);( front-end IPC set up 16K)
	

AJ_NETSDK_IPC_StopTalk (release broadcast resource)
Function
LONG		__stdcall		AJ_NETSDK_IPC_StopTalk();

Parameter
	NUll
	
Return:
	0 means success
Note:
	If start broadcast then all voice talk would be stopped
AJ_NETSDK_IPC_InputAudioData Enter the custom PCM intercom audio data.
Function:
	LONG __stdcall AJ_NETSDK_IPC_InputAudioData(BYTE* pBuff, int len);
Parameter:
     pBuff:AudioData?
     Len:Data length?
Return:
0:means success?
Note:
First callAJ_NETSDK_IPC_StartTalk et the relevant parameters talkMode parameter data is 1..
And then calls AJ_NETSDK_IPC_AddTalk to add the device to the broadcast list?

AJ_NETSDK_IPC_AddTalk (add device for broadcast)
Function
LONG		__stdcall		AJ_NETSDK_IPC_AddTalk(LONG lUserID);

Parameter
	lUserID: the return handle	
Return:
0 means success
ERR_NOT_FIND_DEVICE: handle error
ERR_NOT_STARTTALK_MODE_ERROR: uninitialize broadcast parameter, please call AJ_NETSDK_IPC_StartTalk to set up corresponding parameter
ERR_AUDIO_PARAM_ERROR: the device does not start voice talk, please call AJ_NETSDK_IPC_StartVoiceCom to add the deivce for broadcast
ERR_NOT_STARTTALK_MODE_ERROR: uninitialize broadcast, please call AJ_NETSDK_IPC_StartTalk for initialzation.


Note:
Call AJ_NETSDK_IPC_StartVoiceCom to start voice talkback, if the parameter is the same with call AJ_NETSDK_IPC_StartTalk then add device for broadcast
If call this function error, please call AJ_NETSDK_IPC_StopVoiceCom to stop voice talk, otherwise after a while will automatically reconnect talkback and receive EVENT_STARTAUDIOOK event

 
AJ_NETSDK_IPC_RemoveTalk (stop specific voice talkback)
Function
LONG		__stdcall		AJ_NETSDK_IPC_RemoveTalk(LONG lUserID);

Parameter
	lUserID: the return flag
	
Return
	0 means success
ERR_NOT_FIND_DEVICE: hanlde error
	ERR_AUDIO_NOT_START: the device does not start voice talkback
	

AJ_NETSDK_IPC_CreateIFrame (create key frame)
Function:
	LONG		__stdcall		AJ_NETSDK_IPC_CreateIFrame(ULONG lUserId,int bIsSubStream);

Parameter:
	lUserID: the return flag
	bIsSubStream: 0 means main stream, 1 means sub stream

Return:
	0 means success
ERR_NOT_FIND_DEVICE: handle error
	ERR_DEV_NOT_CONNECTED: disconnect device
	ERR_DEV_NOT_LOGIN: logged failed

Note:
	The function does not judge whether request media stream

	
AJ_NETSDK_IPC_SetUserData (save user data)
Function:
	LONG		__stdcall		AJ_NETSDK_IPC_SetUserData(ULONG lUserId,char * pBuffer,int len);
	
Parameter
	lUserID: the return flag
	pBuffer: the data to be saved, must be string,for binary data or can’t be printed character must be %02d to change to string 
	len: data length

Return:
	0: success to join the queue, auxiliay channel callback function will return the result
	-1: pBuffer is NULL
	ERR_NOT_FIND_DEVICE: handle error
ERR_DEV_NOT_CONNECTED: disconnect device
ERR_DEV_NOT_LOGIN: logged failed
ERR_OUTOFF_MEMORY: out of memory
	
It will receive nType=1034 from AJ_NETSDK_IPC_SetAUXResponseCallBack callback function when success 

AJ_NETSDK_IPC_GetUserData (read saved data)
Function:
	LONG		__stdcall		AJ_NETSDK_IPC_GetUserData(ULONG lUserId,void * pOutBuffer,int* nInOutLen);
Parameter:
	lUserID: the return flag
	void * pOutBuffer: data saved location, if pOutBuffer=NULL then return immediately
	   int* nInOutLen: it is available size of pOutBuffer before called, it is actual size after called. If * nInOutLen<=0 then return immediately
Return:
	0 means success to add to queue
Note:
	After data reading successfully, it will receive a nType= CMD_GET_USER_DEV_DATA (1033) event from AJ_NETSDK_IPC_SetAUXResponseCallBack callback function,XML format :
	<RESPONSE_PARAM UserDevData="616263646566"/>,UserDevData is the result of user’s setting data %02x.in pratice,string per 2 bits converts by hexadecimal to turn into a character,for example: The transformed result of 616263646566 is abcdef; abcdef is the actual setting data.


AJ_NETSDK_IPC_StartRecord(Start Record)

Function:
LONG		__stdcall		AJ_NETSDK_IPC_StartRecord(LONG lRealHandle,const char * filePath,int nFileMaxSeconds,int nAllRecordMaxSeconds); 

Parameter:
	lRealHandle:request stream return. 
filePath:saved directory or filename,directory must be exist otherwise file can not be created,incoming absolutely path must be not exceed 512 bytes,if path is suffix as .avi or .AVI regard as create single file and nAllRecordMaxSeconds is invalid.
nFileMaxSeconds:means maximum video duration of single file,support to record 10 to 3600 seconds, video high definiton 1080P above parameter value should not bigger than 1800.
nAllRecordMaxSeconds: video record duration

Return:
	0:means success
	ERR_RECORD_FILEMAXSECONDS_ERROR:means parameter nFileMaxSeconds error,available value should be 10 to 1800
	ERR_RECORD_ALLRECORDSECONDS_ERROR:means parameter nAllRecordMaxSeconds error,must be bigger than 0
	ERR_NOT_FIND_STREAM:means corresponding video stream of lRealHandle has not been found 
	ERR_RECORD_ISRECORDING:means recoding, stop recoding first when you want to record a new video
ERR_RECORD_MEDIA_PARAM_ERROR:means video parameter error
ERR_RECORD_FILEPATH_ERROR:means filePath error,filepath is null or less than 2 characters

Note:
1.Incoming file must be exist,otherwise cannot record.
2.When recording it will create current date for directory name on the directory you set up,fromat as 2012-03-11.
3.video file name will automatically generated by record time,format as 155301-av-2.avi,155302-vv-1.avi,front of six bits for time,middle position av means it has audio,vv means no audio,1 means mainstream,2 means substream.
4.Start recording when hard disk space available bigger than 2G,otherwise it will receive a EVENT_RECORD_DISKFREESPACE_TOOLOW event.
5.When video high definition 1080P,nFileMaxSeconds suggest to set up less than 1800.
6.If name suffix as .avi or .AVI,regard as create single file,nAllRecordMaxSeconds invalid.Internal will force to set it as nFileMaxSeconds to video single file.

Event may be received:
	EVNET_RECORD_FILEBEGIN,//begin to record a file 
	EVENT_RECORD_FILEEND,//finish recording a file
	EVENT_RECORD_TASKEND,//finish all video,video will stop
EVENT_RECORD_DISKFREESPACE_TOOLOW,//hard disk space avaiable too small,will not begin to video and wait for enough space
EVENT_RECORD_MEDIA_PARAM_ERROR,//video parameter error,request video stream may be failure EVENT_RECORD_INITAVIHEAD_ERROR,//write file head error
EVNET_RECORD_FILEBEGIN_ERROR,//create file error
EVNET_RECORD_WRITE_FILE_ERROR,	//write file error


AJ_NETSDK_IPC_StopRecord(stop Record)

Function:
LONG		__stdcall		AJ_NETSDK_IPC_StopRecord(LONG lRealHandle);

Parameter:
	lRealHandle:request stream return

Return:
	0: means success
	ERR_NOT_FIND_STREAM:lRealHandle handle not found
	ERR_RECORD_NOTRUNNING:this stream not in the video or has been stopped


AJ_NETSDK_IPC_GetLastErrorCode(get and eliminate error code)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_GetLastErrorCode(int nType);
Parameter:
	nType:invalid at present,fixed set it’s value 1,use for extension 
Return:
	Non-zero means error code
	0:means no error
Note:
1.Incoming file must be exist,otherwise cannot record.
2.When recording it will create current date for directory name on the directory you setup,fromat as 2012-03-11.
3.video file name will automatically generated by record time,format as 155301-av-2.avi,155302-vv-1.avi,front of six bits for time,middle position av means it has audio,vv means it has not audio,1 means mainstream,2 means substream.
4.Start recording when hard disk space available bigger than 2G,otherwise it will receive a EVENT_RECORD_DISKFREESPACE_TOOLOW event.
5.For high definition 1080P video,nFileMaxSeconds value suggest to set less than 1800
6.If name suffix as .avi or .AVI,regard as create single file,nAllRecordMaxSeconds invalid. Internal will force to set it as nFileMaxSeconds to video single file.


AJ_NETSDK_IPC_StartRecordStream(enable stream mode record)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_StartRecordStream(STREAM_AV_PARAM * pAvParam,const char * filePath,int nFileMaxSeconds,int nAllRecordMaxSeconds);
Parameter:
	pAvParam:video and audio parameter,this parameter can get in EVENT_RECVVIDEOAUDIOPARAM event callback,specific structure:
typedef struct 
{
	char codec[256];
	int width;
	int height;
	int colorbits;
	int framerate;
	int bitrate;
	BYTE vol_data[256];
	int vol_length;
}VIDEO_PARAM;

typedef struct 
{
	char codec[256];
	int samplerate;
	int bitspersample;
	int channels;
	int framerate;
	int bitrate;
}AUDIO_PARAM; 
typedef struct  __STREAM_AV_PARAM
{
	unsigned char	ProtocolName[32];	//set at H264
	short  bHaveVideo;//0 means no video parameter
	short  bHaveAudio;//0 means no audio parameter
	VIDEO_PARAM videoParam;//video parameter
	AUDIO_PARAM audioParam;//audio parameter
}STREAM_AV_PARAM; 
filePath:saved directory or filename,directory must be exist otherwise file cannot be created,should not exceed 512 characters, if directory name is suffix as .avi or .AVI regard as create single file. 
nFileMaxSeconds:maximum record duration for single file, record time from 10 to 1800 seconds.
nAllRecordMaxSeconds:total sum of record duration 
Return:
	0:means failure, call AJ_NETSDK_IPC_GetLastErrorCode(1) to get error code after return failure
	Return stream control handle when success

Note:
If name suffix as .avi or .AVI, regard as create single file,nAllRecordMaxSeconds invalid here.Internal will force to set it as nFileMaxSeconds to video single file.

Event may be received in status callback function:
	EVNET_RECORD_FILEBEGIN,//begin to record a file
	EVENT_RECORD_FILEEND,//finish recording a file
	EVENT_RECORD_TASKEND,//finish all record, stop recording
EVENT_RECORD_DISKFREESPACE_TOOLOW,// hard disk space avaiable too small,will not begin to record and wait for enough space
EVENT_RECORD_MEDIA_PARAM_ERROR,// video parameter error, request video stream may be failure
EVENT_RECORD_INITAVIHEAD_ERROR,//write file head error
EVNET_RECORD_FILEBEGIN_ERROR,//create file error
EVNET_RECORD_WRITE_FILE_ERROR,	//write file error


AJ_NETSDK_IPC_InputRecordStream(record file by input media data)
Function:
LONG		__stdcall		AJ_NETSDK_IPC_InputRecordStream(LONG lRealHandle,const void * pBuffer,int nSize,int isVideo,int iskey,double timestamp);
Parameter:
	lRealHandle: return by call AJ_NETSDK_IPC_StartRecordStream 
	pBuffer:media data
	nSize:size of media data characters 
	isVideo:whether it is video media data 
	iskey:whether it is keyframe
	timestamp:timestamp
Return:
	0:means success
	ERR_RECORD_ISNOTRECORDSTREAM_MODE:current handle is realtime stream mode,not allow to call this function
	ERR_RECORD_WRITETEMPBUFFER_ERROR:means write cache failure
	ERR_RECORD_NOTRUNNING: means no enable video or video has stopped


AJ_NETSDK_IPC_StopRecordStream (stop outer media recording) 
Function:
LONG		__stdcall		AJ_NETSDK_IPC_StopRecordStream(LONG lRealHandle);
Parameter:
	lRealHandle:it is stream control handle return by call AJ_NETSDK_IPC_StartRecordStream function 
Return:
	0:means success
	ERR_NOT_FIND_STREAM:means handle error
	ERR_RECORD_NOTRUNNING:means no in video mode
ERR_RECORD_NOTINPUTSTREAM_MODE:means not in the input stream record mode

	
AJ_NETSDK_IPC_AddInviteAudioStream(request capture compressed audio)
Prototype:
LONG	__stdcall	AJ_NETSDK_IPC_AddInviteAudioStream(LONG * lPort); 
Parameter:
	lPort: If success, this parameter is control handle 
Return:
	0 means success
	ERR_DLL_NOINITORRELEASE_ERROR: The library has been released
	ERR_NOT_STARTTALK_MODE_ERROR: Has not called AJ_NETSDK_IPC_StartTalk to start capture.
	ERR_OUTOFF_MEMORY: out of memory
	
Note:
	Call AJ_NETSDK_IPC_StartTalk to start capturing audio before calling this function.


AJ_NETSDK_IPC_SetEncodeAudioCallBack(set capture compressed audio callback)
Prototype:
LONG	__stdcall	AJ_NETSDK_IPC_SetEncodeAudioCallBack(LONG lPort,fEncodeAudioCallBack fnCallBack);
Parameter:
	lPort: control handle, return by AJ_NETSDK_IPC_AddInviteAudioStream 
	fnCallBack: callback function, function prototype:
			typedef	long (CALLBACK* fEncodeAudioCallBack)(long lType, long lPara1, long lPara2);
			when callback, 
				lType:0x10000002(fixed value)
				lPara1: compressed audio data pointer
				lPara2: compressed audio data length 
		
Return:
	0: means success
	ERR_DLL_NOINITORRELEASE_ERROR: the library has been released
	ERR_NOT_FIND_DEVICE: parameter handle lPort error
	
	

AJ_NETSDK_IPC_RemoveInviteAudioStream(cancle capture compressed audio) 
Prototype:
LONG	__stdcall	AJ_NETSDK_IPC_RemoveInviteAudioStream(LONG lPort);
Parameter:	
	lPort: control handle, return by AJ_NETSDK_IPC_AddInviteAudioStream
Return:
	0: means success
	ERR_NOT_FIND_DEVICE: parameter handle lPort error



AJ_NETSDK_IPC_SerialStart (open serial port)
Prototype:
	AJ_NETSDK_IPC_SerialStart(LONG lUserId, SerialDataCallBack cbSDCallBack, void* pUser);
Parameter:
lUserId: return by login device, mark up from which device.
pUser: user pointer, return as callback function.
cbSDCallBack: serial data receive callback function.
Calback function architype definition:
LONG (CALLBACK* SerialDataCallBack) (LONG lUser, char *pRecvDataBuffer, DWORD dwBufSize, void *pUser);
Callback function parameters description:
			lUser: return by login device, mark up from which device.
			pRecvDataBuffer: received serial data, return as alarm structure mode, read mode: ALARM_ITEM *pAlarmItem = (ALARM_ITEM*)pRecvDataBuffer;
			dwBufSize: data length equal with sizeof(ALARM_ITEM)?
			pUser: user pointer
Return:
	0: success 
Non-zero: means failure, ERR_NOT_FIND_DEVICE means lUserId which user imports is error.


AJ_NETSDK_IPC_SerialSend (send serial data)
Prototype:
	AJ_NETSDK_IPC_SerialSend(LONG lUserId, LONG lChannel, char *pSendBuf);
Parameter:
lUserId: return by login device, mark up from which device.
lChannel: menas the channel communication port which wants to communicate, cause IPC camera only has one channel, invalid temporary.
pSendBuf: the data “buf” you want to send. Data format as follow:
<xml>
<cmd>trans</cmd>
<data>control command</data>
</xml>

Return:
	0: success 
Non-zero: means failure, ERR_NOT_FIND_DEVICE means lUserId which user imports is error.


AJ_NETSDK_IPC_SerialStop (close serial port)
Prototype:
	AJ_NETSDK_IPC_SerialStop(LONG lUserId);
Parameter:
lUserId: return by login device, mark up from which device.

Return:
	0: success 
Non-zero: means failure, ERR_NOT_FIND_DEVICE means lUserId which user imports is error.
 
Steps of using AJNETSDK
Note about AJNETSDK
Note:
1.	Should not deal with the callback function directly, analyze and submit it to other thread is a good method.
2.	Return success about auxiliary channel only means the task has been applied and status callback function or auxiliary channel function will tell you the result.
3.	Before use SDK, call AJ_NETSDK_IPC_Init for exit SDK rapidly and release resources. When not use it any more then call AJ_NETSDK_IPC_Cleanup but not AJ_NETSDK_IPC_StopRealPlay or AJ_NETSDK_IPC_Logout. If you want to stop all stream, call AJ_NETSDK_IPC_StopAllRealPlay. Call AJ_NETSDK_IPC_LogoutAll for logout device.
4.	About C# language (not C++), you should change char * into pointer (C# is IntPtr) but not string.
5.	About media stream decode. If you want to decode youself then you should remove the subsequent 16-bit, please refer to AJ_NETSDK_IPC_SetRealDataCallBack for more information


Steps of realizing video stream play
1. Call AJ_NETSDK_IPC_Init to initialize AJNETSDK
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up callback function 
3. Call AJ_NETSDK_IPC_SetRealDataCallBack to set up the received media data callback function (if the return value of callback function in step 4 is not null then this step can be omitted, generally condition, the format to call this function can be: AJ_NETSDK_IPC_SetRealDataCallBack(NULL,NULL); 
4. Call AJ_NETSDK_IPC_RealPlayEx to request video stream
5. when receive EVENT_RECVVIDEOPARAM event and EVENT_RECVVIDEOAUDIOPARAM event from status callback function or receive EVENT_RECVVIDEOAUDIOPARAM event or receive media data type is 2 from media stream callback function (0 means video media,1 means audio media,2 means decoding parameter media), call IP_TPS_OpenStream to initialize decoder (if device has audio, call IP_TPS_OpenStream twice and nPort must be same as the first time), call IP_TPS_Play to enter the status of play. 
6. When it receives media data, call IP_TPS_InputVideoData to trasfer video stream to player control, call IP_TPS_InputAudioData to transfer video stream to player control. 
7. Call AJ_NETSDK_IPC_StopRealPlay to stop receving stream (call this function if want to stop one of the streams)
8. Call IP_TPS_Stop to stop video.
9. Call IP_TPS_ReleaseAll to release play control resource.
10. Call AJ_NETSDK_IPC_Cleanup to release AJNETSDK control resource.


Step 1 to 3 to initialize SDK, step 4 to 8 to play, step 9 to 10 to release SDK resource.

Note:
	IP_TPS_Play, IP_TPS_OpenStream, IP_TPS_Stop, IP_TPS_ReleaseAll, IP_TPS_InputVideoData and IP_TPS_InputAudioData function are provided in DllPlayer.dll. 
	Call AJ_NETSDK_IPC_Cleanup to release resource when you want to exit application.



Realize auxiliary channel connection for PTZ control, system control, device configuration, etc
1. Call AJ_NETSDK_IPC_Init to initialize AJNETSDK
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up callback function.
3. Call AJ_NETSDK_IPC_SetAUXResponseCallBack to set up auxiliary communication information callback function.
4. Call AJ_NETSDK_IPC_Login to set up login.
5. It means login successfully when you receive EVENT_LOGINOK event from status callback function.
6. Call relevant function after login successfully,such as the basic ptz control function:AJ_NETSDK_IPC_PTZControl to control ptz.
7. Call AJ_NETSDK_IPC_Logout to logout.
8. Call AJ_NETSDK_IPC_Cleanup to release AJNETSDK control resource, then it will exit all login and stop all request stream. 
Note:
	PTZ control will receive an EVENT_PTZPRESETINFO event from status callback function; it will return operation result from auxiliary channel message callback function when you read configuration.modify configuration.system control and etc. 
LONG  OnAUXResponseCallBack(LONG lUser,LONG nType,char *pResponse,void *pUser);

Parameter:
lUser:login device return this parameter,to identify from which device
nType:means message type,the top bit of nType is flag bit(nType & 0xff000000!=0),if the flag bit is non-zero,it means operation failure. 
Low 24 bits(Type=nType & 0xffffff)is actual type,different values indicate different operations,details of Schedule 2
pUser:user pointer,the same as pUser parameter of the function which it is to set up OnAUXResponseCallBack


	

Steps of realizing audio broadcast 
1. Call AJ_NETSDK_IPC_Init to initilize library.
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up status callback function.
3. Call AJ_NETSDK_IPC_StartTalk function
4. Call login device function:m_nLastCmdId=AJ_NETSDK_IPC_Login().
5. Call AJ_NETSDK_IPC_StartVoiceCom(m_nLastCmdId,0,1,NULL,NULL) to start device talkback funciton;
6. Wait for below events in status callback function:
	EVENT_STARTAUDIOOK,//talkback starts successfully
	EVENT_STARTAUDIOFAILED,//talkback starts failed
if it is EVENT_STARTAUDIOOK call AJ_NETSDK_IPC_AddTalk(m_nLastCmdId) 
7. Repeat 4 to 7 to add more devices.
8. If you want to quit broadcast of one device,first to call AJ_NETSDK_IPC_RemoveTalk function then call  AJ_NETSDK_IPC_StopVoiceCom function.
9. If you want to quit broadcast,call AJ_NETSDK_IPC_StopTalk to stop and release resource.


Steps of controlling PTZ 
1. Call AJ_NETSDK_IPC_Init to initialize library.
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up status callback function. 
3. Call AJ_NETSDK_IPC_SetAUXResponseCallBack to set up auxiliary channel information callback function.
4. Call login device function:m_nLastCmdId=AJ_NETSDK_IPC_Login().
5. It means login successfully when callback function receive EVENT_LOGINOK event.
6. Call PTZ control command(AJ_NETSDK_IPC_PTZControl or AJ_NETSDK_IPC_PTZControlEx)


Steps of receiving stream record
1. Call AJ_NETSDK_IPC_Init to initialize library.
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up OnStatusEventCallBack status callback function.
3. Call AJ_NETSDK_IPC_RealPlayEx to request video stream.
4. After OnStatusEventCallBack status callback function has been received EVENT_RECVVIDEOAUDIOPARAM then execute step 5(note:step5 execute after step 4 executing successfully) 
5. Call AJ_NETSDK_IPC_StartRecord,you may call AJ_NETSDK_IPC_StartRecordFile if it is recording a file.
6. Call AJ_NETSDK_IPC_StopRecord function.
7. Call AJ_NETSDK_IPC_StopRealPlay to stop receiving stream and releasing relevant resource.


Steps of outer input stream record
1. Call AJ_NETSDK_IPC_Init to initialize library.
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up status callback function.
3. Call AJ_NETSDK_IPC_StartRecordStream to play outer media stream. 
4. Repeatedly call AJ_NETSDK_IPC_InputRecordStream to input data.
5. Call AJ_NETSDK_IPC_StopRecordStream to stop and release relevant resource.

Steps of playing front-end record file
1. Call AJ_NETSDK_IPC_Init to initialize library.
2. Call AJ_NETSDK_IPC_SetStatusEventCallBack to set up status callback function.
3. Call AJ_NETSDK_IPC_SetReplayDataCallBack to set up callback function of receiving front-end playback media stream. 
4. Call AJ_NETSDK_IPC_SetPlayActionEventCallBack to set up and control callback.
5. Call AJ_NETSDK_IPC_Login to login device.
6. When login signal from status callback function return success, call AJ_NETSDK_IPC_GetReplayAblity to search device whether support front-end online playback,continue when support.
7. Call AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_RECORD_FILE_LIST,0,searchxml) to search video file.
8. Call AJ_NETSDK_IPC_PlayDeviceFile to play the file which has been searched.
9. Receive decoding parameter from callback function that AJ_NETSDK_IPC_SetReplayDataCallBack set up, then initialize decoder and at the same time input media stream into decoder.
10. Call AJ_NETSDK_IPC_ControlPlay to control front-end video play.


Steps of searching online device 
1. Call AJ_NETSDK_IPC_Init to initialize library.
2. Call AJ_NETSDK_IPC_SetSearchStatusCallBack to search status callback function.
3. Call AJ_NETSDK_IPC_StartSearchIPC to begin to search device.
4. Call AJ_NETSDK_IPC_GetSearchIPCCount to get the sum of searching IPC 
5. If device has been searched,call AJ_NETSDK_IPC_GetIPCInfo or AJ_NETSDK_IPC_GetIPCInfoXML function to get the corresponding device’s relevant information
6. If want to modify IP relevant information of IPC,call AJ_NETSDK_IPC_ModifyIPC or AJ_NETSDK_IPC_ModifyIPCXML
7. Call AJ_NETSDK_IPC_StopSearchIPC to stop searching IPC


 Call callback function to notice when new device is searched.


Receive audio capture compressed stream
//define callback
long __stdcall  fAudioRecv(long lType, long lPara1, long lPara2 )
{
	if(lType== 0x10000002)
{
		TRACE1("recv encode audio buffer len=%d\r\n",lPara2);
}
	return 0;
}


int m_nAudioStreamHandle=0;

	int nCode=::AJ_NETSDK_IPC_StartTalk(1,16000,16,2);//aac
	if(nCode!=0)
	{//start failed
		return;
	}
	int nErrorCode=::AJ_NETSDK_IPC_AddInviteAudioStream(&m_nAudioStreamHandle);
	if(nErrorCode==0)
	{
		::AJ_NETSDK_IPC_SetEncodeAudioCallBack(m_nAudioStreamHandle,fAudioRecv);
	}

Schedule 1 PTZ XML command
1.	 PTZ instruction
Mainly to explain XML command between IPC and auxiliary channel PTZ control. There are many protocols which are abstracted into XML format in camera underlying, call XML command for connecting PTZ
Call API AJ_NETSDK_IPC_PTZControlEx(LONG lUser,char *pXml) of NETSDK for PTZ command

2.	 XML command
The XML command mainly reference PELCO-P, extend to a lot of PTZ, but there is difference among different compan, so can not sure to support all PTZ
Command format: <xml></xml> as nodes and there are <cmd></cmd> means different command,specific information please refer section 2.1.

2.1	Ordinary command
2.1.1	UP
<xml>
<cmd>up</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>

panspeed: value from 1 to 10, the higher value the faster speed, this value is no use for up

tiltspeed: value from 1 to 10, the higher value the faster speed

2.1.2	down
<xml>
<cmd>down</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>

panspeed: value from 1 to 10, the higher value the faster speed

tiltspeed: value from 1 to 10, the higher value the faster speed


2.1.3	left
<xml>
<cmd>left</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>

panspeed: value from 1 to 10, the higher value the faster speed
tiltspeed: value from 1 to 10, the higher value the faster speed

2.1.4	right
<xml>
<cmd>right</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>

panspeed: value from 1 to 10, the higher value the faster speed

tiltspeed: value from 1 to 10, the higher value the faster speed

2.1.5	Left-up
<xml>
<cmd>left_up</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>

panspeed: value from 1 to 10, the higher value the faster speed

tiltspeed:  value from 1 to 10, the higher value the faster speed

2.1.6	Left-down
<xml>
<cmd>left_down</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>

panspeed: value from 1 to 10, the higher value the faster speed
tiltspeed: value from 1 to 10, the higher value the faster speed

2.1.7	Right-up
<xml>
<cmd>right_up</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>
panspeed: value from 1 to 10, the higher value the faster speed
tiltspeed: value from 1 to 10, the higher value the faster speed

2.1.8	Right-down
<xml>
<cmd>right_down</cmd>
<panspeed>5</panspeed>
<tiltspeed>5</tiltspeed>
</xml>
panspeed: value from 1 to 10, the higher value the faster speed
tiltspeed: value from 1 to 10, the higher value the faster speed

2.1.9	stop
<xml>
<cmd>stop/cmd>
</xml>

2.1.10	 zoom out
<xml>
<cmd>zoomwide</cmd>
</xml>

2.1.11	 zoom in
<xml>
<cmd>zoomtele</cmd>
</xml>

2.1.12	 FocusAutoOn 
<xml>
<cmd>FocusAutoOn</cmd>
</xml>

2.1.13	 FocusAutoOff
<xml>
<cmd> FocusAutoOff</cmd>
</xml>

2.1.14	 focus- (focusnear)
<xml>
<cmd>FocusNearAutoOff</cmd>
</xml>

Mode: FocusAutoOff
2.1.15	 focus+ (focusfar)
<xml>
<cmd>FocusFarAutoOff</cmd>
</xml>

Mode: FocusAutoOff
2.1.16	 IrisAutoOn
<xml>
<cmd>IrisAutoOn</cmd>
</xml>

2.1.17	 IrisAutoOff
<xml>
<cmd>IrisAutoOff</cmd>
</xml>

2.1.18	 Iris- (irisclose)
<xml>
<cmd>IrisCloseAutoOff</cmd>
</xml>

Mode: IrisAutoOff

2.1.19	 Iris+ (irisopen)
<xml>
<cmd>IrisOpenAutoOff</cmd>
</xml>

Mode: IrisAutoOff

2.2	Orbit and scan
2.2.1	Orbit
<xml>
<cmd>Orbit</cmd>
</xml>

2.2.2	Scan begin
<xml>
<cmd>ScanBegin</cmd>
</xml>

2.2.3	Scan end
<xml>
<cmd>ScanEnd</cmd>
</xml>

2.2.4	Scan on
<xml>
<cmd>ScanOn</cmd>
</xml>

2.2.5	Scan off
<xml>
<cmd>ScanOff</cmd>
</xml>


2.3	Preset command
2.3.1	Get current preset list
<xml>
<cmd>GetPresetList</cmd>
</xml>

After calling, you can receive EVENT_PTZPRESETINFO event from status callback function, preset number.

2.3.2	Add Preset 
<xml>
<cmd>setpreset</cmd>
<preset>presetnum</preset>
<r>
<b>bhour:bmin</b>
<e>ehour:emin</e>
</r>
</xml>

Note:
1)	Presetnum from 1 to 66 integer
2)	<r></r> is a specific time, does not operate PTZ 5 mintes then it will come back the preset, remove it if it not supports this function. <b></b> is start time, <e></e> is end time
3)	Preset 1 to 8 can be regular homing


2.3.3	Delete preset
<xml>
<cmd>clearpreset</cmd>
<preset>presetnum</preset>
</xml>

Presetnum from 1 to 66 integer
2.3.4	Call preset
<xml>
<cmd>callpreset</cmd>
<preset>presetnum</preset>
</xml>

Presetnum from 1 to 66 integer (some ball can call 67 to 255)

2.3.5	Set for orbit
<xml>
<cmd>SetOrbit</cmd>
<preset>presetnum</preset>
<r>
<b>bhour:bmin</b>
<e>ehour:emin</e>
</r>
</xml>

Note:
1)	If not operate PTZ 5 mintes then it will orbit automatically
2)	If there is preset as section 2.1 then it will come back the preset first and then orbit
3)	Presetnum can be integer from 1 to 8
4)	<b>00:00</b>is start time <e>23:59</e>is end time
5)	The setting time can not conflict
Note: time and minute must be expressed by two-digit.
2.3.6	 Set for scan
<xml>
<cmd>SetScan</cmd>
<preset>presetnum</preset>
<r>
<b>bhour:bmin</b>
<e>ehour:emin</e>
</r>
</xml>

Note:
1)	If not operate PTZ 5 mintes it will scan automatically
2)	If there is preset as section 2.1 then it will come back the preset first and then scan
3)	Presetnum can be integer from 1 to 8
4)	<b>00:00</b>is start time, <e>23:59</e>is end time
5)	The setting time can not conflict
Note: time and minute must be expressed by 2-digit.


2.3.7	Delete orbit setting
<xml>
<cmd>DelOrbit</cmd>
<preset>presetnum</preset>
</xml>

Presetnum can be integer from 1 to 8
2.3.8	Delete scan setting 
<xml>
<cmd>DelScan</cmd>
<preset>presetnum</preset>
</xml>

Presetnum can be integer from 1 to 8


2.4	Advanced command
2.4.1	Black/White
<xml>
<cmd>BLCOff</cmd>
</xml>

2.4.2	Color
<xml>
<cmd>BLCOn</cmd>
</xml>

2.4.3	Mirror off
<xml>
<cmd>MirrorOff </cmd>
</xml>

2.4.4	Mirror on
<xml>
<cmd>MirrorOn</cmd>
</xml>

2.4.5	Freeze off
<xml>
<cmd>FreezeOff</cmd>
</xml>
2.4.6	Freeze on
<xml>
<cmd>FreezeOn</cmd>
</xml>

2.4.7	Digital zoom off
<xml>
<cmd>StepsZOff</cmd>
</xml>


2.4.8	Digital zoom on
<xml>
<cmd>StepsZOn</cmd>
</xml>


2.4.9	OSD off
<xml>
<cmd>ScreenOff</cmd>
</xml>

2.4.10	 OSD on
<xml>
<cmd>ScreenOn</cmd>
</xml>


2.4.11	 Illumination off
<xml>
<cmd>Min.SenOff</cmd>
</xml>


2.4.12	 Illumination on
<xml>
<cmd>Min.SenOn</cmd>
</xml>


2.4.13	Ill off
<xml>
<cmd>ILLOff</cmd>
</xml>

2.4.14	Ill on
<xml>
<cmd>ILLOn</cmd>
</xml>


2.4.15	Reset
<xml>
<cmd>CamReset</cmd>
</xml>

2.4.16	 WB auto
<xml>
<cmd>AWBOn</cmd>
</xml>


2.4.17	 WB manual
<xml>
<cmd>AWBOff</cmd>
</xml>

2.4.18	 WB_R
<xml>
<cmd>RWB</cmd>
</xml>

Mode: WB manual
2.4.19	 WB_B
<xml>
<cmd>BWB</cmd>
</xml>

Mode: WB manual

2.4.20	 WB_M
<xml>
<cmd>MWB</cmd>
</xml>

Mode: WB manual
2.4.21	 WB_G
<xml>
<cmd>GWB</cmd>
</xml>

Mode: WB manual
2.4.22	 Initialize
<xml>
<cmd>InitSet</cmd>
</xml>

2.4.23 Menu
<xml>
<cmd>Menu</cmd>
</xml>


2.5 Transparent Transmission Control Command
<xml>
<cmd>trans</cmd>
<data>control command</data>
</xml>

Control command description:
Take YAAN protocol for example:
A5 01 08 7B 7B 00 A4 up
A5 01 04 7B 7B 00 A0 down
A5 01 02 7B 7B 00 9E left
A5 01 01 7B 7B 00 9D right
A5 01 0A 7B 7B 00 A6 left up
A5 01 09 7B 7B 00 A5 right up
A5 01 06 7B 7B 00 A2 left down
A5 01 05 7B 7B 00 A1 right down
Different protocols have different control command data, you just need to pass in control command data into <data></data> segment in xml. 

 
Schedule2 Advanced function of auxiliary channel
1. Advanced function
There are many other functions of auxiliary channel such as query camera configuration, record, log, upload configuration and firmware, download configuration and log and record, delete, reboot, system parameter, format storage and so on.
2. Call auxiliary channel function
Configure IPC, first define a callback function LONG CALLBACK OnAUXResponse(LONG lUser,LONG nType,char *pResponse,void *pUser); then call AJ_NETSDK_IPC_SetAUXResponseCallBack(OnAUXResponse,NULL); it will not return at the same time when query and configure device. lUser is device handle, if nType&0xff000000 is not 0 then means operate success, ntype&0x00ffffff is the command number, different configuration is corresponding to different command
Call AJ_NETSDK_IPC_GetDVRConfig API for reading, dwCommand is macro ( the macro definition characteristic is macro name GET), call AJ_NETSDK_IPC_SetDVRConfig API for configuring devices, dwCommand is macro ( the macro name is SET), call AJ_NETSDK_IPC_SystemControl for operate system.

#define 			CMD_SYSTEM_CONFIG_BASE		200

The following content suppose m_nLastCmdId is the control handle returned from login


3. Read and set command
After call AJ_NETSDK_IPC_GetDVRConfig or AJ_NETSDK_IPC_SetDVRConfig  then it will receive a message from OnAuxResponse,if the previous byte of cmdId is cmdId&0xff000000 is 0 means success,others means failed. cmdId&0xffffff is corresponding command.


Obtain PTZ command (201 command)
#define CMD_GET_SYSTEM_PTZ_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 1) //201

Call method:
AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId,201,0,"",0,0);

Return:
If failed, then it will receive nType&0xff000000!=0 && nType==201 on OnAUXResponse
If success, then it will receive  nType=201 on OnAUXResponse, then content of pResponse as following:

<PTZConfig	// PTZ basic paramter
Protocol="PELCO_D"	// PTZ protocol type, possible value PELCO_P, PELCO_D, MOLYN_P, SANTA_P
ComPort="511"		// address code (1-512)
BaudRate="2400"		// bandrate
DataBits="8"		 	// databits, possible value 5,6,7,8
StopBits="10"			// stopbits, 10 replace 1, 15 replace 1.5, 20 replace 2
Verify="NONE"		 //verify ODD, EVEN, NONE
FlowControl="NONE”   //Data control, NONE, HARDWARE, SOFTWARE 
BootAction="0"		//boot action, 0 means no action, 1 means call preset 1
>

<AdvanceConfig>  		// PTZ advanced parameter
<FunctionConfig			
FunctionName="ScanBegin" //type
PresetNumber="51"        //preset, from1 to 255 integer
Function="Set"			//operate type, Set or Call	
/>
<FunctionConfig
FunctionName="ScanEnd"
PresetNumber="52"
Function="Set"
/>
<FunctionConfig
FunctionName="ScanOn"
PresetNumber="51"
Function="Call"
/>
<FunctionConfig
FunctionName="ScanOff"
PresetNumber="52"
Function="Call"
/>
<FunctionConfig
FunctionName="Orbit"
PresetNumber="53"
Function="Call"
/>
<FunctionConfig
FunctionName="BLCOff"
PresetNumber="64"
Function="Set"
/>
<FunctionConfig
FunctionName="BLCOn"
PresetNumber="64"
Function="Call"
/>
<FunctionConfig
FunctionName="MirrorOff"
PresetNumber="63"
Function="Set"
/>
<FunctionConfig
FunctionName="MirrorOn"
PresetNumber="63"
Function="Call"
/>
<FunctionConfig
FunctionName="StepsZOff"
PresetNumber="58"
Function="Set"
/>
<FunctionConfig
FunctionName="StepsZOn"
PresetNumber="58"
Function="Call"
/>
<FunctionConfig
FunctionName="ScreenOff"
PresetNumber="57"
Function="Set"
/>
<FunctionConfig
FunctionName="ScreenOn"
PresetNumber="57"
Function="Call"
/>
<FunctionConfig
FunctionName="MinSenOff"
PresetNumber="56"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOff"
PresetNumber="62"
Function="Set"
/>
<FunctionConfig
FunctionName="MinSenOn"
PresetNumber="56"
Function="Call"
/>
<FunctionConfig
FunctionName="ILLOff"
PresetNumber="55"
Function="Set"
/>
<FunctionConfig
FunctionName="ILLOn"
PresetNumber="55"
Function="Call"
/>
<FunctionConfig
FunctionName="AWBOff"
PresetNumber="61"
Function="Set"
/>
<FunctionConfig
FunctionName="AWBOn"
PresetNumber="61"
Function="Call"
/>
<FunctionConfig
FunctionName="CamReset"
PresetNumber="54"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOn"
PresetNumber="62"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOn"
PresetNumber="59"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOff"
PresetNumber="59"
Function="Set"
/>
<FunctionConfig
FunctionName="IrisAutoOn"
PresetNumber="60"
Function="Call"
/>
<FunctionConfig
FunctionName="IrisAutoOff"
PresetNumber="60"
Function="Set"
/>
<FunctionConfig
FunctionName="Menu"
PresetNumber="65"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOn"
PresetNumber="89"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOff"
PresetNumber="89"
Function="Set"
/>
<FunctionConfig
FunctionName="PathOn"
PresetNumber="97"
Function="Call"
/>
<FunctionConfig
FunctionName="PathOff"
PresetNumber="96"
Function="Call"
/>
</AdvanceConfig>
</PTZConfig>

PTZ advanced parameter

1	ScanBegin
2	ScanEnd
3	ScanOn
4	ScanOff
5	Orbit
6	Black/White
7	Color
8	MirrorOff
9	MirrorOn
10	FreezeOff
11	FreezeOn
12	StepsOff
13	StepsOn
14	ScreenOff
15	ScreenOn
16	LumenOff
17	LumenOn
18	IlluminationOff
19	IlluminationOn
20	WhiteBalanceManual
21	WhiteBalanceAuto
22	CamerReset
23	AutoFocusAuto
24	AutoFocusManual
25	IrisAuto
26	IrisAuto
27	Menu
28	TrackOn
29	TrackOff
30	PathOn
31	PathOff
Modify PTZ parameter (225 command)
#define CMD_SET_SYSTEM_PTZ_COMMON	(CMD_SYSTEM_CONFIG_BASE + 25) //225 

Call method:
AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId,CMD_SET_SYSTEM_PTZ_COMMON,0,pXml,strlen(pXml));

The content of pXml:

<PTZConfig			 //PTZ basic parameter
Protocol="PELCO_D"	 //PTZ protocol type, possible value PELCO_P, PELCO_D, MOLYN_P, SANTA_P
ComPort="511"		 //address code (1-512)
BaudRate="2400"		 //baudrate
StopBits="10"			// stopbits, 10 replace 1, 15 replace 1.5, 20 replace 2
Verify="NONE"		 //verify 
BootAction="0"		//boot action, 0 means no action, 1 means call preset 1> ODD, EVEN, NONE
FlowControl="NONE” //Data control, NONE, HARDWARE, SOFTWARE
<AdvanceConfig />   //can not remove, keep no parameter
</PTZConfig>

Modify PTZ advanced parameter (226 command)
#define CMD_SET_SYSTEM_PTZ_ADVANCE	(CMD_SYSTEM_CONFIG_BASE + 26) //226

Call method:
AJ_NETSDK_IPC_SetDVRConfig (m_nLastCmdId, CMD_SET_SYSTEM_PTZ_ADVANCE,0,pXml,strlen (pXml));

The content of pXml:

<PTZConfig>
<AdvanceConfig>  		//PTZ advanced parameter
<FunctionConfig			
FunctionName="ScanBegin" //type
PresetNumber="51"        //preset from 1 to 255 integer
Function="Set"			//operation type only can be Set orCall	
/>
<FunctionConfig
FunctionName="ScanEnd"
PresetNumber="52"
Function="Set"
/>
<FunctionConfig
FunctionName="ScanOn"
PresetNumber="51"
Function="Call"
/>
<FunctionConfig
FunctionName="ScanOff"
PresetNumber="52"
Function="Call"
/>
<FunctionConfig
FunctionName="Orbit"
PresetNumber="53"
Function="Call"
/>
<FunctionConfig
FunctionName="BLCOff"
PresetNumber="64"
Function="Set"
/>
<FunctionConfig
FunctionName="BLCOn"
PresetNumber="64"
Function="Call"
/>
<FunctionConfig
FunctionName="MirrorOff"
PresetNumber="63"
Function="Set"
/>
<FunctionConfig
FunctionName="MirrorOn"
PresetNumber="63"
Function="Call"
/>
<FunctionConfig
FunctionName="StepsZOff"
PresetNumber="58"
Function="Set"
/>
<FunctionConfig
FunctionName="StepsZOn"
PresetNumber="58"
Function="Call"
/>
<FunctionConfig
FunctionName="ScreenOff"
PresetNumber="57"
Function="Set"
/>
<FunctionConfig
FunctionName="ScreenOn"
PresetNumber="57"
Function="Call"
/>
<FunctionConfig
FunctionName="MinSenOff"
PresetNumber="56"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOff"
PresetNumber="62"
Function="Set"
/>
<FunctionConfig
FunctionName="MinSenOn"
PresetNumber="56"
Function="Call"
/>
<FunctionConfig
FunctionName="ILLOff"
PresetNumber="55"
Function="Set"
/>
<FunctionConfig
FunctionName="ILLOn"
PresetNumber="55"
Function="Call"
/>
<FunctionConfig
FunctionName="AWBOff"
PresetNumber="61"
Function="Set"
/>
<FunctionConfig
FunctionName="AWBOn"
PresetNumber="61"
Function="Call"
/>
<FunctionConfig
FunctionName="CamReset"
PresetNumber="54"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOn"
PresetNumber="62"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOn"
PresetNumber="59"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOff"
PresetNumber="59"
Function="Set"
/>
<FunctionConfig
FunctionName="IrisAutoOn"
PresetNumber="60"
Function="Call"
/>
<FunctionConfig
FunctionName="IrisAutoOff"
PresetNumber="60"
Function="Set"
/>
<FunctionConfig
FunctionName="Menu"
PresetNumber="65"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOn"
PresetNumber="89"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOff"
PresetNumber="89"
Function="Set"
/>
<FunctionConfig
FunctionName="PathOn"
PresetNumber="97"
Function="Call"
/>
<FunctionConfig
FunctionName="PathOff"
PresetNumber="96"
Function="Call"
/>
</AdvanceConfig>
</PTZConfig>

PTZ advanced parameter

1	ScanBegin
2	ScanEnd
3	ScanOn
4	ScanOff
5	Orbit
6	Black/White
7	Color
8	MirrorOff
9	MirrorOn
10	FreezeOff
11	FreezeOn
12	StepsOff
13	StepsOn
14	ScreenOff
15	ScreenOn
16	LumenOff
17	LumenOn
18	IlluminationOff
19	IlluminationOn
20	WhiteBalanceManual
21	WhiteBalanceAuto
22	CamerReset
23	AutoFocusAuto
24	AutoFocusManual
25	IrisAuto
26	IrisAuto
27	Menu
28	TrackOn
29	TrackOff
30	PathOn
31	PathOff

Read configuration about synchronize time (202 command)
#define CMD_GET_SYSTEM_TIME_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 2)

Call method:
AJ_NETSDK_IPC_GetDVRConfig (m_nLastCmdId, CMD_GET_SYSTEM_TIME_CONFIG,0,"",0,0);

Return XML:
<TimeConfig
TimeMode="NTP"			//update mode, NTP is NTP sever synchronize, MANUAL is synchronize manually
TimeZone="1200"         //time zone, formula (12+a)*60, a ranges from -12 to +12
>
<NTPConfig				// work when TimeMode="NTP"
ServerIP="192.168.1.116"	//NTP address
ServerPort="123"			//NTP port
RefreshInterval="60"       //refresh time (mimute)
/>
</TimeConfig>

Modify method about synchronize time (222 command) 
#define CMD_SET_SYSTEM_TIME_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 22)

Call methos:
AJ_NETSDK_IPC_SetDVRConfig (m_nLastCmdId, CMD_SET_SYSTEM_TIME_CONFIG,0,pXml,strlen (pXml));
Return XML:

<TimeConfig
TimeMode="NTP"			//update mode, NTP is NTP sever synchronize, MANUAL is synchronize manually
TimeZone="1200"         //time zone, formula (12+a)*60, a ranges from -12 to +12
>
<NTPConfig				// work when TimeMode="NTP"
ServerIP="192.168.1.116"	//NTP address
ServerPort="123"			//NTP port
RefreshInterval="60"       //refresh time (mimute)
/>
</TimeConfig>

Note: If it is synchronize manually, use command 1005 to modify time.

Obtain user list (203 command)
#define CMD_GET_SYSTEM_USER_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 3)

Call method:
AJ_NETSDK_IPC_GetDVRConfig (m_nLastCmdId, CMD_GET_SYSTEM_TIME_CONFIG,0,"",0,0);


Return XML:

<UserConfig>
<Account	
Username="admin"			//user name
Password="123456"			//password
Group="Administrator"			//group:Administrator, Operator, Viewer
Status="Enable"				//enable user, disable user
/>
<Account
Username="test"
Password="123456"
Group="Administrator"
Status="Enable"
/>

</UserConfig>

Modify user list (223 command)
#define CMD_SET_SYSTEM_USER_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 23)

Call method:
AJ_NETSDK_IPC_SetDVRConfig (m_nLastCmdId, CMD_SET_SYSTEM_LOG_CONFIG,0,pXml,strlen (pXml));
The content of pXml:

<UserConfig>
<Account	
Username="admin"			//user name
Password="123456"			//password
Group="Administrator"			//group:Administrator, Operator, Viewer
Status="Enable"				//enable user, disable user
/>
<Account
Username="test"
Password="123456"
Group="Administrator"
Status="Enable"
/>
</UserConfig>


Output log (204 command)
#define CMD_GET_SYSTEM_LOG_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 4)

Call method:
AJ_NETSDK_IPC_GetDVRConfig (m_nLastCmdId, CMD_GET_SYSTEM_LOG_CONFIG,0,"",0,0);

Return XML:

<SystemLogConfig
LogLevel="DEBUG+RUN+ERROR+OPERATION+ALARM+STAT+COMMON"	
//output log type:debug, run, error, operation, alarm, statistic, common,connect by “+”
MaxDay="30"				// Saving Days from 7 to 30
StoreMedia="FLASH"			// FLASH means store in flash storage
StorePolicy="OVERWRITE"	// FULLSTOP means stop when full;OVERWRITE means overwrite when full
AutoBackup="0"			//0 means do not backup;1 means backup 
BackupWay="EMAIL"			//backup type when AutoBackup=1
/>


Set Output log (224 command) 
#define 		CMD_SET_SYSTEM_LOG_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 24) 

Call method:
AJ_NETSDK_IPC_SetDVRConfig (m_nLastCmdId, CMD_SET_SYSTEM_LOG_CONFIG,0,pXml,strlen (pXml));
Return XML:

<SystemLogConfig
LogLevel="DEBUG+RUN+ERROR+OPERATION+ALARM+STAT+COMMON"	
//output log type:debug, run, error, operation, alarm, statistic, common,connect by “+” 
MaxDay="30"				// Saving Days from 7 to 30
StoreMedia="FLASH"			// FLASH means store in flash storage
StorePolicy="OVERWRITE"		// FULLSTOP means stop when full;OVERWRITE means overwrite when full
AutoBackup="0"			//0 means do not backup;1 means backup 
BackupWay="EMAIL"			//backup type when AutoBackup=1
/>


Read default language (205 command)
#define CMD_GET_SYSTEM_MISC_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 5)

Call method:
AJ_NETSDK_IPC_GetDVRConfig (m_nLastCmdId, CMD_GET_SYSTEM_MISC_CONFIG,0,"",0,0);

Return XML:

<MiscConfig
Language="en_us"  //the defualt language are zh_cn,zh_tw,en_us: zh_cn is Chinese; zh_tw is tranditional chinese; en_us is English
/>


Set default language (225 command)
#define CMD_SET_SYSTEM_MISC_CONFIG	(CMD_SYSTEM_CONFIG_BASE + 25)

Call method:
AJ_NETSDK_IPC_SetDVRConfig (m_nLastCmdId, CMD_SET_SYSTEM_MISC_CONFIG,0,pXml,strlen(pXml));

Return XML:

<MiscConfig
Language="en_us"  //the defualt language are zh_cn,zh_tw,en_us: zh_cn is Chinese; zh_tw is tranditional chinese; en_us is English
/>


Read system configuration XML (command 200) 
#define 		CMD_SYSTEM_CONFIG_BASE	(CMD_SYSTEM_CONFIG_BASE + 0) 

Call method:

 AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SYSTEM_CONFIG_BASE,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<SystemConfig>
<PTZConfig
Protocol="PELCO_P"
ComPort="1"
BaudRate="9600"
DataBits="8"
StopBits="10"
Verify="NONE"
FlowControl="NONE"
BootAction="0"
>
<AdvanceConfig>
<FunctionConfig
FunctionName="ScanBegin"
PresetNumber="51"
Function="Set"
/>
<FunctionConfig
FunctionName="ScanEnd"
PresetNumber="52"
Function="Set"
/>
<FunctionConfig
FunctionName="ScanOn"
PresetNumber="51"
Function="Call"
/>
<FunctionConfig
FunctionName="ScanOff"
PresetNumber="52"
Function="Call"
/>
<FunctionConfig
FunctionName="Orbit"
PresetNumber="53"
Function="Call"
/>
<FunctionConfig
FunctionName="BLCOff"
PresetNumber="64"
Function="Set"
/>
<FunctionConfig
FunctionName="BLCOn"
PresetNumber="64"
Function="Call"
/>
<FunctionConfig
FunctionName="MirrorOff"
PresetNumber="63"
Function="Set"
/>
<FunctionConfig
FunctionName="MirrorOn"
PresetNumber="63"
Function="Call"
/>
<FunctionConfig
FunctionName="StepsZOff"
PresetNumber="58"
Function="Set"
/>
<FunctionConfig
FunctionName="StepsZOn"
PresetNumber="58"
Function="Call"
/>
<FunctionConfig
FunctionName="ScreenOff"
PresetNumber="57"
Function="Set"
/>
<FunctionConfig
FunctionName="ScreenOn"
PresetNumber="57"
Function="Call"
/>
<FunctionConfig
FunctionName="MinSenOff"
PresetNumber="56"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOff"
PresetNumber="62"
Function="Set"
/>
<FunctionConfig
FunctionName="MinSenOn"
PresetNumber="56"
Function="Call"
/>
<FunctionConfig
FunctionName="ILLOff"
PresetNumber="55"
Function="Set"
/>
<FunctionConfig
FunctionName="ILLOn"
PresetNumber="55"
Function="Call"
/>
<FunctionConfig
FunctionName="AWBOff"
PresetNumber="61"
Function="Set"
/>
<FunctionConfig
FunctionName="AWBOn"
PresetNumber="61"
Function="Call"
/>
<FunctionConfig
FunctionName="CamReset"
PresetNumber="54"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOn"
PresetNumber="62"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOn"
PresetNumber="59"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOff"
PresetNumber="59"
Function="Set"
/>
<FunctionConfig
FunctionName="IrisAutoOn"
PresetNumber="60"
Function="Call"
/>
<FunctionConfig
FunctionName="IrisAutoOff"
PresetNumber="60"
Function="Set"
/>
<FunctionConfig
FunctionName="Menu"
PresetNumber="65"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOn"
PresetNumber="89"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOff"
PresetNumber="89"
Function="Set"
/>
<FunctionConfig
FunctionName="PathOn"
PresetNumber="97"
Function="Call"
/>
<FunctionConfig
FunctionName="PathOff"
PresetNumber="96"
Function="Call"
/>
</AdvanceConfig>
</PTZConfig>
<TimeConfig
TimeMode="MANUAL"
TimeZone="1200"
>
<NTPConfig
ServerIP="time.windows.com"
ServerPort="123"
RefreshInterval="60"
/>
</TimeConfig>
<UserConfig>
<Account
Username="admin"
Password="123456"
Group="Administrator"
Status="Enable"
/>
<Account
Username="opr"
Password="123456"
Group="Operator"
Status="Enable"
/>
<Account
Username="view"
Password="123456"
Group="Viewer"
Status="Disable"
/>
</UserConfig>
<SystemLogConfig
LogLevel="DEBUG+RUN+ERROR+OPERATION+ALARM+STAT+COMMON"
MaxDay="30"
StoreMedia="FLASH"
StorePolicy="OVERWRITE"
AutoBackup="0"
BackupWay="EMAIL"
/>
<MiscConfig
Language="en_us"
/>
</SystemConfig>

Among them, the information for each section references the above separating command corresponding to.


Modify system configuration (command 220)
#define CMD_SET_SYSTEM_CONFIG		(CMD_SYSTEM_CONFIG_BASE + 20)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_SYSTEM_LOG_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<SystemConfig>
<PTZConfig
Protocol="PELCO_P"
ComPort="1"
BaudRate="9600"
DataBits="8"
StopBits="10"
Verify="NONE"
FlowControl="NONE"
BootAction="0"
>
<AdvanceConfig> 
<FunctionConfig
FunctionName="ScanBegin"
PresetNumber="51"
Function="Set"
/>
<FunctionConfig
FunctionName="ScanEnd"
PresetNumber="52"
Function="Set"
/>
<FunctionConfig
FunctionName="ScanOn"
PresetNumber="51"
Function="Call"
/>
<FunctionConfig
FunctionName="ScanOff"
PresetNumber="52"
Function="Call"
/>
<FunctionConfig
FunctionName="Orbit"
PresetNumber="53"
Function="Call"
/>
<FunctionConfig
FunctionName="BLCOff"
PresetNumber="64"
Function="Set"
/>
<FunctionConfig
FunctionName="BLCOn"
PresetNumber="64"
Function="Call"
/>
<FunctionConfig
FunctionName="MirrorOff"
PresetNumber="63"
Function="Set"
/>
<FunctionConfig
FunctionName="MirrorOn"
PresetNumber="63"
Function="Call"
/>
<FunctionConfig
FunctionName="StepsZOff"
PresetNumber="58"
Function="Set"
/>
<FunctionConfig
FunctionName="StepsZOn"
PresetNumber="58"
Function="Call"
/>
<FunctionConfig
FunctionName="ScreenOff"
PresetNumber="57"
Function="Set"
/>
<FunctionConfig
FunctionName="ScreenOn"
PresetNumber="57"
Function="Call"
/>
<FunctionConfig
FunctionName="MinSenOff"
PresetNumber="56"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOff"
PresetNumber="62"
Function="Set"
/>
<FunctionConfig
FunctionName="MinSenOn"
PresetNumber="56"
Function="Call"
/>
<FunctionConfig
FunctionName="ILLOff"
PresetNumber="55"
Function="Set"
/>
<FunctionConfig
FunctionName="ILLOn"
PresetNumber="55"
Function="Call"
/>
<FunctionConfig
FunctionName="AWBOff"
PresetNumber="61"
Function="Set"
/>
<FunctionConfig
FunctionName="AWBOn"
PresetNumber="61"
Function="Call"
/>
<FunctionConfig
FunctionName="CamReset"
PresetNumber="54"
Function="Set"
/>
<FunctionConfig
FunctionName="FreezeOn"
PresetNumber="62"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOn"
PresetNumber="59"
Function="Call"
/>
<FunctionConfig
FunctionName="FocusAutoOff"
PresetNumber="59"
Function="Set"
/>
<FunctionConfig
FunctionName="IrisAutoOn"
PresetNumber="60"
Function="Call"
/>
<FunctionConfig
FunctionName="IrisAutoOff"
PresetNumber="60"
Function="Set"
/>
<FunctionConfig
FunctionName="Menu"
PresetNumber="65"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOn"
PresetNumber="89"
Function="Call"
/>
<FunctionConfig
FunctionName="TrackOff"
PresetNumber="89"
Function="Set"
/>
<FunctionConfig
FunctionName="PathOn"
PresetNumber="97"
Function="Call"
/>
<FunctionConfig
FunctionName="PathOff"
PresetNumber="96"
Function="Call"
/>
</AdvanceConfig>
</PTZConfig>
<TimeConfig
TimeMode="MANUAL"
TimeZone="1200"
>
<NTPConfig
ServerIP="time.windows.com"
ServerPort="123"
RefreshInterval="60"
/>
</TimeConfig>
<UserConfig>
<Account
Username="admin"
Password="123456"
Group="Administrator"
Status="Enable"
/>
<Account
Username="opr"
Password="123456"
Group="Operator"
Status="Enable"
/>
<Account
Username="view"
Password="123456"
Group="Viewer"
Status="Disable"
/>
</UserConfig>
<SystemLogConfig
LogLevel="DEBUG+RUN+ERROR+OPERATION+ALARM+STAT+COMMON"
MaxDay="30"
StoreMedia="FLASH"
StorePolicy="OVERWRITE"
AutoBackup="0"
BackupWay="EMAIL"
/>
<MiscConfig
Language="en_us"
/>
</SystemConfig>

Among them, the information for each section references the above separating command corresponding to.

4. Read and set network configuration information
Read network configuration (command 200)
#define CMD_NETWORK_CONFIG_BASE			    300
#define 		CMD_GET_NETWORK_CONFIG			(CMD_NETWORK_CONFIG_BASE + 0) 

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_GET_NETWORK_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<NetworkConfig>
<LANConfig
MacAddress="00:61:98:4c:0f:57"    //MAC address
DHCP="0"					//enable DHCP or not, 0 means no, 1 means yes
IPAddress="192.168.88.153"    //IP address
Netmask="255.255.255.0"      //Netmask
Gateway="192.168.88.1"       //Gateway
DNS1="202.96.128.86"        //DNS1
DNS2="202.96.134.133"       //DNS2
/>
<WIFIConfig
Enable="0"				   //enable WIFI or not, 0 means no, 1 means yes
OperationMode="managed"    //operation mode, current only supports managed
MacAddress=""			  //the MAC address of WIF
ChannelNumber="0"		  //Channel number
Region="CN"               //Region
ESSID=""                  //Ess id
BitRate="33"               //Bit rate
MacMode="9"              
// 0 means 802.11b/g mixed
// 1 means 802.11B
// 2 means 802.11A
// 3 means 802.11a/b/g mixed
// 4 means 802.11G,
// 5 means 802.11a/b/g/n mixed
// 6 means 802.11N
// 7 means 802.11g/n mixed
// 8 means 802.11a/n mixed
// 9 means 802.11b/g/n mixed
// 10 means 802.11a/g/n mixed
>
<WirelessEncrypt
Enable="0"			//enable encrypt or not, 0 means no, 1 means yes
EncryptType=""		//Encrypt Type, none means no, wep means WEP encryption, wap means WAP encryption
>
<WEPEncrypt
AuthMode=""			//Auth Mode: OPEN, SHARE
EncryptType=""		//EncryptType:WEP64, WEP128
KeyMode=""			//Key Mode: HEX, ASCII
KeyValue=""			//Key Value
/>
<WPAEncrypt
EncryptType=""		//Encrypt Type: TKIP, AES
AuthMode=""			//Auth Mode: WPA2PSK, WPAPSK
KeyValue=""			//Key Value
/>
</WirelessEncrypt>
<PingWatchConfig
Enable="0"			//enable ping watchdog or not, 0 means no, 1 means yes
PingAddress=""		//PING IP address
Interval="0"			//PING time interval: 3, 5, 10, 20, 30, 40, 50 and 60 
MaxFail="0"			//Max timeout number: 10, 20 and 30 
/>
</WIFIConfig>
<ADSLConfig
Enable="0"					//enable ADSL or not
Username="szerytrt@163.gd"	//ADSL username
Password="88888888"          //ADSL password
/>
<DDNSConfig
Enable="0"                   //enable DDNS or not
Server="3322.org"             //DDNS server address
Domain="test"                //DDNS domain name
Username="test"              //DDNS admin username
Password="test"              //DDNS admin password
FreshInterval="600"           //fresh interval, the unit is second
DdnsTypeList="3322, 0, http://www.3322.org, 3322.org; DYNDNS, 0, http://www.dyndns.org, dyndns.org;"      // the list of current support servers, the property of this node is read-only. Among them, separated using”;”
/>
<UPNPConfig
Enable="0"		 //enable UPNP or not
/>
<G3Config
Enable="0"	     //enable 3G or not
Type="0"         //3G card type, 0 means can not find, 10 means EVDO, 20 means WCDMA, 30 means TD-SCDMA
DialNumber="*99***1#"	//3G Dial number
APN="&quot;UNINET&quot;"  //3G APN
Username=""                //3G username
Password=""                //3G password
DialOption="0"              //Dial option, 0 means automatic dialing, 1 means SMS or phone activation dialing
CenterNumber=""            //when DialOption="1", means this list is activation telephone number, use “;” to separate and support more than one number
SMSC=""				  //SMS center number
/>
</NetworkConfig>

Modify network configuration (command 220) 
#define 		CMD_SET_NETWORK_CONFIG			(CMD_NETWORK_CONFIG_BASE + 20) 

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<NetworkConfig>
<LANConfig
MacAddress="00:61:98:4c:0f:57"    //MAC address
DHCP="0"					// enable DHCP or not, 0 means no, 1 means yes
IPAddress="192.168.88.153"    //IP address
Netmask="255.255.255.0"      // Net mask
Gateway="192.168.88.1"       // Gateway
DNS1="202.96.128.86"        //DNS1
DNS2="202.96.134.133"       //DNS2
/>
<WIFIConfig
Enable="0"				   // enable WIFI or not, 0 means no, 1 means yes
OperationMode="managed"    // operation mode, current only supports managed
MacAddress=""			  // the MAC address of WIF
ChannelNumber="0"		  // Channel Number
Region="CN"               // Region
ESSID=""                  //
BitRate="33"               // Bit Rate
MacMode="9"              
// 0 means 802.11b/g mixed
// 1 means 802.11B
// 2 means 802.11A
// 3 means 802.11a/b/g mixed
// 4 means 802.11G,
// 5 means 802.11a/b/g/n mixed
// 6 means 802.11N
// 7 means 802.11g/n mixed
// 8 means 802.11a/n mixed
// 9 means 802.11b/g/n mixed
// 10 means 802.11a/g/n mixed
>
<WirelessEncrypt
Enable="0"			// enable encrypt or not, 0 means no, 1 means yes
EncryptType=""		// Encrypt Type, NONE means no, wep means WEP encryption, wap means WAP encryption
>
<WEPEncrypt
AuthMode=""			// Auth Mode: OPEN, SHARE
EncryptType=""		// Encrypt Type: WEP64, WEP128
KeyMode=""			// Key Mode: HEX, ASCII
KeyValue=""			// Key Value	
/>
<WPAEncrypt
EncryptType=""		// Encrypt Type: TKIP, AES
AuthMode=""			// Auth Mode: WPA2PSK, WPAPSK
KeyValue=""			// Key Value
/>
</WirelessEncrypt>
<PingWatchConfig
Enable="0"			// enable ping watchdog or not, 0 means no, 1 means yes
PingAddress=""		// PING IP address
Interval="0"			// PING time interval: 3, 5, 10, 20, 30, 40, 50 and 60
MaxFail="0"			// Max timeout number: 10, 20 and 30
/>
</WIFIConfig>
<ADSLConfig
Enable="0"					// enable ADSL or not
Username="szerytrt@163.gd"	//ADSL username
Password="88888888"          //ADSL password
/>
<DDNSConfig
Enable="0"                   //enable DDNS or not
Server="3322.org"             //DDNS server address
Domain="test"                //DDNS domain name
Username="test"              //DDNS admin username
Password="test"              //DDNS admin password
FreshInterval="600"           //fresh interval time, the unit is second
DdnsTypeList="3322, 0, http://www.3322.org, 3322.org; DYNDNS, 0, http://www.dyndns.org, dyndns.org;"       // the list of current support servers, the property of this node is read-only. Among them, separated using “;”
/>
<UPNPConfig
Enable="0"		 //enable UPNP or not
/>
<G3Config
Enable="0"	     //enable 3G or not
Type="0"         //3G card type, 0 means can not find, 10 means EVDO, 20 means WCDMA, 30 means TD-SCDMA
DialNumber="*99***1#"	//3G dialing number
APN="&quot;UNINET&quot;"  //3G dialing APN
Username=""                //3G dialing username
Password=""                //3G dialing password
DialOption="0"              // Dial option, 0 means automatic dialing, 1 means SMS or phone activation dialing
CenterNumber=""            // when DialOption="1", means this list is activation telephone number, use “;” separated and support more than one number
SMSC=""				  //SMS center number
/>
</NetworkConfig>



Read Ethernet configuration (command 305)
#define CMD_GET_NETWORK_LAN_CONFIG   			(CMD_NETWORK_CONFIG_BASE + 5)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_SYSTEM_MISC_CONFIG,0,"",0,0);

Return XML contents as follows:

<LANConfig
MacAddress="00:61:98:4c:0f:57"  //MAC address
DHCP="0"					//enable DHCP or not, 0 means no, 1 means yes
IPAddress="192.168.88.153"    //IP address
Netmask="255.255.255.0"      //Netmask
Gateway="192.168.88.1"       //Geteway
DNS1="202.96.128.86"        //DNS1
DNS2="202.96.134.133"       //DNS2
/>

Modify Ethernet configuration (command 325)
#define CMD_SET_NETWORK_LAN_CONFIG				(CMD_NETWORK_CONFIG_BASE + 25)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_LAN_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<LANConfig
MacAddress="00:61:98:4c:0f:57"  //MAC address
DHCP="0"					//enable DHCP or not, 0 means no, 1 means yes
IPAddress="192.168.88.153"    //IP address
Netmask="255.255.255.0"      //Netmask
Gateway="192.168.88.1"       //Gateway
DNS1="202.96.128.86"        //DNS1
DNS2="202.96.134.133"       //DNS2
/>
Read the WIFI configuration (command 306)
#define CMD_GET_NETWORK_WIFI_CONFIG			(CMD_NETWORK_CONFIG_BASE + 6)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_NETWORK_WIFI_CONFIG,0,"",0,0);

Return XML contents as follows:

<WIFIConfig
Enable="0"				   //enable WIFI or not, 0 means no, 1 means yes
OperationMode="managed"    //operation mode, current can only support managed
MacAddress=""			  //WIF MAC address
ChannelNumber="0"		  //Channel number
Region="CN"               //Region
ESSID=""                  //
BitRate="33"               //Bit rate
MacMode="9"              
// 0 means 802.11b/g mixed
// 1 means 802.11B
// 2 means 802.11A
// 3 means 802.11a/b/g mixed
// 4 means 802.11G,
// 5 means 802.11a/b/g/n mixed
// 6 means 802.11N
// 7 means 802.11g/n mixed
// 8 means 802.11a/n mixed
// 9 means 802.11b/g/n mixed
// 10 means 802.11a/g/n mixed
>
<WirelessEncrypt
Enable="0"			// enable encrypt or not, 0 means no, 1 means yes
EncryptType=""	// Encrypt Type, NONE means no, wep means WEP encryption, wap means WAP encryption
>
<WEPEncrypt
AuthMode=""			// Auth Mode: OPEN, SHARE
EncryptType=""		// Encrypt Type: WEP64, WEP128
KeyMode=""			// Key Mode: HEX, ASCII
KeyValue=""			// Key Value	
/>
<WPAEncrypt
EncryptType=""		// Encrypt Type: TKIP, AES
AuthMode=""			// Auth Mode: WPA2PSK, WPAPSK
KeyValue=""			// Key Value
/>
</WirelessEncrypt>
<PingWatchConfig
Enable="0"			// enable ping watchdog or not, 0 means no, 1 means yes
PingAddress=""		// PING IP address
Interval="0"			// PING time interval: 3, 5, 10, 20, 30, 40, 50 and 60
MaxFail="0"			// Max timeout number: 10, 20 and 30
/>
</WIFIConfig>

Modify the WIFI configuration (command 326)
#define CMD_SET_NETWORK_WIFI_CONFIG			(CMD_NETWORK_CONFIG_BASE + 26)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_WIFI_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<WIFIConfig
Enable="0"				   // enable WIFI or not, 0 means no, 1 means yes
OperationMode="managed"    // operation mode, current only supports managed
MacAddress=""			  // the MAC address of WIF
ChannelNumber="0"		  // Channel Number
Region="CN"               //Region
ESSID=""                  //
BitRate="33"               //Bit rate
MacMode="9"              
// 0 means 802.11b/g mixed
// 1 means 802.11B
// 2 means 802.11A
// 3 means 802.11a/b/g mixed
// 4 means 802.11G,
// 5 means 802.11a/b/g/n mixed
// 6 means 802.11N
// 7 means 802.11g/n mixed
// 8 means 802.11a/n mixed
// 9 means 802.11b/g/n mixed
// 10 means 802.11a/g/n mixed
>
<WirelessEncrypt
Enable="0"			// enable encrypt or not, 0 means no, 1 means yes
EncryptType=""	/ Encrypt Type, NONE means no, wep means WEP encryption, wap means WAP encryption
>
<WEPEncrypt
AuthMode=""			// Auth Mode: OPEN, SHARE
EncryptType=""		// Encrypt Type: WEP64, WEP128
KeyMode=""			// Key Mode: HEX, ASCII
KeyValue=""			// Key Value	
/>
<WPAEncrypt
EncryptType=""		// Encrypt Type: TKIP, AES
AuthMode=""			// Auth Mode: WPA2PSK, WPAPSK 
KeyValue=""			// Key Value
/> 
</WirelessEncrypt>
<PingWatchConfig
Enable="0"			// enable ping watchdog or not, 0 means no, 1 means yes
PingAddress=""		// PING IP address
Interval="0"			// PING time interval: 3, 5, 10, 20, 30, 40, 50 and 60
MaxFail="0"			// Max timeout number: 10, 20 and 30
/>
</WIFIConfig>

Read the ADSL configuration (command 310)
#define CMD_GET_NETWORK_ADSL_CONFIG			(CMD_NETWORK_CONFIG_BASE + 10)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_NETWORK_ADSL_CONFIG,0,"",0,0);

Return XML contents as follows:

<ADSLConfig
Enable="0"					//enable ADSL or not
Username="szerytrt@163.gd"	//ADSL username
Password="88888888"          //ADSL password
/>

Modify the ADSL configuration (command 330)
#define CMD_SET_NETWORK_ADSL_CONFIG			(CMD_NETWORK_CONFIG_BASE + 30)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_ADSL_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<ADSLConfig
Enable="0"					//enable ADSL or not
Username="szerytrt@163.gd"	//ADSL username
Password="88888888"          //ADSL password

Read the DDNS configuration (command 311)
#define CMD_GET_NETWORK_DDNS_CONFIG			(CMD_NETWORK_CONFIG_BASE + 11)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_NETWORK_DDNS_CONFIG,0,"",0,0);

Return XML contents as follow:

<DDNSConfig
Enable="0"                   //enable DDNS or not
Server="3322.org"             //DDNS server address
Domain="test"                //DDNS domain name
Username="test"              //DDNS admin username
Password="test"              //DDNS admin password
FreshInterval="600"           //fresh interval time, the unit is second
DdnsTypeList="3322,0,http://www.3322.org,3322.org;DYNDNS,0,http://www.dyndns.org,dyndns.org;"     // the list of current support servers, the property of this node is read-only. Among them, separated using “;”
/>

Modify the DDNS configuration (command 331)
#define CMD_SET_NETWORK_DDNS_CONFIG			(CMD_NETWORK_CONFIG_BASE + 31)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_DDNS_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<DDNSConfig
Enable="0"                   //enable DDNS or not
Server="3322.org"             //DDNS server address
Domain="test"                //DDNS domain name
Username="test"              //DDNS admin username
Password="test"              //DDNS admin password
FreshInterval="600"           // fresh interval time, the unit is second
DdnsTypeList="3322, 0, http://www.3322.org, 3322.org; DYNDNS, 0, http://www.dyndns.org, dyndns.org;"   // the list of current support servers, the property of this node is read-only. Among them, separated using”;”
/>

Read the UPNP configuration (command 312)
#define CMD_GET_NETWORK_UPNP_CONFIG			(CMD_NETWORK_CONFIG_BASE + 12)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_NETWORK_UPNP_CONFIG,0,"",0,0);

Return XML contents as follow:

<UPNPConfig
Enable="0"		 //enable UPNP or not, 0 means no, 1 means yes
/>

Modify UPNP configuration (command 332)
#define CMD_SET_NETWORK_UPNP_CONFIG			(CMD_NETWORK_CONFIG_BASE + 32)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_UPNP_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<UPNPConfig
Enable="0"		//enable UPNP or not, 0 means no, 1 means yes
/>

Read the 3G configuration (command 313)
#define CMD_GET_NETWORK_G3_CONFIG			(CMD_NETWORK_CONFIG_BASE + 13)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_NETWORK_G3_CONFIG,0,"",0,0);

Return XML contents as follows:

 <G3Config
Enable="0"	     // enable 3G or not
Type="0"         //3G card type, 0 means can not find, 10 means EVDO, 20 means WCDMA, 30 means TD-SCDMA
DialNumber="*99***1#"	//3G dialing number
APN="&quot;UNINET&quot;"  //3G dialing APN
Username=""                //3G dialing username
Password=""                //3G dialing password
DialOption="0"              // Dial option, 0 means automatic dialing, 1 means SMS or phone activation dialing
CenterNumber=""            // when DialOption="1", means this list is activation telephone number, use “;” to separate and support more than one number
SMSC=""				  // SMS center number
/>

Modify the 3G configuration (command 333)
#define CMD_SET_NETWORK_DDNS_CONFIG			(CMD_NETWORK_CONFIG_BASE + 31)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_NETWORK_DDNS_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<G3Config
Enable="0"	     // enable 3G or not
Type="0"         //3G card type, 0 means can not find, 10 means EVDO, 20 means WCDMA, 30 means TD-SCDMA
DialNumber="*99***1#"	//3G dialing number
APN="&quot; UNINET&quot;” //3G dialing APN
Username=""                //3G dialing username
Password=""                //3G dialing password
DialOption="0"              // Dial option, 0 means automatic dialing, 1 means SMS or phone activation dialing
CenterNumber=""            // when DialOption="1", means this list is activation telephone number, use “;” to separate and support more than one number
SMSC=""				  // SMS center number
/>

5. FTP & SMTP related configuration
Mainly the configuration of FTP account, SMTP account and so on. Including micro definitions as follows:

#define CMD_SERVER_CONFIG_BASE			400

#define CMD_GET_SERVER_CONFIG			    (CMD_SERVER_CONFIG_BASE + 0)
#define CMD_GET_SERVER_FTP_CONFIG		    (CMD_SERVER_CONFIG_BASE + 1)
#define CMD_GET_SERVER_SMTP_CONFIG		(CMD_SERVER_CONFIG_BASE + 2)

#define CMD_SET_SERVER_CONFIG			    (CMD_SERVER_CONFIG_BASE + 20)
#define CMD_SET_SERVER_FTP_CONFIG		    (CMD_SERVER_CONFIG_BASE + 21)
#define CMD_SET_SERVER_SMTP_CONFIG		(CMD_SERVER_CONFIG_BASE + 22)

#define CMD_SERVER_CONFIG_LAST		    	(CMD_SERVER_CONFIG_BASE + 22)


Read FTP & SMTP related configuration (command 400)
#define CMD_SERVER_CONFIG_BASE			400

#define CMD_GET_SERVER_CONFIG			    (CMD_SERVER_CONFIG_BASE + 0)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_SERVER_CONFIG,0,"",0,0);

Return XML contents as follows:

<ServerConfig>
<FTPList>
<FTPConfig
Index="0" 			 //0 means the FTP configuration for uploading alarm
ServerIP="192.168.88.172"  		//ftp server IP
ServerPort="21"            		//ftp server port
Username="vss_55008866"    		//ftp username
Password="755008866b0a62c24"  	//ftp password
FilePath="1"   				//ftp server path
FileSize="0"  	 			//this property is temporarity meaningless
/>
<FTPConfig
Index="1"				//1 means the FTP configuration for backuping log
ServerIP="192.168.88.138"  
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
<FTPConfig
Index="2"			//2 means the FTP configuration for backuping configure
ServerIP="192.168.1.1"
ServerPort="21"
Username="user1"
Password="pas1"
FilePath="filepath1"
FileSize="1000"
/>
<FTPConfig
Index="3"			//3 means the FTP configuration for updating
ServerIP="192.168.88.138"
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
</FTPList>
<SMTPList
ServerIP="192.168.88.8"		//SMTP server address
ServerPort="25"			//SMTP server port
Auth="1"					//need authentication or not, 0 means no, 1 means yes
Username="root@192.168.88.8"	//authentication account
Password="123456"				//authentication password
FromEmail="root@192.168.88.8"	//show account
>
<SMTPConfig
Index="0"			//0 means alarm upload, 1 means log backup, 2 means configuration backup
ToEmail="root@192.168.88.8"		//receive mail address
CcEmail="root@192.168.88.8"      //CC mail address
Subject="hello"				//mail subject
/>
<SMTPConfig
Index="1"
ToEmail="root@192.168.88.8"
CcEmail=""
Subject="alarm report"
/>
<SMTPConfig
Index="2"
ToEmail="root@192.168.88.8"
CcEmail="root@192.168.88.8"
Subject="hello"
/>
</SMTPList>
</ServerConfig>

Modify FTP & SMTP related configuration (command 420)
#define CMD_SET_SERVER_CONFIG			(CMD_SERVER_CONFIG_BASE + 20)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_SERVER_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<ServerConfig>
<FTPList>
<FTPConfig
Index="0" 			 //0 means the FTP configuration for uploading alarm ServerIP="192.168.88.172"  		//ftp server address
ServerPort="21"            		//ftp server port
Username="vss_55008866"    		//ftp username
Password="755008866b0a62c24"  	//ftp password
FilePath="1"   				//ftp server path
FileSize="0"  	 			//this property is temporarily meaningless
/>
<FTPConfig
Index="1"				//1 means the FTP configuration for backuping log
ServerIP="192.168.88.138"  
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
<FTPConfig
Index="2"			//2 means the FTP configuration for backuping configure
ServerIP="192.168.1.1"
ServerPort="21"
Username="user1"
Password="pas1"
FilePath="filepath1"
FileSize="1000"
/>
<FTPConfig
Index="3"			//3 means the FTP configuration for updating
ServerIP="192.168.88.138"
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
</FTPList>
<SMTPList
ServerIP="192.168.88.8"		//SMTP server IP
ServerPort="25"			//SMTP server port
Auth="1"					// need authentication or not, 0 means no, 1 means yes
Username="root@192.168.88.8"	//authentication user account
Password="123456"				//authentication password
FromEmail="root@192.168.88.8"	//show account
>
<SMTPConfig
Index="0"			//0 means alarm upload, 1 means log backup, 2 means configuration backup
ToEmail="root@192.168.88.8"		//receive mail address
CcEmail="root@192.168.88.8"      //CC mail address
Subject="hello"				//mail subject
/>
<SMTPConfig
Index="1"
ToEmail="root@192.168.88.8"
CcEmail=""
Subject="alarm report"
/>
<SMTPConfig
Index="2"
ToEmail="root@192.168.88.8"
CcEmail="root@192.168.88.8"
Subject="hello"
/>
</SMTPList>
</ServerConfig>

Read the FTP configuration (command 401)
#define CMD_GET_SERVER_FTP_CONFIG		(CMD_SERVER_CONFIG_BASE + 1)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_SERVER_FTP_CONFIG,0,"",0,0);

Return XML content as follows:

<FTPList>
<FTPConfig
Index="0" 			 //0 means the FTP configuration for uploading alarm
ServerIP="192.168.88.172"  		// ftp server IP
ServerPort="21"            		// ftp server port
Username="vss_55008866"    		// ftp username
Password="755008866b0a62c24"  	//ftp password
FilePath="1"   				//ftp server path
FileSize="0"  	 			//this property is temporarity meaningless
/>
<FTPConfig
Index="1"				//1 means the FTP configuration for backuping log
ServerIP="192.168.88.138"  
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
<FTPConfig
Index="2"			//2 means the FTP configuration for backuping configure
ServerIP="192.168.1.1"
ServerPort="21"
Username="user1"
Password="pas1"
FilePath="filepath1"
FileSize="1000"
/>
<FTPConfig
Index="3"			//3 means the FTP configuration for updating
ServerIP="192.168.88.138"
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
</FTPList>

Modify the FTP configuration (command 421)
#define CMD_SET_SERVER_FTP_CONFIG		(CMD_SERVER_CONFIG_BASE + 21)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_SERVER_FTP_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding content are as follows:

<FTPList>
<FTPConfig
Index="0" 			 //0 means the FTP configuration for uploading alarm
ServerIP="192.168.88.172"  		//ftp server IP
ServerPort="21"            		//ftp servee port
Username="vss_55008866"    		//ftp username
Password="755008866b0a62c24"  	//ftp password
FilePath="1"   				//ftp server path
FileSize="0"  	 			//this property is temporarily meaningless
/>
<FTPConfig
Index="1"				//1 means the FTP configuration for backuping log
ServerIP="192.168.88.138"  
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
<FTPConfig
Index="2"			//2 means the FTP configuration for backuping configure
ServerIP="192.168.1.1"
ServerPort="21"
Username="user1"
Password="pas1"
FilePath="filepath1"
FileSize="1000"
/>
<FTPConfig
Index="3"			//3 means the FTP configuration for updating
ServerIP="192.168.88.138"
ServerPort="21"
Username="ling"
Password="123456"
FilePath="alarm"
FileSize="1000"
/>
</FTPList>

Read the SMTP configuration (command 402)
#define CMD_GET_SERVER_SMTP_CONFIG		(CMD_SERVER_CONFIG_BASE + 2)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_SERVER_SMTP_CONFIG,0,"",0,0);

Return XML content as follows:

<SMTPList
ServerIP="192.168.88.8"		//SMTP server IP
ServerPort="25"			//SMTP server port
Auth="1"					// need authentication or not, 0 means no, 1 means yes
Username="root@192.168.88.8"	//authentication user account
Password="123456"				//authentication password
FromEmail="root@192.168.88.8"	//show account
>
<SMTPConfig
Index="0"			//0 means alarm upload, 1 means log backup, 2 means configuration backup
ToEmail="root@192.168.88.8"		//receive mail address
CcEmail="root@192.168.88.8"      //CC mail address
Subject="hello"				//mail subject
/>
<SMTPConfig
Index="1"
ToEmail="root@192.168.88.8"
CcEmail=""
Subject="alarm report"
/>
<SMTPConfig
Index="2"
ToEmail="root@192.168.88.8"
CcEmail="root@192.168.88.8"
Subject="hello"
/>
</SMTPList>

Modify the SMTP configuration (command 422)
#define CMD_SET_SERVER_SMTP_CONFIG		(CMD_SERVER_CONFIG_BASE + 22)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_SERVER_SMTP_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding content are as follows:

<SMTPList
ServerIP="192.168.88.8"		//SMTP server IP
ServerPort="25"			//SMTP server port
Auth="1"					// need authentication or not, 0 means no, 1 means yes
Username="root@192.168.88.8"	//authentication user account
Password="123456"				//authentication password
FromEmail="root@192.168.88.8"	//show account
>
<SMTPConfig
Index="0"			//0 means alarm upload, 1 means log backup, 2 means configuration backup
ToEmail="root@192.168.88.8"		//receive mail address
CcEmail="root@192.168.88.8"      //CC mail address
Subject="hello"				//mail subject
/>
<SMTPConfig
Index="1"
ToEmail="root@192.168.88.8"
CcEmail=""
Subject="alarm report"
/>
<SMTPConfig
Index="2"
ToEmail="root@192.168.88.8"
CcEmail="root@192.168.88.8"
Subject="hello"
/>
</SMTPList>
6. Media parameter setup
Mainly include audio and video capture, audio and video encode, OSD setup and so on, use micro definition as follows:

//media config cmd
#define CMD_MEDIA_CONFIG_BASE			500
#define CMD_GET_MEDIA_CONFIG			    (CMD_MEDIA_CONFIG_BASE + 0)
#define CMD_GET_MEDIA_VIDEO_CONFIG		(CMD_MEDIA_CONFIG_BASE + 1)
#define CMD_GET_MEDIA_AUDIO_CONFIG		(CMD_MEDIA_CONFIG_BASE + 2)
#define CMD_SET_MEDIA_CONFIG			    (CMD_MEDIA_CONFIG_BASE + 20)
#define CMD_SET_MEDIA_VIDEO_ENCODE		(CMD_MEDIA_CONFIG_BASE + 23)
#define CMD_SET_MEDIA_VIDEO_CAPTURE	(CMD_MEDIA_CONFIG_BASE + 24)
#define CMD_SET_MEDIA_VIDEO_OSD			(CMD_MEDIA_CONFIG_BASE + 25)
#define CMD_SET_MEDIA_VIDEO_JPEG		    (CMD_MEDIA_CONFIG_BASE + 26)
#define CMD_SET_MEDIA_AUDIO_CAPTURE	(CMD_MEDIA_CONFIG_BASE + 27)
#define CMD_SET_MEDIA_AUDIO_ENCODE		(CMD_MEDIA_CONFIG_BASE + 28)
#define CMD_SET_PRIVACY_CONFIG           (CMD_MEDIA_CONFIG_BASE + 29)

#define CMD_MEDIA_CONFIG_LAST			(CMD_MEDIA_CONFIG_BASE + 29)

Read media configuration parameter (command 500)
#define CMD_MEDIA_CONFIG_BASE			500

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_MEDIA_CONFIG_BASE,0,"",0,0);

Return XML content as follows:

<MediaConfig>
<Video>
<Capture			//video capture
Brightness="128"	//Brightness 0-255
Contrast="128"	//Contrast 0-255
Saturation="128"	//Saturation 0-255
Sharpness="128"   //Sharpness 0-255
DayNight="1"		//DayNight or not, 1 is day mode, 0 is night mode
WhiteBalance="0"	//WhiteBalance,0 means auto, 1 means in door, 2 means out door
BackLight="128"	//BackLight 0-255
Switch2A="1"		//enable Switch2A or not, 1 means yes, 0 means no
BinningSkip="0"	// BinningSkip, 0 means Binning, 1 means Skip
TVSystem="1"		//TVSystem, 0 means 60HZ, 1 means 50HZ
HFlip="0"			//enable HFlip or not, 1 means yes, 0 means no
VFlip="0"			//enable VFlip or not, 1 means yes, 0 means no
TNF="0"			    //reserved
SNF="0"            //reserved
VSTAB="0"         //reserved
LDC="0"            //reserved
FD="0"             //reserved 
IrcutMode="0"		//IrcutMode, 0 means auto, 1 means day-night mode, 2 means passive, 3 means manual
IrcutSensitivity="50"	//when ircutmode is auto, this value indicates sensitivity
IrcutNightStartTime="18:00:00"	//night start-time, when the ending-time is smaller than starting-time, express acrossed one day, such as this setting means that 6:00 in the night to 8:00 in the morning the next day
IrcutNightEndTime="08:00:00"	//night end-time
/>
<Encode>
<EncodeConfig			//video encode
Stream="1"			//1 means main stream, 2 means sub stream
Resolution="960P"		//Resolution
EncodeFormat="H264"	//EncodeFormat
BitRateControl="CBR"	//BitRateContro, support CBR, VBR, CVBR
Initquant="100"		//I Frame Interval
BitRate="4000"		//BitRate, different device has different value
FrameRate="25"		//FrameRate, support 1-30
/>
<EncodeConfig
Stream="2"
Resolution="480X270"
EncodeFormat="H264"
BitRateControl="CBR"
Initquant="100"
BitRate="300"
FrameRate="25"
/>
<AdvanceEncodeConfig      //video encode advanced parameters setting
EncodeProfile="0"          //Profile setting: 0 means disable base profile encode, 1 means enable base profile encode
WDRMode="0"            //reserved
WDRStartTime="00:00:00"   // reserved
WDREndTime="00:00:00"   // reserved
/>
</Encode>
<JpegConfig
Enable="1"	//enable picture capture or not
Stream="0"	//the stream of capture, 0 means main stream, 1 means sub stream
Quality="80"	//picture quality 20-100
Framerate="2" //capture speed, how many pictured need to be captured every second, you can choose one or two
/>
<Overlay
Enable="1"
Transparency="0"
>
<TimeOverlay	
PosX="0"	//0 means left, 1 means right
PosY="0" //0 means top, 1 means bottom
Format="yyyy-mm-dd hh:mm:ss" //time show format, the supportting format are yyyy-mm-dd hh:mm:ss, yyyy/mm/dd hh:mm:ss, yy-mm-dd hh:mm:ss, yy/mm/dd hh:mm:ss, hh:mm:ss dd/mm/yyyy, hh:mm:ss dd-mm-yyyy, hh:mm:ss mm/dd/yyyy, hh:mm:ss mm-dd-yyyy
/>
<TitleOverlay
PosX="0" //0 means left, 1 means right
PosY="1" //0 menas top, 1 means bottom
Title="5433384647"		//Characters are converted to ASCII code 16 hexadecimal form

/>
</Overlay>
<Mask>// privacy mask
<MainStream // main stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
<SubStream // sub stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
</Mask>
</Video>
<Audio>
<Capture
Volume="25"	//capture volume, 0-100
/>
<Encode
Enable="1"			//enable video encode or not
SampleRate="16000"		//SampleRate
EncodeType="AAC"		//EncodeType, support AAC, G711
BitRate="16000"		//BitRate
/>
</Audio>
</MediaConfig>

Read video parameter configuration (command 501)
#define CMD_GET_MEDIA_VIDEO_CONFIG		(CMD_MEDIA_CONFIG_BASE + 1)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_MEDIA_VIDEO_CONFIG,0,"",0,0);

Reture XML contents as follows:

<Video>
<Capture			// video capture
Brightness="128"	// Brightness 0-255
Contrast="128"	// Contrast 0-255
Saturation="128"	// Saturation 0-255
Sharpness="128"   // Sharpness 0-255
DayNight="1"		// DayNight or not, 1 is day mode, 0 is night mode
WhiteBalance="0"	// WhiteBalance,0 means auto, 1 means in door, 2 means out door
BackLight="128"	// BackLight 0-255
Switch2A="1"		// enable Switch2A or not, 1 means yes, 0 means no
BinningSkip="0"	// BinningSkip, 0 means Binning, 1 means Skip
TVSystem="1"		// TVSystem, 0 means 60HZ, 1 means 50HZ
HFlip="0"			// enable HFlip or not, 1 means yes, 0 means no
VFlip="0"			// enable VFlip or not, 1 means yes, 0 means no
TNF="0"			    //reserved
SNF="0"            //reserved
VSTAB="0"         //reserved
LDC="0"           //reserved
FD="0"            //reserved
IrcutMode="0"		//IrcutMode, 0 means auto, 1 means day-night mode, 2 means passive, 3 means manual
IrcutSensitivity="50"	//when ircutmode is auto, this value indicates sensitivity
IrcutNightStartTime="18:00:00"	//night start-time, when the ending-time is smaller than starting-time, express acrossed one day, such as this setting means that 6:00 in the night to 8:00 in the morning the next day
IrcutNightEndTime="08:00:00"	// night end-time 
/>
<Encode>
<EncodeConfig			// video encode
Stream="1"			// 1 means main stream, 2 means sub stream
Resolution="960P"		// Resolution
EncodeFormat="H264"	// EncodeFormat
BitRateControl="CBR"	// BitRateControl, support CBR, VBR, CVBR
Initquant="100"		// I Frame Interval
BitRate="4000"		// BitRate, different device has different value
FrameRate="25"		// FrameRate, support 1-30
/>
<EncodeConfig
Stream="2"
Resolution="480X270"
EncodeFormat="H264"
BitRateControl="CBR"
Initquant="100"
BitRate="300"
FrameRate="25"
/>
<AdvanceEncodeConfig      //video encode advanced parameters setting
EncodeProfile="0"          //Profile setting: 0 means disable base profile encode, 1 means enable base profile encode
WDRMode="0"            //reserved
WDRStartTime="00:00:00"   // reserved
WDREndTime="00:00:00"   // reserved
/>
</Encode>
<JpegConfig
Enable="1"	// enable picture capture or not
Stream="0"	// the stream of capture, 0 means main stream, 1 means sub stream 
Quality="80"	// picture quality 20-100
Framerate="2" // capture speed, how many pictures need to be captured every second, you can choose one or two
/>
<Overlay
Enable="1"
Transparency="0"
>
<TimeOverlay	
PosX="0"	//0 means left, 1 means right
PosY="0" //0 means top, 1 means bottom
Format="yyyy-mm-dd hh:mm:ss" // time show format, the supportting format are yyyy-mm-dd hh:mm:ss, yyyy/mm/dd hh:mm:ss, yy-mm-dd hh:mm:ss, yy/mm/dd hh:mm:ss, hh:mm:ss dd/mm/yyyy, hh:mm:ss dd-mm-yyyy, hh:mm:ss mm/dd/yyyy, hh:mm:ss mm-dd-yyyy
/>
<TitleOverlay
PosX="0" //0 means left, 1 means right
PosY="1" //0 menas top, 1 means bottom
Title="5433384647"		// Characters are converted to ASCII code 16 hexadecimal form
/>
</Overlay>
<Mask>// privacy mask
<MainStream // main stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
<SubStream // sub stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
</Mask>
</Video>


Read audio parameter configuration (command 502)
#define CMD_GET_MEDIA_AUDIO_CONFIG		(CMD_MEDIA_CONFIG_BASE + 2)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_MEDIA_AUDIO_CONFIG,0,"",0,0);

Return XML contents as follows:

<Audio>
<Capture
Volume="25"	// capture volume, 0-100
/>
<Encode
Enable="1"			// enable video encode or not
SampleRate="16000"		// Samplerate
EncodeType="AAC"		// EncodeType, support AAC, G711
BitRate="16000"		// BitRate
/>
</Audio>
Modify media parameter configuration (command 520)
#define CMD_SET_MEDIA_CONFIG			(CMD_MEDIA_CONFIG_BASE + 20)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<MediaConfig>
<Video>
<Capture			//video capture
Brightness="128"	//Brightness 0-255
Contrast="128"	//Contrast 0-255
Saturation="128"	//Saturation 0-255
Sharpness="128"   //Sharpness 0-255
DayNight="1"		//DayNight or not, 1 is day mode, 0 is night mode
WhiteBalance="0"	//WhiteBalance,0 means auto, 1 means in door, 2 means out door
BackLight="128"	//BackLight 0-255
Switch2A="1"		//enable Switch2A or not, 1 means yes, 0 means no
BinningSkip="0"	//BinningSkip, 0 means Binning, 1 means Skip
TVSystem="1"		//TVSystem, 0 means 60HZ, 1 means 50HZ
HFlip="0"			//enable HFlip or not, 1 means yes, 0 means no
VFlip="0"			//enable VFlip or not, 1 means yes, 0 means no
TNF="0"			    //reserved
SNF="0"            //reserved
VSTAB="0"         //reserved
LDC="0"           //reserved
FD="0"             //reserved
IrcutMode="0"			//IrcutMode, 0 means auto, 1 means day-night mode, 2 means passive, 3 means manual
IrcutSensitivity="50"	//when ircutmode is auto, this value indicates sensitivity
IrcutNightStartTime="18:00:00"	//night start-time, when the ending-time is smaller than starting-time, express acrossed one day, such as this setting means that 6:00 in the night to 8:00 in the morning the next day
IrcutNightEndTime="08:00:00"	//night end-time
/>
<Encode>
<EncodeConfig			//video encode
Stream="1"			//1 means main stream, 2 means sub stream
Resolution="960P"		//Resolution
EncodeFormat="H264"	//EncodeFormat
BitRateControl="CBR"	//BitRateControl, support CBR, VBR, CVBR
Initquant="100"		//I Frame Interval
BitRate="4000"		//BitRate, different device has different value
FrameRate="25"		//FrameRate, support 1-30
/>
<EncodeConfig
Stream="2"
Resolution="480X270"
EncodeFormat="H264"
BitRateControl="CBR"
Initquant="100"
BitRate="300"
FrameRate="25"
/>
<AdvanceEncodeConfig      //video encode advanced parameters setting
EncodeProfile="0"          //Profile setting: 0 means disable base profile encode, 1 means enable base profile encode
WDRMode="0"            //reserved
WDRStartTime="00:00:00"   // reserved
WDREndTime="00:00:00"   // reserved
/>
</Encode>
<JpegConfig
Enable="1"	//enable picture capture or not
Stream="0"	//the stream of capture, 0 means main stream, 1 means sub stream
Quality="80"	//picture quality 20-100
Framerate="2" //capture speed, how many pictures need to be captured every second, you can choose one or two
/>
<Overlay
Enable="1"
Transparency="0"
>
<TimeOverlay	
PosX="0"	//0 means left, 1 means right
PosY="0" //0 means top, 1 means bottom
Format="yyyy-mm-dd hh:mm:ss" // time show format, the supportting format are yyyy-mm-dd hh:mm:ss, yyyy/mm/dd hh:mm:ss, yy-mm-dd hh:mm:ss, yy/mm/dd hh:mm:ss, hh:mm:ss dd/mm/yyyy, hh:mm:ss dd-mm-yyyy, hh:mm:ss mm/dd/yyyy, hh:mm:ss mm-dd-yyyy
/>
<TitleOverlay
PosX="0" //0 means left, 1 means right
PosY="1" //0 menas top, 1 means bottom
Title="5433384647"		//Characters are converted to ASCII code 16 hexadecimal form
/>
</Overlay>
<Mask>// privacy mask
<MainStream // main stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
<SubStream // sub stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
</Mask>
</Video>
<Audio>
<Capture
Volume="25"	//capture volume, 0-100
/>
<Encode
Enable="1"			//enable video encode or not
SampleRate="16000"	//SampleRate
EncodeType="AAC"	//EncodeType, support AAC, G711
BitRate="16000"		//BitRate
/>
</Audio>
</MediaConfig>

Note: Use command 520 to modify media configuration at one time need to reboot device to take effect, if want to take effect immediately, please use the following separated command.


Modify video parameter configuration (command 523)
#define CMD_SET_MEDIA_VIDEO_ENCODE		(CMD_MEDIA_CONFIG_BASE + 23)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_VIDEO_ENCODE,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<Encode>
<EncodeConfig			// video encode
Stream="1"			// 1 means main stream, 2 means sub stream
Resolution="960P"		// Resolution
EncodeFormat="H264"	// EncodeFormat
BitRateControl="CBR"	// BitRateControl, support CBR, VBR, CVBR
Initquant="100"		// I Frame Interval
BitRate="4000"		// Bitrate, different device has different value
FrameRate="25"		// Framerate, support 1-30
/>
<EncodeConfig
Stream="2"
Resolution="480X270"
EncodeFormat="H264"
BitRateControl="CBR"
Initquant="100"
BitRate="300"
FrameRate="25"
/>
<AdvanceEncodeConfig      //video encode advanced parameters setting
EncodeProfile="0"          //Profile setting: 0 means disable base profile encode, 1 means enable base profile encode
WDRMode="0"            //reserved
WDRStartTime="00:00:00"   // reserved
WDREndTime="00:00:00"   // reserved
/>
</Encode>


Modify video parameter configuration (command 524)
#define CMD_SET_MEDIA_VIDEO_CAPTURE		(CMD_MEDIA_CONFIG_BASE + 24)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_VIDEO_CAPTURE,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<Capture			// video capture
Brightness="128"	// Brightness 0-255
Contrast="128"	// Contrast 0-255
Saturation="128"	// Saturation 0-255
Sharpness="128"   // Sharpness 0-255
DayNight="1"		// DayNight or not, 1 is day mode, 0 is night mode
WhiteBalance="0"	// WhiteBalance,0 means auto, 1 means in door, 2 means out door
BackLight="128"	// BackLight 0-255
Switch2A="1"		// enable Switch2A or not, 1 means yes, 0 means no
BinningSkip="0"	// BinningSkip, 0 means Binning, 1 means Skip
TVSystem="1"		// TVSystem, 0 means 60HZ, 1 means 50HZ
HFlip="0"			// enable HFlip or not, 1 means yes, 0 means no
VFlip="0"			// enable VFlip or not, 1 means yes, 0 means no
TNF="0"			    //reserved
SNF="0"              //reserved
VSTAB="0"           //reserved
LDC="0"              //reserved
FD="0"                //reserved
IrcutMode="0"		// IrcutMode, 0 means auto, 1 means day-night mode, 2 means passive, 3 means manual
IrcutSensitivity="50"	// when ircutmode is auto, this value indicates sensitivity
IrcutNightStartTime="18:00:00"	// night start-time, when the ending-time is smaller than starting-time, express acrossed one day, such as this setting means that 6:00 in the night to 8:00 in the morning the next day
IrcutNightEndTime="08:00:00"	// night end-time
/>

Modify time title parameter configuration (command 525)
#define CMD_SET_MEDIA_VIDEO_OSD			(CMD_MEDIA_CONFIG_BASE + 25)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_VIDEO_OSD,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<Overlay
Enable="1"		//enable time title information show or not
Transparency="0"
>
<TimeOverlay	
PosX="0"	//0 means left, 1 means right
PosY="0" //0 means top, 1 means bottom
Format="yyyy-mm-dd hh:mm:ss" // time show format, the supportting format are yyyy-mm-dd hh:mm:ss, yyyy/mm/dd hh:mm:ss, yy-mm-dd hh:mm:ss, yy/mm/dd hh:mm:ss, hh:mm:ss dd/mm/yyyy, hh:mm:ss dd-mm-yyyy, hh:mm:ss mm/dd/yyyy, hh:mm:ss mm-dd-yyyy
/>
<TitleOverlay
PosX="0" //0 means left, 1 means right
PosY="1" //0 menas top, 1 means bottom
Title="5433384647"		// Characters are converted to ASCII code 16 hexadecimal form
/>
</Overlay>

Notice: PosX and PosY control the display content together, time and title must one in the top and another in the bottom, that is to say, their PosY can not the same.


Modify picture capture configuration (command 526)
#define CMD_SET_MEDIA_VIDEO_JPEG		    (CMD_MEDIA_CONFIG_BASE + 26)
Call Method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_VIDEO_JPEG,0,pXml,strlen(pXml));
The pXml corresponding contents are as follows:
<JpegConfig
Enable="1"	// enable picture capture or not
Stream="0"	// the stream of capture, 0 means main stream, 1 means sub stream 
Quality="80"	// picture quality 20-100
Framerate="2" // capture speed, how many pictures need to be captured every second, you can choose one or two
/>

Modify audio capture configuration (command 527)
#define CMD_SET_MEDIA_AUDIO_CAPTURE	(CMD_MEDIA_CONFIG_BASE + 27)
Call Method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_AUDIO_CAPTURE,0,pXml,strlen(pXml));
The pXml corresponding contents are as follows:
<Capture
Volume="25"	//capture volume, 0-100
/>

Modify audio encode configuration (command 528)
#define CMD_SET_MEDIA_AUDIO_ENCODE		(CMD_MEDIA_CONFIG_BASE + 28)
Call Method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIA_AUDIO_ENCODE,0,pXml,strlen(pXml));
The pXml corresponding contents are as follows:
<Encode
Enable="1"			//enable video encode or not
SampleRate="16000"	//SampleRate
EncodeType="AAC"	//EncodeType, support AAC, G711
BitRate="16000"		//BitRate
/>

Modify privacy mask (command 529)
#define CMD_SET_PRIVACY_CONFIG           (CMD_MEDIA_CONFIG_BASE + 29)
Call Method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_PRIVACY_CONFIG,0,pXml,strlen(pXml));
The pXml corresponding contents are as follows:
<Mask>// privacy mask
<MainStream // main stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
<SubStream // sub stream privacy area
Area1PosX="0"
Area1PosY="0"
Area1Width="0"
Area1Height="0"
Area2PosX="0"
Area2PosY="0"
Area2Width="0"
Area2Height="0"
Area3PosX="0"
Area3PosY="0"
Area3Width="0"
Area3Height="0"
Area4PosX="0"
Area4PosY="0"
Area4Width="0"
Area4Height="0"
/>
</Mask>

Note: Width and height value of privacy mask area can not exceed 1/2 of resolution value, otherwise it won’t take effect.

Read streaming media parameter (command 600)
#define CMD_MEDIASTREAM_CONFIG_BASE			600
#define CMD_GET_MEDIASTREAM_CONFIG			(CMD_MEDIASTREAM_CONFIG_BASE + 0)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_MEDIASTREAM_CONFIG,0,"",0,0);

Return XML:

<MediaStreamConfig>
<StreamAccess	
Auth="1"				//authentication or not, 1 means yes, 0 means no
VideoPort="554"		//video port
RTPOverRTSP="0"		//media access protocol, 1 means TCP, 0 means UDP
PTZPort="8091"		//PTZ control port
WEBPort="80"		//the port to access device Web configuration interface
/>
</MediaStreamConfig>

Modify streaming media parameter (command 620) 
#define CMD_SET_MEDIASTREAM_CONFIG			(CMD_MEDIASTREAM_CONFIG_BASE + 20)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIASTREAM_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<MediaStreamConfig>
<StreamAccess	
Auth="1"				// authentication or not, 1 means yes, 0 means no
VideoPort="554"		// video port
RTPOverRTSP="0"		// media access protocol, 1 means TCP, 0 means UDP
PTZPort="8091"		// PTZ control port
WEBPort="80"		// the port to access device Web configuration interface
/>
</MediaStreamConfig>

Read storage setup parameter (command 700)
#define CMD_RECORD_CONFIG_BASE				700
#define CMD_GET_RECORD_CONFIG				(CMD_RECORD_CONFIG_BASE + 0)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_RECORD_CONFIG,0,"",0,0);

Return XML:

<RecordConfig>
<Common			
LocalEnable="1"		// support local record or not, 1 means yes, 0 means no
StorageSequence="0"	// Storage sequence, 0 means automatically select, the others expressed in three digits, 1: SD1, 2: SD2, 3: USB, for example, 213 express in the order of SD2, SD1, USB, 321 express in the order of USB, SD2, SD1
RemoteEnable="0"		//support remote directory record or not, 1 means yes, 0 means no
MountParam=""		//mount parameter, only when it supports remote directory record this value has effective
StoragePolicy="FIFO"	//storage strategy, FIFO means delete the oldest files, STOP means stop when full
RecordFileSize="20"	//the record time for every file, the unit is minute, can choose 10, 20, 30
/>


<ScheduleRecord		//schedule record parameter
Stream="1"			//record stream, 1 means main stream, 2 means sub stream
FileFormat="AVI"		//record format, current only support AVI
MediaType="AV"	//media type, AV means video and audio, only the device with audio can support this option, VIDEO means only video
LocalStore="0"	//support local record or not, 1 means yes, 0 means no. only when support local record has effective, otherwise, must be 0
RemoteStore="0"	//use remote store or not, 1 means yes, 0 means no. only when support remote store has effective, otherwise, must be 0
>
<EnableTimeList>	//schedule record time setup, notice that when save it, must ensure that the time can not repeat
<Workday			//support more than one options
Day="7"				//0, 1, 2, 3, 4, 5, 6, 7, represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday
>
<TimeSpan			//in a Workday can have many Time Span
StartTime=" 0: 0: 0"	//start time
EndTime=" 7:59: 0"	//end time
/>
<TimeSpan
StartTime="18: 1: 0"	//start time
EndTime="24: 0: 0"	//end time
/>
</Workday>

</EnableTimeList>
</ScheduleRecord>


<MotionDetectRecord		//motion detect alarm record
Stream="1"				//record stream, 1 means main stream, 2 means sub stream
FileFormat="AVI"			// record format, current only support AVI
MediaType="AV"			// media type, AV means video and audio, only the device with audio can support this option, VIDEO means only video
PreRecordTime="5"		//prerecord time
RecordTime="100"			//record time
LocalStore="1"			// support local record or not, 1 means yes, 0 means no. only when support local record has effective, otherwise, must be 0
RemoteStore="0"			// use remote store or not, 1 means yes, 0 means no. only when support remote store has effective, otherwise, must be 0
FtpUpload="0"			//record file upload or not, 1 means yes, 0 means no. only when set FTP correct can upload
EmailUpload="0"			//after recording set mail or not, 1 means yes, 0 means no. only when set SMTP correct can set
/>
<MotionDetectCapture		//motion detect alarm capture
PreTakeTime="5"			//pre-capture time
TotalTakeTime="10"		//capture time, only when enable capture, this function has effective
LocalStore="0"			//enable local store or not
RemoteStore="0"			//enable remote store or not
FtpUpload="0"			//upload the picture to FTP or not
EmailUpload="0"			//set E-mail or not for picture
/>
<InputAlarmRecord		//IO alarm record
Stream="2"				//record stream, 1 means main stream, 2 means sub stream
FileFormat="AVI"			// record format, current only support AVI
MediaType="AV"			// media type, AV means video and audio, only the device with audio can support this option, VIDEO means only video
PreRecordTime="5"		// prerecord time
RecordTime="100"			// record time
LocalStore="1"			// support local record or not, 1 means yes, 0 means no. only when support local record has effective, otherwise, must be 0
RemoteStore="0"			// use remote store or not, 1 means yes, 0 means no. only when support remote store has effective, otherwise, must be 0
FtpUpload="0"			// record file upload or not, 1 means yes, 0 means no. only when set FTP correct can upload
EmailUpload="0"			// after recording set mail or not, 1 means yes, 0 means no. only when set SMTP correct can set
/>
<InputAlarmCapture		//IO alarm capture
PreTakeTime="5"			// pre-capture time
TotalTakeTime="10"		// capture time, only when enable capture, this function has effective
LocalStore="0"			// enable local store or not
RemoteStore="0"			// enable remote store or not
FtpUpload="0"			// upload the picture to FTP or not
EmailUpload="0"			// set E-mail or not for picture
/>
</RecordConfig>

Modify storage setup parameter (command 720) 
#define CMD_SET_RECORD_CONFIG				(CMD_RECORD_CONFIG_BASE + 20)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_MEDIASTREAM_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<RecordConfig>

<Common			
LocalEnable="1"		// support local record or not, 1 means yes, 0 means no
StorageSequence="0"	// Storage sequence, 0 means automatically select, the others expressed in three digits, 1: SD1, 2: SD2, 3: USB, for example, 213 express in the order of SD2, SD1, USB, 321 express in the order of USB, SD2, SD1
RemoteEnable="0"		// support remote directory record or not, 1 means yes, 0 means no
MountParam=""		// mount parameter, only when it supports remote directory record this value has effective
StoragePolicy="FIFO"	// storage strategy, FIFO means delete the oldest files, STOP means stop when full
RecordFileSize="20"	// the record time for every file, the unit is minute, can choose 10, 20, 30
/>


<ScheduleRecord		// schedule record parameter
Stream="1"			// record stream, 1 means main stream, 2 means sub stream
FileFormat="AVI"		// record format, current only support AVI
MediaType="AV"		// media type, AV means video and audio, only the device with audio can support this option, VIDEO means only video
LocalStore="0"		// support local record or not, 1 means yes, 0 means no. only when support local record has effective, otherwise, must be 0
RemoteStore="0"		// use remote store or not, 1 means yes, 0 means no. only when support remote store has effective, otherwise, must be 0
>
<EnableTimeList>		// schedule record time setup, notice that when save it, must ensure that the time can not repeat
<Workday			// support more than one options
Day="7"				//0, 1, 2, 3, 4, 5, 6, 7, represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday
>
<TimeSpan			// in a Workday can have many Time Span
StartTime=" 0: 0: 0"	// start time
EndTime=" 7:59: 0"	// end time
/>
<TimeSpan
StartTime="18: 1: 0"	// start time
EndTime="24: 0: 0"	// end time
/>
</Workday>

</EnableTimeList>
</ScheduleRecord>


<MotionDetectRecord		// motion detect alarm record
Stream="1"				// record stream, 1 means main stream, 2 means sub stream
FileFormat="AVI"			// record format, current only support AVI
MediaType="AV"			// media type, AV means video and audio, only the device with audio can support this option, VIDEO means only video
PreRecordTime="5"		// prerecord time
RecordTime="100"			// record time
LocalStore="1"			// support local record or not, 1 means yes, 0 means no. only when support local record has effective, otherwise, must be 0
RemoteStore="0"			// use remote store or not, 1 means yes, 0 means no. only when support remote store has effective, otherwise, must be 0
FtpUpload="0"			// record file upload or not, 1 means yes, 0 means no. only when set FTP correct can upload
EmailUpload="0"			// after recording set mail or not, 1 means yes, 0 means no. only when set SMTP correct can set
/>
<MotionDetectCapture		// motion detect alarm capture
PreTakeTime="5"			// pre-capture time
TotalTakeTime="10"		// capture time, only when enable capture, this function has effective
LocalStore="0"			// enable local store or not
RemoteStore="0"			// enable remote store or not
FtpUpload="0"			// upload the picture to FTP or not
EmailUpload="0"			// set E-mail or not for picture
/>
<InputAlarmRecord		// IO alarm record
Stream="2"				// record stream, 1 means main stream, 2 means sub stream
FileFormat="AVI"			// record format, current only support AVI
MediaType="AV"			// media type, AV means video and audio, only the device with audio can support this option, VIDEO means only video
PreRecordTime="5"		// prerecord time
RecordTime="100"			// record time
LocalStore="1"			// support local record or not, 1 means yes, 0 means no. only when support local record has effective, otherwise, must be 0
RemoteStore="0"			// use remote store or not, 1 means yes, 0 means no. only when support remote store has effective, otherwise, must be 0
FtpUpload="0"			// record file upload or not, 1 means yes, 0 means no. only when set FTP correct can upload
EmailUpload="0"			// after recording set mail or not, 1 means yes, 0 means no. only when set SMTP correct can set
/>
<InputAlarmCapture		// IO alarm capture
PreTakeTime="5"			// pre-capture time
TotalTakeTime="10"		// capture time, only when enable capture, this function has effective
LocalStore="0"			// enable local store or not
RemoteStore="0"			// enable remote store or not
FtpUpload="0"			// upload the picture to FTP or not
EmailUpload="0"			// set E-mail or not for picture
/>
</RecordConfig>

7. Alarm setup command
#define CMD_ALARM_CONFIG_BASE				800

Read alarm setting parameter (command 800)
#define CMD_ALARM_CONFIG_BASE				800
#define CMD_GET_ALARM_CONFIG				(CMD_ALARM_CONFIG_BASE + 0)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_ALARM_CONFIG,0,"",0,0);

Return XML:

<AlarmConfig>
<InputAlarm>
<AlarmChannel	
PortIndex="1"					//the number of IO input port, only one current, the number is 1
ChannelType="alarmoutput1"	//the name of input port, only one current, that is alarmoutput1
TriggerType="HIGH-LOW"		// Trigger type
Enable="1"					//enable or not
>
<EnableTimeList>	//the time can not overlap
<Workday	//workday, there can be multiple
Day="7"		//0, 1, 2, 3, 4, 5, 6, 7, represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday
>
<TimeSpan		//In the same workday, there can be multiple
StartTime=" 0: 0: 0"	//start time
EndTime="24: 0: 0"	//end time
/>
</Workday>
</EnableTimeList>

<AlarmAction>
<AlarmOutputAction	//alarm output
Enable="1"			//enable or not, 1 means yes, 0 means no
PortIndex="1"			//the number of output port
ChannelType="alarmoutput1"	//the name of output port
TriggerType="HIGH"			// the type of output
Duration="10"					// Duration, 0~60, 0 means alarm all the time
/>
<PTZAction
Enable="0"					// PTZAction, does not support currently, so its value is 0
ActionType="PositionLoop"		// PTZAction type, does not support currently, so its value is always PositionLoop
>
<PositionLoop					// does not support currently
Interval="1"
Duration="10"					// Duration, 0~60, 0 means alarm all the time
>
<PTZPosition					//does not support currently
PositionIndex="1"
/>
<PTZPosition					//does not support currently
PositionIndex="2"
/>
</PositionLoop>
</PTZAction>
</AlarmAction>
</AlarmChannel>
</InputAlarm>
<MotionDetectAlarm			// Motion Detect Alarm
Enable="1"					//enable or not, 1 means yes, 0 means no
BlockCount="262147"			//layout program x=(262147 & 0xffff0000)>>16,y=(262147 & 0xffff)
BlockConfig="111111111111"	//divide the full-screen into small-box, the number is x by y, then order by row priority. 1 means enable, 0 means no
Sensitivity="100"				// Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
AlarmThreshold="1"			// Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
DayNightSwitch="1"			//enable night time or not
NightSensitivity="100"			// Night Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
NightAlarmThreshold="30"		// Night Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
NightStartTime=" 0: 0: 0"		//night start time, when end time is smaller than start time, means across a day
NightEndTime="24: 0: 0"		//night end time
>
<EnableTimeList>
<Workday		//workday
Day="7"			//0,1,2,3,4,5,6,7 represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday.
>
<TimeSpan
StartTime=" 8: 0: 0"	//start time
EndTime="18: 0: 0"	//end time
/>
</Workday>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm output action 
Enable="1"			//enable or not, 1 means yes, 0 means no
PortIndex="1"			//output port, currently fixed at 1
ChannelType="1"		// currently fixed at 1
TriggerType="HIGH"	//output method
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
<PTZAction		//this is no longer used
Enable="0"				
ActionType="PositionWalk"	
>
<PositionWalk		// this is no longer used
Interval="2"
WalkCount="1"
>
<PTZPosition		// this is no longer used
PositionIndex="1"
/>
<PTZPosition		// this is no longer used
PositionIndex="2"
/>
<PTZPosition		// this is no longer used
PositionIndex="3"
/>
</PositionWalk>
</PTZAction>
</AlarmAction>
</MotionDetectAlarm>
<VideoLostAlarm	// Video Lost Alarm
Enable="1"		//enable or not, 1 means yes, 0 means no
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm output action
Enable="0"			// enable or not, 1 means yes, 0 means no
PortIndex="0"			//output port, current is 0
ChannelType="0"		//output channel, current is 0
TriggerType="HIGH"	//output method, HIGH or LOW
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoLostAlarm>
<VideoCoverAlarm		// Video Cover Alarm, this is no longer used
Enable="1"			//enable or not
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="1"				// enable or not, 1 means yes, 0 means no
PortIndex="1"				// IO output port, current is 1
ChannelType="Alarm Bell"	// IO output channel, current is Alarm Bell
TriggerType="HIGH"		// IO output method, HIGH or LOW
Duration="60"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoCoverAlarm>
<StorageFullAlarm			// Storage Alarm
Enable="1"				// enable or not, 1 means yes, 0 means no
Threshold="95"			//alarm Threshold, value is from 50 to 100
>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="0"				// enable or not, 1 means yes, 0 means no
PortIndex="0"				// output port, current is 0
ChannelType="0"			// output channel, current is 0
TriggerType="HIGH"		// output method, HIGH or LOW
Duration="10"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</StorageFullAlarm>
</AlarmConfig>

Modify alarm setting parameter (command 820) 
#define CMD_SET_ALARM_CONFIG				(CMD_ALARM_CONFIG_BASE + 20)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_CONFIG,0,pXml,strlen (pXml));
The pXml corresponding contents are as follows:

<AlarmConfig>
<InputAlarm>
<AlarmChannel	
PortIndex="1"					// the number of IO input port, only one current, the number is 1
ChannelType="alarmoutput1"	// the name of input port, only one current, that is alarmoutput1
TriggerType="HIGH-LOW"		// Trigger Type
Enable="1"					// enable it or not
>
<EnableTimeList>	// the time can not overlap
<Workday	// workday, there can be multiple
Day="7"		//0, 1, 2, 3, 4, 5, 6, 7, represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday
>
<TimeSpan		// In the same workday, there can be multiple
StartTime=" 0: 0: 0"	// Start Time
EndTime="24: 0: 0"	// End Time
/>
</Workday>
</EnableTimeList>

<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="1"			// enable or not, 1 means yes, 0 means no
PortIndex="1"			// the number of output port
ChannelType="alarmoutput1"	// the name of output port
TriggerType="HIGH"			// the type of output
Duration="10"					// Duration, 0~60, 0 means alarm all the time
/>
<PTZAction
Enable="0"					// PTZ Action, does not support currently, so its value is 0
ActionType="PositionLoop"		// PTZ Action type, does not support currently, so its value is always PositionLoop
>
<PositionLoop					// does not support currently
Interval="1"
Duration="10"					// Duration, 0~60, 0 means alarm all the time
>
<PTZPosition					// does not support currently
PositionIndex="1"
/>
<PTZPosition					// does not support currently
PositionIndex="2"
/>
</PositionLoop>
</PTZAction>
</AlarmAction>
</AlarmChannel>
</InputAlarm>
<MotionDetectAlarm			// Motion Detect Alarm
Enable="1"					// enable or not, 1 means yes, 0 means no
BlockCount="262147"			// layout program x=(262147 & 0xffff0000)>>16,y=(262147 & 0xffff)
BlockConfig="111111111111"	// divide the full-screen into small-box, the number is x by y, then order by row priority. 1 means enable, 0 means no
Sensitivity="100"				// Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
AlarmThreshold="1"			// Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
DayNightSwitch="1"			// enable night time or not
NightSensitivity="100"			// Night Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
NightAlarmThreshold="30"		// Night Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
NightStartTime=" 0: 0: 0"		// night start time, when end time is smaller than start time, means across a day
NightEndTime="24: 0: 0"		// night end time
>
<EnableTimeList>
<Workday		// workday	
Day="7"			//0, 1, 2, 3, 4, 5, 6, 7 represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday.
>
<TimeSpan
StartTime=" 8: 0: 0"	// Start Time
EndTime="18: 0: 0"	// End Time
/>
</Workday>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm Output Action 
Enable="1"			// enable or not, 1 means yes, 0 means no
PortIndex="1"			// output port, currently fixed at 1
ChannelType="1"		// currently fixed at 1
TriggerType="HIGH"	// output method
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time

<PTZAction		// this is no longer used
Enable="0"				
ActionType="PositionWalk"	
>
<PositionWalk		// this is no longer used
Interval="2"
WalkCount="1"
>
<PTZPosition		// this is no longer used
PositionIndex="1"
/>
<PTZPosition		// this is no longer used
PositionIndex="2"
/>
<PTZPosition		// this is no longer used
PositionIndex="3"
/>
</PositionWalk>
</PTZAction>
</AlarmAction>
</MotionDetectAlarm>
<VideoLostAlarm	// Video Lost Alarm
Enable="1"		// enable or not, 1 means yes, 0 means no
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="0"			// enable or not, 1 means yes, 0 means no
PortIndex="0"			// output port, current is 0
ChannelType="0"		// output channel, current is 0
TriggerType="HIGH"	// output method, HIGH or LOW
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoLostAlarm>
<VideoCoverAlarm		// Video Cover Alarm, this is no longer used
Enable="1"			// enable or not
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="1"				// enable or not, 1 means yes, 0 means no
PortIndex="1"				// IO output port, current is 1
ChannelType="Alarm Bell"	// IO output channel, current is Alarm Bell
TriggerType="HIGH"		// IO output method, HIGH or LOW
Duration="60"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoCoverAlarm>
<StorageFullAlarm			// Storage Alarm
Enable="1"				// enable or not, 1 means yes, 0 means no
Threshold="95"			// alarm Threshold, value is from 50 to 100
>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="0"				// enable or not, 1 means yes, 0 means no
PortIndex="0"				// output port, current is 0
ChannelType="0"			// output channel, current is 0
TriggerType="HIGH"		// output method, HIGH or LOW
Duration="10"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</StorageFullAlarm>
</AlarmConfig>

Read IO input alarm parameter (command 801)

#define CMD_GET_ALARM_INPUT_CONFIG			(CMD_ALARM_CONFIG_BASE + 1)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_ALARM_INPUT_CONFIG,0,"",0,0);

Return XML:

<InputAlarm>
<AlarmChannel	
PortIndex="1"					// the number of IO input port, only one current, the number is 1
ChannelType="alarmoutput1"	// the name of input port, only one current, that is alarmoutput1
TriggerType="HIGH-LOW"		// Trigger Type
Enable="1"					// enable or not
>
<EnableTimeList>	// the time can not overlap
<Workday	// workday, there can be multiple
Day="7"		//0, 1, 2, 3, 4, 5, 6, 7, represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday
>
<TimeSpan		// In the same workday, there can be multiple
StartTime=" 0: 0: 0"	// Start Time
EndTime="24: 0: 0"	// End Time
/>
</Workday>
</EnableTimeList>

<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="1"			// enable or not, 1 means yes, 0 means no
PortIndex="1"			// the number of output port

ChannelType="alarmoutput1"	// the name of output port
TriggerType="HIGH"			// the type of output
Duration="10"					// Duration, 0~60, 0 means alarm all the time
/>
<PTZAction
Enable="0"					// PTZ Action, does not support currently, so its value is 0
ActionType="PositionLoop"		// PTZ Action type, does not support currently, its value is always PositionLoop
>
<PositionLoop					// does not support currently
Interval="1"
Duration="10"					// Duration, 0~60, 0 means alarm all the time
>
<PTZPosition					// does not support currently
PositionIndex="1"
/>
<PTZPosition					// does not support currently
PositionIndex="2"
/>
</PositionLoop>
</PTZAction>
</AlarmAction>
</AlarmChannel>
</InputAlarm>

Modify IO input alarm parameter (command 821)
#define CMD_SET_ALARM_INPUT_CONFIG			(CMD_ALARM_CONFIG_BASE + 21)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_INPUT_CONFIG ,0 ,pXml,strlen(pXml));

The pXml corresponding contents are as follows:

<InputAlarm>
<AlarmChannel	
PortIndex="1"					// the number of IO input port, only one current, the number is 1
ChannelType="alarmoutput1"	// the name of input port, only one current, that is alarmoutput1
TriggerType="HIGH-LOW"		// Trigger Type
Enable="1"					// enable or not
>
<EnableTimeList>	// the time can not overlap
<Workday	// workday, there can be multiple
Day="7"		//0, 1, 2, 3, 4, 5, 6, 7, represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday
>
<TimeSpan		// In the same workday, there can be multiple
StartTime=" 0: 0: 0"	// Start Time
EndTime="24: 0: 0"	// End Time
/>
</Workday>
</EnableTimeList>

<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="1"			// enable or not, 1 means yes, 0 means no
PortIndex="1"			// the number of output port
ChannelType="alarmoutput1"	// the name of output port
TriggerType="HIGH"			// the type of output
Duration="10"					// Duration, 0~60, 0 means alarm all the time
/>
<PTZAction
Enable="0"					// PTZ Action, does not support currently, so its value is always 0
ActionType="PositionLoop"		// PTZ Action type, does not support currently, so its value is always PositionLoop
>
<PositionLoop					// does not support currently
Interval="1"
Duration="10"					// Duration, 0~60, 0 means alarm all the time
>
<PTZPosition					// does not support currently
PositionIndex="1"
/>
<PTZPosition					// does not support currently
PositionIndex="2"
/>
</PositionLoop>
</PTZAction>
</AlarmAction>
</AlarmChannel>
</InputAlarm>

Read motion detect alarm parameter (command 802)

#define CMD_GET_ALARM_MOTIONDETECT_CONFIG		(CMD_ALARM_CONFIG_BASE + 2)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_ALARM_MOTIONDETECT_CONFIG,0,"",0,0);

Return XML:

<MotionDetectAlarm			// Motion Detect Alarm
Enable="1"					// enable or not, 1 means yes, 0 means no
BlockCount="262147"			// layout program x=(262147 & 0xffff0000)>>16,y=(262147 & 0xffff)
BlockConfig="111111111111"	// divide the full-screen into small-box, the number is x by y, then order by row priority. 1 means enable, 0 means no
Sensitivity="100"				// Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
AlarmThreshold="1"			// Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
DayNightSwitch="1"			// enable night time or not
NightSensitivity="100"			// Night Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
NightAlarmThreshold="30"		// Night Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
NightStartTime=" 0: 0: 0"		// night start time, when end time is smaller than start time, means across a day
NightEndTime="24: 0: 0"		// night end time
>
<EnableTimeList>
<Workday		// workday
Day="7"			//0,1,2,3,4,5,6,7 represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday.
>
<TimeSpan
StartTime=" 8: 0: 0"	// Start Time
EndTime="18: 0: 0"	// End Time
/>
</Workday>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="1"			// enable or not, 1 means yes, 0 means no
PortIndex="1"			// output port, currently fixed at 1
ChannelType="1"		// currently fixed at 1
TriggerType="HIGH"	// output method
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
<PTZAction		// this is no longer used
Enable="0"				
ActionType="PositionWalk"	
>
<PositionWalk		// this is no longer used
Interval="2"
WalkCount="1"
>
<PTZPosition		// this is no longer used
PositionIndex="1"
/>
<PTZPosition		// this is no longer used
PositionIndex="2"
/>
<PTZPosition		// this is no longer used
PositionIndex="3"
/>
</PositionWalk>
</PTZAction>
</AlarmAction>
</MotionDetectAlarm>

Modify motion detect alarm parameter (command 822)
#define CMD_SET_ALARM_MOTIONDETECT_CONFIG		(CMD_ALARM_CONFIG_BASE + 22)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_MOTIONDETECT_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<MotionDetectAlarm			// Motion Detect Alarm
Enable="1"					// enable or not, 1 means yes, 0 means no
BlockCount="262147"			// layout program x= (262147 & 0xffff0000)>>16, y= (262147 & 0xffff)
BlockConfig="111111111111"	// divide the full-screen into small-box, the number is x by y, then order by row priority. 1 means enable, 0 means no
Sensitivity="100"				// Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
AlarmThreshold="1"			// Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
DayNightSwitch="1"			// enable night time or not
NightSensitivity="100"			// Night Sensitivity, this value is bigger and more prone to alarm, its value from 1 to 100
NightAlarmThreshold="30"		// Night Alarm Threshold, this value is smaller and more prone to alarm, its value from 1 to 100
NightStartTime=" 0: 0: 0"		// night start time, when end time is smaller than start time, means across a day
NightEndTime="24: 0: 0"		// night end time
>
<EnableTimeList>
<Workday		// workday
Day="7"			//0, 1, 2, 3, 4, 5, 6, 7 represent Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, everyday.
>
<TimeSpan
StartTime=" 8: 0: 0"	// Start Time
EndTime="18: 0: 0"	// End Time
/>
</Workday>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="1"			// enable or not, 1 means yes, 0 means no
PortIndex="1"			// output port, currently fixed at 1
ChannelType="1"		// currently fixed at 1
TriggerType="HIGH"	// output method
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
<PTZAction		// this is no longer used
Enable="0"				
ActionType="PositionWalk"	
>
<PositionWalk		// this is no longer used
Interval="2"
WalkCount="1"
>
<PTZPosition		// this is no longer used
PositionIndex="1"
/>
<PTZPosition		// this is no longer used
PositionIndex="2"
/>
<PTZPosition		// this is no longer used
PositionIndex="3"
/>
</PositionWalk>
</PTZAction>
</AlarmAction>
</MotionDetectAlarm>

Read video lost alarm parameter (command 803)

#define CMD_GET_ALARM_VIDEOCOVER_CONFIG		(CMD_ALARM_CONFIG_BASE + 3)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_ALARM_VIDEOCOVER_CONFIG,0,"",0,0);

Return XML:

<VideoLostAlarm	// Video Lost Alarm
Enable="1"		// enable or not, 1 means yes, 0 means no
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="0"			// enable or not, 1 means yes, 0 means no
PortIndex="0"			// output port, current is 0
ChannelType="0"		// output channel, current is 0
TriggerType="HIGH"	// output method, HIGH or LOW
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoLostAlarm>

Notice:
	This option no longer used

Modify video lost alarm parameter (command 823)
#define CMD_SET_ALARM_VIDEOCOVER_CONFIG		(CMD_ALARM_CONFIG_BASE + 23)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_VIDEOCOVER_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<VideoLostAlarm	// Video Lost Alarm
Enable="1"		// enable or not, 1 means yes, 0 means no
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction	// Alarm Output Action
Enable="0"			// enable or not, 1 means yes, 0 means no
PortIndex="0"			// output port, current is 0
ChannelType="0"		// output channel, current is 0
TriggerType="HIGH"	// output method, HIGH or LOW
Duration="10"			// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time 
/>
</AlarmAction>
</VideoLostAlarm>

Notice:
	This option no longer used

Read video lost alarm parameter (command 804)

#define CMD_GET_ALARM_VIDEOLOST_CONFIG		(CMD_ALARM_CONFIG_BASE + 4)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_GET_ALARM_VIDEOLOST_CONFIG,0,"",0,0);

Return XML:

<VideoCoverAlarm		// Video Cover Alarm, this is no longer used
Enable="1"			// enable or not
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="1"				// enable or not, 1 means yes, 0 means no
PortIndex="1"				// IO output port, current is 1
ChannelType="Alarm Bell"	// IO output channel, current is Alarm Bell
TriggerType="HIGH"		// IO output method, HIGH or LOW
Duration="60"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoCoverAlarm>

Modify video lost alarm parameter (command 824)
#define CMD_SET_ALARM_VIDEOLOST_CONFIG		(CMD_ALARM_CONFIG_BASE + 24)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_VIDEOLOST_CONFIG,0,pXml,strlen(pXml));

The pXml corresponding contents are as follows:


<VideoCoverAlarm		// Video Cover Alarm, this is no longer used
Enable="1"			// enable or not
>
<EnableTimeList>
</EnableTimeList>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="1"				// enable or not, 1 means yes, 0 means no
PortIndex="1"				// IO output port, current is 1
ChannelType="Alarm Bell"	// IO output channel, current is Alarm Bell
TriggerType="HIGH"		// IO output method, HIGH or LOW
Duration="60"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</VideoCoverAlarm>

Read storage alarm patameter (command 805)

#define CMD_SET_ALARM_SF_CONFIG				(CMD_ALARM_CONFIG_BASE + 25)

Call method:

AJ_NETSDK_IPC_GetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_SF_CONFIG,0,"",0,0);

Return XML:

<StorageFullAlarm			// Storage Full Alarm
Enable="1"				// enable or not, 1 means yes, 0 means no
Threshold="95"			// alarm Threshold, value is from 50 to 100
>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="0"				// enable or not, 1 means yes, 0 means no
PortIndex="0"				// output port, current is 0
ChannelType="0"			// output channel, current is 0
TriggerType="HIGH"		// output method, HIGH or LOW
Duration="10"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</StorageFullAlarm>

Modify storage alarm patameter (command 825)
#define CMD_SET_ALARM_SF_CONFIG				(CMD_ALARM_CONFIG_BASE + 25)

Call method:

AJ_NETSDK_IPC_SetDVRConfig(m_nLastCmdId, CMD_SET_ALARM_SF_CONFIG,0,pXml,strlen (pXml));

The pXml corresponding contents are as follows:

<StorageFullAlarm			// Storage Full Alarm
Enable="1"				// enable or not, 1 means yes, 0 means no
Threshold="95"			// alarm Threshold, value is from 50 to 100
>
<AlarmAction>
<AlarmOutputAction		// Alarm Output Action
Enable="0"				// enable or not, 1 means yes, 0 means no
PortIndex="0"				// output port, current is 0
ChannelType="0"			// output channel, current is 0
TriggerType="HIGH"		// output method, HIGH or LOW
Duration="10"				// Duration, unit is second, value is from 0 to 60, 0 means alarm all the time
/>
</AlarmAction>
</StorageFullAlarm>

8. System control command
#define CMD_SYSTEM_MANAGE_BASE 1000

After called command AJ_NETSDK_IPC_SystemControl, there will receive a corresponding command in the callback function OnAuxResponse. The first bit in other cmdId or say cmdId&0xff000000, if it is 0 then means command send successfully, otherwise, means failure, and cmdId&0xffffff is a corresponding command value.

Read system information (command 1012)
#define CMD_SYSTEM_MANAGE_BASE 1000
#define CMD_GET_SYSTEM_VERSION_INFO 	(CMD_SYSTEM_MANAGE_BASE + 12)

Call method:

AJ_NETSDK_IPC_SystemControl (m_nLastCmdId, CMD_GET_SYSTEM_VERSION_INFO,0,"", pXml,0);

Return XML:
Linux 2.6.18_arm_v5t_le #1 PREEMPT Thu Nov 18 11:30:21 GMT+8 2010

Restore to default configuration (command 1002)
#define	 CMD_CONFIG_RESTORE			(CMD_SYSTEM_MANAGE_BASE + 2)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_CONFIG_RESTORE,0,””)

If return a wrong mark 0 means success


Modify system time (command 1005)
#define	 CMD_SET_SYSTEM_TIME			(CMD_SYSTEM_MANAGE_BASE + 5)

Call Method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_CONFIG_RESTORE,0,xmldata)
The format of xmldata:
	
<REQUEST_PARAM 
Time="20120424 17:45:01" 			//time format is yyyyMMdd HH:mm:ss 
TimeZone="4800"   // time zone, the formula of time zone a is (12+a)*60, a ranges from -12 to +12
/>


If return a wrong mark 0 means success

Note: 
	This control command takes effect only when time quartum is mannually modify time.

Restart system (command 1007)
#define CMD_SYSTEM_REBOOT			(CMD_SYSTEM_MANAGE_BASE + 7)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_SYSTEM_REBOOT,0,””)

If return a wrong mark 0, then express successfully

Notice:
	Recommend using AJ_NETSDK_IPC_RebootDVR

Receive storage information (command 1014)
#define CMD_GET_STORAGE_INFO 		(CMD_SYSTEM_MANAGE_BASE + 14)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_STORAGE_INFO,0,””)

Return Xml:

<RESPONSE_PARAM>
<DeviceInfo
DevName="sd1"	//maybe sd1, sd2 or usb, express differently storage device
Mounted="0"	// mounted or not
Total="0"		//The total storage space that can be used, if the number is 0 means that this device does not exist
Used="0"		//the size of used space
Free="0"		//the size of can be used space
Percent="0" 	//the percent of used space
/>
<DeviceInfo
DevName="sd2" 
Mounted="0"	// mounted or not
Total="0"		// The total storage space that can be used, if the number is 0 means that this device does not exist
Used="0"		// the size of used space
Free="0"		// the size of can be used space
Percent="0" 	// the percent of used space
 />
<DeviceInfo
DevName="usb" 
Mounted="0"	// mounted or not
Total="0"		// The total storage space that can be used, if the number is 0 means that this device does not exist
Used="0"		// the size of used space
Free="0"		// the size of can be used space
Percent="0" 	// the percent of used space
/>
</RESPONSE_PARAM>

Format front-end storage device (command 1017)
#define CMD_STORAGE_DEVICE_FORMAT	(CMD_SYSTEM_MANAGE_BASE + 17)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_STORAGE_DEVICE_FORMAT,0, devType)

devType maybe sd1,sd2,usb

If return a wrong mark 0, then express successfully

Unmount front-end storage device (command 1018)
#define CMD_STORAGE_DEVICE_UNMOUNT  	(CMD_SYSTEM_MANAGE_BASE + 18)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_STORAGE_DEVICE_UNMOUNT,0,devType)

devType maybe sd1,sd2,usb

If return a wrong mark 0, then express successfully

Receive device serial number information (command 1019)
#define 		CMD_GET_SERIALNUMBER		(CMD_SYSTEM_MANAGE_BASE + 19)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_SERIALNUMBER,0,””)

Return Xml:

<RESPONSE_PARAM SerialNumber="4756736557496768" />

The serial number is 475673655749676

Read system capacity set (command 1020)

#define CMD_GET_SYSTEMCONTROLSTRING	(CMD_SYSTEM_MANAGE_BASE + 20)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_SYSTEMCONTROLSTRING,0,””)

Return Xml:

<RESPONSE_PARAM SystemConfigString=" + audio_support + schedule_record + ftpemail_storage + picture_capture + ptz_control + gpio_input + gpio_output + zh_cn + en_us + zh_tw + front_replay + media_capabiltiy" />

audio_support 		//support audio
schedule_record 		//support schedule record
ftpemail_storage 		//support ftp and email storage
picture_capture 		//support capture
ptz_control 			//support ptz
gpio_input 			//support IO input
gpio_output 			//support IO output
zh_cn 				//if the device configuration interface support Chinese
en_us 				//if the device configuration interface support English
zh_tw 				//if the device configuration interface support Traditional Chinese
front_replay 			//support front-end online replay
media_capabiltiy		//query resolution the device support
wireless_accesspoint	//support WIFI as client function
wireless_station		//support WIFI as server function
network_storage		//support network storage
ptz_action			//support PTZ action
ircut_setting			//support IRCUT function
evdo_support			//support EVDO 3G function
	wcdma_support			//support WCDMA 3G function
	tdscdma_support		//support TDSCDMA 3G function

Device video file search (picture or video file) (command 1021)
#define CMD_GET_RECORD_FILE_LIST		(CMD_SYSTEM_MANAGE_BASE + 21)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_RECORD_FILE_LIST,0,searchxml)

The format of searchxml as follows:

<REQUEST_PARAM
RecordMode="MOTION"			//
StartTime="20090101 0:00:00"	//search start time
EndTime="20090102 0:00:00"		//search end time, notice that the start time to end time must less than 7 days
MediaType="PICTURE"			//
StreamIndex="1"				//1 means main stream, 2 means sub stream
MinSize="-1"					//search file more than, when it is -1, then has no limit, the unit is bit
MaxSize="-1"					//search file less than, when it is -1, then has no limit, the unit is bit
Page="1"						//search which page, when there are many pages, you can skip to any page by this button, every page show 20 records
/>

The possible value and meaning of Record Mode:
MANUAL: manual trigger record (can not support)
MOTION: motion detect alarm
SCHEDULE: schedual record
ALARM: IO alarm record
ALL:all types

The possible value and meaning of MediaType:
AUDIOVIDEO: audio and video
VIDEO: only video
AUDIO:only audio (can not support)
PICTURE: capture

Return Xml:
	
<RESPONSE_PARAM>
<RECORD_FILE
FilePath="/mnt/mmc0/motion/2009/04/01/103222-av-1.avi"		//file name
FileLength="14832236"									//file size
/>
<RECORD_FILE
FilePath="/mnt/mmc0/motion/2009/04/01/103107-av-1.avi"
FileLength="14463472"
/>
</RESPONSE_PARAM>




File upload (configuration file and update file) (command 1022)
#define	 CMD_UPLOAD_FILE				(CMD_SYSTEM_MANAGE_BASE + 22)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_UPLOAD_FILE,0,uploadxml)

The format of uploadxml as follows:

	<REQUEST_PARAM
 FileType = "/mnt/mmc0/motion/2009/04/01/103222-av-1.avi" 		//0 means configuration files, 1 means update files
 FilePath ="local file path" 	//choose local file path, notice the name of local file, if with special characters, then need XML escape, the special character maybe " , & and so on
/>

Notice:
	Suggest that do not use this command directly call AJ_NETSDK_IPC_Upgrade, AJ_NETSDK_IPC_SetConfigFile and other corresponding functions.

File download (command 1023)
#define CMD_DOWNLOAD_FILE			(CMD_SYSTEM_MANAGE_BASE + 23)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_DOWNLOAD_FILE,0,downloadxml)

The format of downloadxml as follows:

<REQUEST_PARAM
FileName = "/mnt/mmc0/motion/2009/04/01/103222-av-1.avi"		//the path of file that stored in device, return when searching file
StartPos="0"				//start download location, currently only be 0
/>

Notice:
	Suggest that do not use this command, directly call the provided download API function, AJ_NETSDK_IPC_GetFileByName and other corresponding functions.

Delete file (command 1024)
#define CMD_REMOVE_FILE				(CMD_SYSTEM_MANAGE_BASE + 24)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_REMOVE_FILE,0,removexml)

The removexml as follows:

<REQUEST_PARAM
FileName = "/mnt/mmc0/motion/2009/04/01/103222-av-1.avi"		// the path of file that stored in device, return when searching file
/>

Search log file (command 1025)
#define CMD_GET_LOGFILE_LIST		(CMD_SYSTEM_MANAGE_BASE + 25)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_LOGFILE_LIST,0, "")

The format of return XML as follows:

<RESPONSE_PARAM>
<LOG_FILE
FilePath="/mnt/nand/20090401.log"
/>
<LOG_FILE
FilePath="/mnt/nand/20010101.log"
/>
<LOG_FILE
FilePath="/mnt/nand/20001231.log"
/>
</RESPONSE_PARAM>

Read device type (command 1030)
#define CMD_GET_IPC_TYPE			(CMD_SYSTEM_MANAGE_BASE + 30)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_IPC_TYPE,0, "")

The format of return XML as follows:


<RESPONSE_PARAM 
IPC_Type="100"	//the value maybe 100, 101, 102, 103
/>

Enforce device generate key frame (only V2.0 firmware has) (command 1032)
#define CMD_SET_KEYFRAME (CMD_SYSTEM_MANAGE_BASE + 32)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_SET_KEYFRAME,0, Createiframxml)

The format of Createiframxml as follows:
<REQUEST_PARAM
Camera="0"	//fixed at 0
Stream="0"	//0 means main stream, 1 means sub stream
/>
Notice:
	Suggest that do not call this command directly, you can call AJ_NETSDK_IPC_CreateIFrame instead.

Read user storage data (only V2.0 firmware has) (command 1034)
#define CMD_GET_USER_DEV_DATA (CMD_SYSTEM_MANAGE_BASE + 34)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_GET_USER_DEV_DATA,0, Createiframxml)

The format of Createiframxml as follows:
<REQUEST_PARAM
Camera="0"
Stream="0"	//0 means main stream, 1 means sub stream
/>
Notice:
	You can call AJ_NETSDK_IPC_GetUserData directly to achieve this function

Set user storage data (only V2.0 firmware has) (command 1033)
#define CMD_SET_USER_DEV_DATA (CMD_SYSTEM_MANAGE_BASE + 33)

Call method:

AJ_NETSDK_IPC_SystemControl(m_nLastCmdId, CMD_SET_USER_DEV_DATA,0, Createiframxml)

The format of Createiframxml as follows:

<REQUEST_PARAM
UserDevData="010200001230123012301230123" //user storage data
/>

Suggest:
	Before save data, use sprintf (str,”%02x”, c); to transform those data to a string data first. When read again, transform back.
	You can call AJ_NETSDK_IPC_SetUserData directly to achieve this function. 

9. Related micro definition table

//system config cmd
#define CMD_SYSTEM_CONFIG_BASE		            200
#define CMD_GET_SYSTEM_CONFIG		                (CMD_SYSTEM_CONFIG_BASE + 0)
#define CMD_GET_SYSTEM_PTZ_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 1)
#define CMD_GET_SYSTEM_TIME_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 2)
#define CMD_GET_SYSTEM_USER_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 3)
#define CMD_GET_SYSTEM_LOG_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 4)
#define CMD_GET_SYSTEM_MISC_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 5)
#define CMD_SET_SYSTEM_CONFIG		                (CMD_SYSTEM_CONFIG_BASE + 20)
#define CMD_SET_SYSTEM_PTZ_CONFIG	                (CMD_SYSTEM_CONFIG_BASE + 21)
#define CMD_SET_SYSTEM_TIME_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 22)
#define CMD_SET_SYSTEM_USER_CONFIG      	        (CMD_SYSTEM_CONFIG_BASE + 23)
#define CMD_SET_SYSTEM_LOG_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 24)
#define CMD_SET_SYSTEM_PTZ_COMMON	            (CMD_SYSTEM_CONFIG_BASE + 25)
#define CMD_SET_SYSTEM_PTZ_ADVANCE       	    (CMD_SYSTEM_CONFIG_BASE + 26)
#define CMD_SET_SYSTEM_MISC_CONFIG	            (CMD_SYSTEM_CONFIG_BASE + 27)
#define CMD_SYSTEM_CONFIG_LAST		            (CMD_SYSTEM_CONFIG_BASE + 27)

//network cofig cmd
#define CMD_NETWORK_CONFIG_BASE			        300
#define CMD_GET_NETWORK_CONFIG			        (CMD_NETWORK_CONFIG_BASE + 0)
//#define CMD_GET_NETWORK_COMMON_CONFIG	    (CMD_NETWORK_CONFIG_BASE + 1)
//#define CMD_GET_NETWORK_IPACQUIRE_CONFIG      (CMD_NETWORK_CONFIG_BASE + 2)
#define CMD_GET_NETWORK_LAN_CONFIG   	        (CMD_NETWORK_CONFIG_BASE + 5)
#define CMD_GET_NETWORK_WIFI_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 6)
#define CMD_GET_NETWORK_ADSL_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 10)
#define CMD_GET_NETWORK_DDNS_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 11)
#define CMD_GET_NETWORK_UPNP_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 12)
#define CMD_GET_NETWORK_G3_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 13)
#define CMD_SET_NETWORK_CONFIG			        (CMD_NETWORK_CONFIG_BASE + 20)
//#define CMD_SET_NETWORK_COMMON_CONFIG	    (CMD_NETWORK_CONFIG_BASE + 21)
//#define CMD_SET_NETWORK_IPACQUIRE_CONFIG      (CMD_NETWORK_CONFIG_BASE + 22)
#define CMD_SET_NETWORK_LAN_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 25)
#define CMD_SET_NETWORK_WIFI_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 26)
#define CMD_SET_NETWORK_ADSL_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 30)
#define CMD_SET_NETWORK_DDNS_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 31)
#define CMD_SET_NETWORK_UPNP_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 32)
#define CMD_SET_NETWORK_G3_CONFIG			    (CMD_NETWORK_CONFIG_BASE + 33)
#define CMD_NETWORK_CONFIG_LAST			        (CMD_NETWORK_CONFIG_BASE + 33)

//server config cmd
#define CMD_SERVER_CONFIG_BASE			    400

#define CMD_GET_SERVER_CONFIG			        (CMD_SERVER_CONFIG_BASE + 0)
#define CMD_GET_SERVER_FTP_CONFIG		        (CMD_SERVER_CONFIG_BASE + 1)
#define CMD_GET_SERVER_SMTP_CONFIG		    (CMD_SERVER_CONFIG_BASE + 2)
#define CMD_SET_SERVER_CONFIG			        (CMD_SERVER_CONFIG_BASE + 20)
#define CMD_SET_SERVER_FTP_CONFIG		        (CMD_SERVER_CONFIG_BASE + 21)
#define CMD_SET_SERVER_SMTP_CONFIG		    (CMD_SERVER_CONFIG_BASE + 22)
#define CMD_SERVER_CONFIG_LAST			        (CMD_SERVER_CONFIG_BASE + 22)

//media config cmd
#define CMD_MEDIA_CONFIG_BASE			            500
#define CMD_GET_MEDIA_CONFIG			            (CMD_MEDIA_CONFIG_BASE + 0)
#define CMD_GET_MEDIA_VIDEO_CONFIG		        (CMD_MEDIA_CONFIG_BASE + 1)
#define CMD_GET_MEDIA_AUDIO_CONFIG		        (CMD_MEDIA_CONFIG_BASE + 2)
#define CMD_SET_MEDIA_CONFIG			            (CMD_MEDIA_CONFIG_BASE + 20)
#define CMD_SET_MEDIA_VIDEO_CONFIG		        (CMD_MEDIA_CONFIG_BASE + 21)
#define CMD_SET_MEDIA_AUDIO_CONFIG		        (CMD_MEDIA_CONFIG_BASE + 22)
#define CMD_SET_MEDIA_VIDEO_ENCODE		        (CMD_MEDIA_CONFIG_BASE + 23)
#define CMD_SET_MEDIA_VIDEO_CAPTURE		        (CMD_MEDIA_CONFIG_BASE + 24)
#define CMD_SET_MEDIA_VIDEO_OSD			        (CMD_MEDIA_CONFIG_BASE + 25)
#define CMD_SET_MEDIA_VIDEO_JPEG		            (CMD_MEDIA_CONFIG_BASE + 26)
#define CMD_SET_MEDIA_AUDIO_CAPTURE		        (CMD_MEDIA_CONFIG_BASE + 27)
#define CMD_SET_MEDIA_AUDIO_ENCODE		      (CMD_MEDIA_CONFIG_BASE + 28)
#define CMD_SET_PRIVACY_CONFIG                   (CMD_MEDIA_CONFIG_BASE + 29)
#define CMD_MEDIA_CONFIG_LAST			          (CMD_MEDIA_CONFIG_BASE + 28)

//mediastream config cmd
#define CMD_MEDIASTREAM_CONFIG_BASE			   600
#define CMD_GET_MEDIASTREAM_CONFIG			  (CMD_MEDIASTREAM_CONFIG_BASE + 0)
#define CMD_SET_MEDIASTREAM_CONFIG			  (CMD_MEDIASTREAM_CONFIG_BASE + 20)
#define CMD_MEDIASTREAM_CONFIG_LAST			  (CMD_MEDIASTREAM_CONFIG_BASE + 24)

#define CMD_PLATFORM_CONFIG_BASE			       650
#define CMD_GET_PLATFORM_CONFIG				    (CMD_PLATFORM_CONFIG_BASE + 0)
#define CMD_SET_PLATFORM_CONFIG				    (CMD_PLATFORM_CONFIG_BASE + 20)
#define CMD_PLATFORM_CONFIG_LAST			        (CMD_PLATFORM_CONFIG_BASE + 24)

//record config cmd
#define CMD_RECORD_CONFIG_BASE			      700
#define CMD_GET_RECORD_CONFIG			          (CMD_RECORD_CONFIG_BASE + 0)
#define CMD_SET_RECORD_CONFIG			          (CMD_RECORD_CONFIG_BASE + 20)
#define CMD_RECORD_CONFIG_LAST			      (CMD_RECORD_CONFIG_BASE + 22)

//alarm config cmd
#define CMD_ALARM_CONFIG_BASE				    800
#define CMD_GET_ALARM_CONFIG				    (CMD_ALARM_CONFIG_BASE + 0)
#define CMD_GET_ALARM_INPUT_CONFIG			(CMD_ALARM_CONFIG_BASE + 1)
#define CMD_GET_ALARM_MOTIONDETECT_CONFIG	(CMD_ALARM_CONFIG_BASE + 2)
#define CMD_GET_ALARM_VIDEOCOVER_CONFIG	(CMD_ALARM_CONFIG_BASE + 3)
#define CMD_GET_ALARM_VIDEOLOST_CONFIG		(CMD_ALARM_CONFIG_BASE + 4)
#define CMD_GET_ALARM_SF_CONFIG				(CMD_ALARM_CONFIG_BASE + 5)
#define CMD_SET_ALARM_CONFIG				    (CMD_ALARM_CONFIG_BASE + 20)
#define CMD_SET_ALARM_INPUT_CONFIG			(CMD_ALARM_CONFIG_BASE + 21)
#define CMD_SET_ALARM_MOTIONDETECT_CONFIG	(CMD_ALARM_CONFIG_BASE + 22)
#define CMD_SET_ALARM_VIDEOCOVER_CONFIG	(CMD_ALARM_CONFIG_BASE + 23)
#define CMD_SET_ALARM_VIDEOLOST_CONFIG		(CMD_ALARM_CONFIG_BASE + 24)
#define CMD_SET_ALARM_SF_CONFIG				(CMD_ALARM_CONFIG_BASE + 25)
#define CMD_SET_ALARM_INPUT_CHANNEL_CONFIG	(CMD_ALARM_CONFIG_BASE + 26)
#define CMD_ALARM_CONFIG_LAST				    (CMD_ALARM_CONFIG_BASE + 27)

#define CMD_GET_CONFIG_FIELD_VALUE		  900

// config manager cmd
#define CMD_SYSTEM_MANAGE_BASE             1000

#define CMD_CONFIG_UPDATE		            (CMD_SYSTEM_MANAGE_BASE + 1)
#define CMD_CONFIG_RESTORE		            (CMD_SYSTEM_MANAGE_BASE + 2)
#define CMD_CONFIG_BACKUP		            (CMD_SYSTEM_MANAGE_BASE + 3)
#define CMD_SET_SYSTEM_TIME		            (CMD_SYSTEM_MANAGE_BASE + 5)
#define CMD_SYSTEM_REBOOT		            (CMD_SYSTEM_MANAGE_BASE + 7)
#define CMD_RECORD_REMOVE		            (CMD_SYSTEM_MANAGE_BASE + 8)
#define CMD_APPBIN_LOCAL_UPDATE 	        (CMD_SYSTEM_MANAGE_BASE + 9)
#define CMD_APPBIN_FTP_UPDATE  		    (CMD_SYSTEM_MANAGE_BASE + 10)
#define CMD_GET_SYSTEM_VERSION_INFO      (CMD_SYSTEM_MANAGE_BASE + 12)
#define CMD_GET_LOG_CONFIG      	        (CMD_SYSTEM_MANAGE_BASE + 13)
#define CMD_GET_STORAGE_INFO 		        (CMD_SYSTEM_MANAGE_BASE + 14)
#define CMD_RECORD_START			        (CMD_SYSTEM_MANAGE_BASE + 15)
#define CMD_RECORD_STOP				        (CMD_SYSTEM_MANAGE_BASE + 16)
#define CMD_STORAGE_DEVICE_FORMAT	    (CMD_SYSTEM_MANAGE_BASE + 17)
#define CMD_STORAGE_DEVICE_UNMOUNT      (CMD_SYSTEM_MANAGE_BASE + 18)
#define CMD_GET_SERIALNUMBER			    (CMD_SYSTEM_MANAGE_BASE + 19)
#define CMD_GET_SYSTEMCONTROLSTRING		(CMD_SYSTEM_MANAGE_BASE + 20)
#define CMD_GET_RECORD_FILE_LIST		    (CMD_SYSTEM_MANAGE_BASE + 21)
#define CMD_UPLOAD_FILE					    (CMD_SYSTEM_MANAGE_BASE + 22)
#define CMD_DOWNLOAD_FILE				    (CMD_SYSTEM_MANAGE_BASE + 23)
#define CMD_REMOVE_FILE					    (CMD_SYSTEM_MANAGE_BASE + 24)
#define CMD_GET_LOGFILE_LIST			        (CMD_SYSTEM_MANAGE_BASE + 25)
#define CMD_GET_NETWORK_STATUS			(CMD_SYSTEM_MANAGE_BASE + 26)
#define CMD_CONFIG_NETWORK				    (CMD_SYSTEM_MANAGE_BASE + 27)
#define CMD_SET_REPLAY_FILENAME			(CMD_SYSTEM_MANAGE_BASE + 28)
#define CMD_GET_REPLAY_FILENAME			(CMD_SYSTEM_MANAGE_BASE + 29)
#define CMD_GET_IPC_TYPE				        (CMD_SYSTEM_MANAGE_BASE + 30)
#define CMD_GET_MEDIA_CAPABILITY		    (CMD_SYSTEM_MANAGE_BASE + 31)
#define CMD_SET_KEYFRAME				    (CMD_SYSTEM_MANAGE_BASE + 32)
#define CMD_SET_USER_DEV_DATA			    (CMD_SYSTEM_MANAGE_BASE + 33)
#define CMD_GET_USER_DEV_DATA			    (CMD_SYSTEM_MANAGE_BASE + 34)
#define CMD_OPEN_RS232_PORT                (CMD_SYSTEM_MANAGE_BASE + 35)
#define CMD_CLOSE_RS232_PORT               (CMD_SYSTEM_MANAGE_BASE + 36)
#define CMD_START_RTP_PUSH				    (CMD_SYSTEM_MANAGE_BASE + 40)
#define CMD_STOP_RTP_PUSH				    (CMD_SYSTEM_MANAGE_BASE + 41)
#define CMD_ALARM_OUTPUT_CONTROL		    (CMD_SYSTEM_MANAGE_BASE + 42)
#define CMD_SNAP_JPEG_PICTURE			    (CMD_SYSTEM_MANAGE_BASE + 43)
#define CMD_NETWORK_DIAL				    (CMD_SYSTEM_MANAGE_BASE + 45)
#define CMD_IRCUT_CONTROL				    (CMD_SYSTEM_MANAGE_BASE + 46)
#define CMD_SET_AUX_DATA				    (CMD_SYSTEM_MANAGE_BASE + 47)




